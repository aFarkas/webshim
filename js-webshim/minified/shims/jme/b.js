webshims.register("jme",function(a,b,c,d,e){"use strict";"opacity"in Modernizr||a("html").addClass("opacity"in document.documentElement.style?"opacity":"no-opacity");var f={},g={},h=!1;a(c).on("load",function(){h=!0;var b,d=function(){h=!0};a(c).on("scroll",function(){h=!1,clearTimeout(b),b=setTimeout(d,999)})}),a.jme={version:"2.0.9",classNS:"",options:{},plugins:{},data:function(b,c,d){var f=a(b).data(k+"jme")||a.data(b,k+"jme",{});return d===e?c?f[c]:f:(f[c]=d,void 0)},registerPlugin:function(a,b){this.plugins[a]=b,b.nodeName||(b.nodeName=""),b.className||(b.className=a)},defineMethod:function(a,b){g[a]=b},defineProp:function(b,c){c||(c={}),c.set||(c.set=c.readonly?function(){throw b+" is readonly"}:a.noop),c.get||(c.get=function(c){return a.jme.data(c,b)}),f[b]=c},prop:function(b,c,d){if(!f[c])return a.prop(b,c,d);if(d===e)return f[c].get(b);var g=f[c].set(b,d);g===e&&(g=d),"noDataSet"!=g&&a.jme.data(b,c,g)},setText:function(b,c){var d=b;b&&c&&(d={},d[b]=c),a.each(d,function(b,c){a.jme.plugins[b]&&(a.jme.plugins[b].text=c)})}},a.fn.jmeProp=function(b,c){return a.access(this,a.jme.prop,b,c,arguments.length>1)},a.fn.jmeFn=function(b){var c,d=Array.prototype.slice.call(arguments,1);return this.each(function(){return c=(g[b]||a.prop(this,b)).apply(this,d),c!==e?!1:void 0}),c!==e?c:this};var i,j=[],k="";a.jme.createSelectors=function(){i||(k=a.jme.classNS,i="."+k+"mediaplayer",a.each(a.jme.plugins,function(a,b){b.className=k+b.className,j.push(b.selector)}),j=j.join(","))},a.jme.initJME=function(b,c){a(i,b).add(c.filter(i)).jmePlayer()};var l={emptied:1,pause:1};a.jme.getDOMList=function(b){var c=[];return b||(b=[]),"string"==typeof b&&(b=b.split(" ")),a.each(b,function(a,b){b&&(b=document.getElementById(b),b&&c.push(b))}),c},b.ready("dom-support",function(){a("<input />").prop("labels")||b.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){var b=[],c=this.id;return c&&(b=a('label[for="'+c+'"]')),b[0]||(b=a(this).closest("label",this.form)),b.get()},writeable:!1}})}),a.jme.getButtonText=function(b,c){var d=a("span.jme-text, +label span.jme-text",b),e=b.prop("labels");e=e&&e[0]?a(e).eq(0):!1,d[0]||(d=e||b);var f,g,h,i,j=d.text().split("/"),k=b.prop("title").split("/"),l=function(k){i!==k&&(i=k,g&&d.text(j[k||0]),h&&(b.prop("title",j[k||0]),e&&e.prop("title",j[k||0])),c&&b.removeClass(c[k?0:1]).addClass(c[k]),f&&(b.prop("checked",!!k),(b.data("checkboxradio")||{refresh:a.noop}).refresh()))};return 2==j.length&&(j[0]=j[0].trim(),j[1]=j[1].trim(),g=!0),2==k.length&&(k[0]=k[0].trim(),k[1]=k[1].trim(),h=!0),b.is('[type="checkbox"], [type="radio"]')?(b.prop("checked",function(){return this.defaultChecked}),f=!0):b.is("a")&&b.on("click",function(a){a.preventDefault()}),l},a.fn.jmePlayer=function(b){return this.each(function(){b&&a.jme.data(this,a.extend(!0,{},b));var c,d,e,f,g,h,i=a("audio, video",this).filter(":first"),m=a(this),n=a(j,m),o=a.jme.getDOMList(a.jme.data(this,"controls")),p=n.add(a(o)),q=a.jme.data(this),r=a.jme.data(i[0]);m.addClass(i.prop("nodeName").toLowerCase()+"player"),r.player=m,r.media=i,q.media||(d=!0,h=!i.prop("autoplay"),f=function(){i.off("canplay",e),clearTimeout(g)},e=function(){var b=a.prop(this,"paused")?"idle":"playing";m.attr("data-state",b)},c=function(b){var c,d,h=b.type;f(),"ended"==h||a.prop(this,"ended")?h="ended":"waiting"==h?a.prop(this,"readyState")>2?h="":(g=setTimeout(function(){i.prop("readyState")>2&&e()},9),i.on("canPlay",e)):l[h]?h="idle":(c=a.prop(this,"readyState"),d=a.prop(this,"paused"),h=!d&&3>c?"waiting":!d&&c>2?"playing":"idle"),h&&m.attr("data-state",h)},q.media=i,q.player=m,i.on("ended",function(){f(),i.jmeFn("pause"),i.prop("autoplay")||i.prop("loop")||i.hasClass("no-reload")||i.jmeFn("load")}).on("emptied waiting canplay canplaythrough playing ended pause mediaerror",c).on("volumechange updateJMEState",function(){var b=a.prop(this,"volume");m[!b||a.prop(this,"muted")?"addClass":"removeClass"](k+"state-muted"),b=.01>b?"no":.36>b?"low":.7>b?"medium":"high",m.attr("data-volume",b)}).on("emptied",function(a){"emptied"==a.type&&(h=!i.prop("autoplay"))}),m.on({useractive:function(){m.attr("data-useractivity","true")}}).on("userinactive",{idletime:3500},function(){m.attr("data-useractivity","false")}).triggerHandler("userinactive")),m.jmeFn("addControls",p),d&&("controlbar"in q||(q.controlbar=!0),q.controlbar&&m.jmeProp("controlbar",!0),c&&i.on("updateJMEState",c).triggerHandler("updateJMEState"))})},a.jme.defineProp("isPlaying",{get:function(b){return!a.prop(b,"ended")&&!a.prop(b,"paused")&&a.prop(b,"readyState")>1&&!a.data(b,"mediaerror")},readonly:!0}),a.jme.defineProp("player",{readonly:!0}),a.jme.defineProp("media",{readonly:!0}),a.jme.defineProp("srces",{get:function(b){var c,d=a.jme.data(b),e=d.media.prop("src");return e?[{src:e}]:c=a.map(a("source",d.media).get(),function(b){var c={src:a.prop(b,"src")},d=a.attr(b,"media");return d&&(c.media=d),d=a.attr(b,"type"),d&&(c.type=d),c})},set:function(b,c){var d=a.jme.data(b),e=function(b,c){"string"==typeof c&&(c={src:c}),a(document.createElement("source")).attr(c).appendTo(d.media)};return d.media.removeAttr("src").find("source").remove(),a.isArray(c)?a.each(c,e):e(0,c),d.media.jmeFn("load"),"noDataSet"}}),a.jme.defineMethod("togglePlay",function(){a(this).jmeFn(f.isPlaying.get(this)?"pause":"play")}),a.jme.defineMethod("addControls",function(b){var c=a.jme.data(this)||{};if(c.media){var d=a.jme.data(c.player[0],"controlElements")||a([]);b=a(b),a.each(a.jme.plugins,function(d,e){b.filter("."+e.className).add(b.find("."+e.className)).each(function(){var b=a(this),d=a.jme.data(this);d.player=c.player,d.media=c.media,d.rendered||(d.rendered=!0,e.options&&a.each(e.options,function(a,b){a in d||(d[a]=b)}),e._create(b,c.media,c.player,d),b=null)})}),a.jme.data(c.player[0],"controlElements",d.add(b)),c.player.triggerHandler("controlsadded")}}),function(){var b={add:function(b,c,d){var e,f,g=a.data(b,"jmeuseractivity")||a.data(b,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}}),h=a(b),i=function(){g.idle||(g.idle=!0,g.trigger.userinactive&&h.trigger("userinactive"))},j=function(a){!a||"mousemove"===a.type&&a.pageX===e&&a.pageY===f||("mousemove"===a.type&&(e=a.pageX,f=a.pageY),g.idleTimer&&clearTimeout(g.idleTimer),g.idleTimer=setTimeout(i,g.idletime),g.idle&&(g.idle=!1,g.trigger.useractive&&h.trigger("useractive")))};g.idletime=(c||{}).idletime||g.idletime,c&&"idle"in c&&(g.idle=c.idle),g.trigger[d]=!0,g.bound||(h.on("mouseleave.jmeuseractivity",i).on("mousemove.jmeuseractivity focusin.jmeuseractivity mouseenter.jmeuseractivity keydown.jmeuseractivity keyup.jmeuseractivity mousedown.jmeuseractivity",j),g.bound=!0),g.idle||j({type:"initunidled"})},remove:function(b,c){var d=a.data(b,"jmeuseractivity")||a.data(b,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}});d.trigger[c]=!1,d.trigger.useractive||d.trigger.userinactive||(a(b).off(".jmeuseractivity"),d.bound=!1)}};a.each(["useractive","userinactive"],function(c,d){a.event.special[d]={setup:function(a){b.add(this,a,d)},teardown:function(){b.remove(this,d)}}})}(),function(){var c;a.jme.startJME=function(){c||(setTimeout(function(){b.loader.loadList(["range-ui"])},0),b.ready("mediaelement",function(){a(function(){a.jme.createSelectors(),a.jme.initJME(document,a([]))}),b.addReady(function(b,c){b!==document&&a.jme.initJME(b,c)})}),c=!0)},a.jme.startJME()}()});