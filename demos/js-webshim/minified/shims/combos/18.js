jQuery.webshims.register("form-datalist",function(b,c,l,m,t){c.propTypes.element=function(i){c.createPropDefault(i,"attr");if(!i.prop)i.prop={get:function(){var c=i.attr.get.call(this);c&&(c=m.getElementById(c))&&i.propNodeName&&!b.nodeName(c,i.propNodeName)&&(c=null);return c||null},writeable:!1}};(function(){var i=b.webshims.cfg.forms,n=Modernizr.input.list;if(!n||i.customDatalist){var j=0,p={submit:1,button:1,reset:1,hidden:1,range:1,date:1},u=b.browser.msie&&7>parseInt(b.browser.version,10),r=
{},k=function(b){if(!b)return[];if(r[b])return r[b];var c;try{c=JSON.parse(localStorage.getItem("storedDatalistOptions"+b))}catch(g){}r[b]=c||[];return c||[]},q={_create:function(d){if(!p[b.prop(d.input,"type")]){var c=d.datalist,g=b.data(d.input,"datalistWidget");if(c&&g&&g.datalist!==c)g.datalist=c,g.id=d.id,g.shadowList.prop("className","datalist-polyfill "+(g.datalist.className||"")+" "+g.datalist.id+"-shadowdom"),i.positionDatalist?g.shadowList.insertAfter(d.input):g.shadowList.appendTo("body"),
b(g.datalist).off("updateDatalist.datalistWidget").on("updateDatalist.datalistWidget",b.proxy(g,"_resetListCached")),g._resetListCached();else if(c){if(!(g&&g.datalist===c)){j++;var a=this;this.hideList=b.proxy(a,"hideList");this.timedHide=function(){clearTimeout(a.hideTimer);a.hideTimer=setTimeout(a.hideList,9)};this.datalist=c;this.id=d.id;this.hasViewableData=!0;this._autocomplete=b.attr(d.input,"autocomplete");b.data(d.input,"datalistWidget",this);this.shadowList=b('<div class="datalist-polyfill '+
(this.datalist.className||"")+" "+this.datalist.id+'-shadowdom" />');i.positionDatalist||b(d.input).hasClass("position-datalist")?this.shadowList.insertAfter(d.input):this.shadowList.appendTo("body");this.index=-1;this.input=d.input;this.arrayOptions=[];this.shadowList.delegate("li","mouseenter.datalistWidget mousedown.datalistWidget click.datalistWidget",function(f){var e=b("li:not(.hidden-item)",a.shadowList),o="mousedown"==f.type||"click"==f.type;a.markItem(e.index(f.currentTarget),o,e);"click"==
f.type&&(a.hideList(),i.customDatalist&&b(d.input).trigger("datalistselect"));return"mousedown"!=f.type}).on("focusout",this.timedHide);d.input.setAttribute("autocomplete","off");b(d.input).attr({"aria-haspopup":"true"}).on({"input.datalistWidget":function(){if(!a.triggeredByDatalist)a.changedValue=!1,a.showHideOptions()},"keydown.datalistWidget":function(f){var e=f.keyCode,o;if(40==e&&!a.showList())return a.markItem(a.index+1,!0),!1;if(a.isListVisible){if(38==e)return a.markItem(a.index-1,!0),!1;
if(!f.shiftKey&&(33==e||36==e))return a.markItem(0,!0),!1;if(!f.shiftKey&&(34==e||35==e))return f=b("li:not(.hidden-item)",a.shadowList),a.markItem(f.length-1,!0,f),!1;if(13==e||27==e)return 13==e&&(o=b("li.active-item:not(.hidden-item)",a.shadowList),a.changeValue(b("li.active-item:not(.hidden-item)",a.shadowList))),a.hideList(),i.customDatalist&&o&&o[0]&&b(d.input).trigger("datalistselect"),!1}},"focus.datalistWidget":function(){b(this).hasClass("list-focus")&&a.showList()},"mousedown.datalistWidget":function(){b(this).is(":focus")&&
a.showList()},"blur.datalistWidget":this.timedHide});b(this.datalist).off("updateDatalist.datalistWidget").on("updateDatalist.datalistWidget",b.proxy(this,"_resetListCached"));this._resetListCached();if(d.input.form&&(d.input.name||d.input.id))b(d.input.form).on("submit.datalistWidget"+d.input.id,function(){if(!b(d.input).hasClass("no-datalist-cache")&&"off"!=a._autocomplete){var f=b.prop(d.input,"value"),e=(d.input.name||d.input.id)+b.prop(d.input,"type");if(!a.storedOptions)a.storedOptions=k(e);
if(f&&-1==a.storedOptions.indexOf(f)&&(a.storedOptions.push(f),f=a.storedOptions,e)){f=f||[];try{localStorage.setItem("storedDatalistOptions"+e,JSON.stringify(f))}catch(o){}}}});b(l).on("unload.datalist"+this.id+" beforeunload.datalist"+this.id,function(){a.destroy()})}}else g&&g.destroy()}},destroy:function(){var d=b.attr(this.input,"autocomplete");b(this.input).off(".datalistWidget").removeData("datalistWidget");this.shadowList.remove();b(m).off(".datalist"+this.id);b(l).off(".datalist"+this.id);
this.input.form&&this.input.id&&b(this.input.form).off("submit.datalistWidget"+this.input.id);this.input.removeAttribute("aria-haspopup");d===t?this.input.removeAttribute("autocomplete"):b(this.input).attr("autocomplete",d)},_resetListCached:function(b){var h=this,g;this.needsUpdate=!0;this.lastUpdatedValue=!1;this.lastUnfoundValue="";this.updateTimer||(l.QUnit||(g=b&&m.activeElement==h.input)?h.updateListOptions(g):c.ready("WINDOWLOAD",function(){h.updateTimer=setTimeout(function(){h.updateListOptions();
h=null;j=1},200+100*j)}))},maskHTML:function(b){return b.replace(/</g,"&lt;").replace(/>/g,"&gt;")},updateListOptions:function(c){this.needsUpdate=!1;clearTimeout(this.updateTimer);this.updateTimer=!1;this.shadowList.css({fontSize:b.css(this.input,"fontSize"),fontFamily:b.css(this.input,"fontFamily")});this.searchStart=i.customDatalist&&b(this.input).hasClass("search-start");var h=[],g=[],a=[],f,e,o,w;for(e=b.prop(this.datalist,"options"),o=0,w=e.length;o<w;o++){f=e[o];if(f.disabled)return;f={value:b(f).val()||
"",text:b.trim(b.attr(f,"label")||f.textContent||f.innerText||b.text([f])||""),className:f.className||"",style:b.attr(f,"style")||""};f.text?f.text!=f.value&&(f.className+=" different-label-value"):f.text=f.value;g[o]=f.value;a[o]=f}if(!this.storedOptions)this.storedOptions=b(this.input).hasClass("no-datalist-cache")||"off"==this._autocomplete?[]:k((this.input.name||this.input.id)+b.prop(this.input,"type"));this.storedOptions.forEach(function(e){-1==g.indexOf(e)&&a.push({value:e,text:e,className:"stored-suggest",
style:""})});for(o=0,w=a.length;o<w;o++)e=a[o],h[o]='<li class="'+e.className+'" style="'+e.style+'" tabindex="-1" role="listitem"><span class="option-label">'+this.maskHTML(e.text)+'</span> <span class="option-value">'+this.maskHTML(e.value)+"</span></li>";this.arrayOptions=a;this.shadowList.html('<div class="datalist-outer-box"><div class="datalist-box"><ul role="list">'+h.join("\n")+"</ul></div></div>");b.fn.bgIframe&&u&&this.shadowList.bgIframe();(c||this.isListVisible)&&this.showHideOptions()},
showHideOptions:function(c){var h=b.prop(this.input,"value").toLowerCase();if(!(h===this.lastUpdatedValue||this.lastUnfoundValue&&0===h.indexOf(this.lastUnfoundValue))){this.lastUpdatedValue=h;var g=!1,a=this.searchStart,f=b("li",this.shadowList);h?this.arrayOptions.forEach(function(e,o){var c;if(!("lowerText"in e))e.lowerText=e.text!=e.value?e.value.toLowerCase()+e.text.toLowerCase():e.text.toLowerCase();c=e.lowerText.indexOf(h);(c=a?!c:-1!==c)?(b(f[o]).removeClass("hidden-item"),g=!0):b(f[o]).addClass("hidden-item")}):
f.length&&(f.removeClass("hidden-item"),g=!0);this.hasViewableData=g;!c&&g&&this.showList();if(!g)this.lastUnfoundValue=h,this.hideList()}},setPos:function(){this.shadowList.css({marginTop:0,marginLeft:0,marginRight:0,marginBottom:0});var d=i.positionDatalist?b(this.input).position():c.getRelOffset(this.shadowList,this.input);d.top+=b(this.input).outerHeight();d.width=b(this.input).outerWidth()-(parseInt(this.shadowList.css("borderLeftWidth"),10)||0)-(parseInt(this.shadowList.css("borderRightWidth"),
10)||0);this.shadowList.css({marginTop:"",marginLeft:"",marginRight:"",marginBottom:""}).css(d);return d},showList:function(){if(this.isListVisible)return!1;this.needsUpdate&&this.updateListOptions();this.showHideOptions(!0);if(!this.hasViewableData)return!1;this.isListVisible=!0;var c=this;c.setPos();c.shadowList.addClass("datalist-visible").find("li.active-item").removeClass("active-item");b(l).unbind(".datalist"+c.id);b(m).off(".datalist"+c.id).on("mousedown.datalist"+c.id+" focusin.datalist"+
c.id,function(h){h.target===c.input||c.shadowList[0]===h.target||b.contains(c.shadowList[0],h.target)?(clearTimeout(c.hideTimer),setTimeout(function(){clearTimeout(c.hideTimer)},9)):c.timedHide()}).on("updateshadowdom.datalist"+c.id,function(){c.setPos()});return!0},hideList:function(){if(!this.isListVisible)return!1;var d=this,h=function(){d.changedValue&&b(d.input).trigger("change");d.changedValue=!1};d.shadowList.removeClass("datalist-visible list-item-active");d.index=-1;d.isListVisible=!1;if(d.changedValue){d.triggeredByDatalist=
!0;c.triggerInlineForm&&c.triggerInlineForm(d.input,"input");if(b(d.input).is(":focus"))b(d.input).one("blur",h);else h();d.triggeredByDatalist=!1}b(m).unbind(".datalist"+d.id);b(l).off(".datalist"+d.id).one("resize.datalist"+d.id,function(){d.shadowList.css({top:0,left:0})});return!0},scrollIntoView:function(c){var h=b("ul",this.shadowList),g=b("div.datalist-box",this.shadowList),a=c.position();a.top-=(parseInt(h.css("paddingTop"),10)||0)+(parseInt(h.css("marginTop"),10)||0)+(parseInt(h.css("borderTopWidth"),
10)||0);0>a.top?g.scrollTop(g.scrollTop()+a.top-2):(a.top+=c.outerHeight(),c=g.height(),a.top>c&&g.scrollTop(g.scrollTop()+(a.top-c)+2))},changeValue:function(c){if(c[0]){var c=b("span.option-value",c).text(),h=b.prop(this.input,"value");if(c!=h)b(this.input).prop("value",c).triggerHandler("updateInput"),this.changedValue=!0}},markItem:function(c,h,g){g=g||b("li:not(.hidden-item)",this.shadowList);if(g.length)0>c?c=g.length-1:c>=g.length&&(c=0),g.removeClass("active-item"),this.shadowList.addClass("list-item-active"),
g=g.filter(":eq("+c+")").addClass("active-item"),h&&(this.changeValue(g),this.scrollIntoView(g)),this.index=c}};(function(){n||c.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var h=b("select",this);h[0]?h=h[0].options:(h=b("option",this).get(),h.length&&c.warn("you should wrap your option-elements for a datalist in a select element to support IE and other old browsers."));return h}}});var d={autocomplete:{attr:{get:function(){var c=b.data(this,"datalistWidget");return c?
c._autocomplete:"autocomplete"in this?this.autocomplete:this.getAttribute("autocomplete")},set:function(c){var d=b.data(this,"datalistWidget");d?(d._autocomplete=c,"off"==c&&d.hideList()):"autocomplete"in this?this.autocomplete=c:this.setAttribute("autocomplete",c)}}}};n?((b("<datalist><select><option></option></select></datalist>").prop("options")||[]).length||c.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var c=this.options||[];if(!c.length){var d=b("select",this);
if(d[0]&&d[0].options&&d[0].options.length)c=d[0].options}return c}}}),d.list={attr:{get:function(){var d=c.contentAttr(this,"list");null!=d?this.removeAttribute("list"):d=b.data(this,"datalistListAttr");return null==d?t:d},set:function(d){b.data(this,"datalistListAttr",d);c.objectCreate(q,t,{input:this,id:d,datalist:b.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"}):d.list={attr:{get:function(){var b=c.contentAttr(this,"list");return null==b?t:b},set:function(d){c.contentAttr(this,
"list",d);c.objectCreate(q,t,{input:this,id:d,datalist:b.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"};c.defineNodeNameProperties("input",d);if(b.event.customEvent)b.event.customEvent.updateDatalist=!0,b.event.customEvent.updateInput=!0,b.event.customEvent.datalistselect=!0;c.addReady(function(b,c){c.filter("datalist > select, datalist, datalist > option, datalist > select > option").closest("datalist").triggerHandler("updateDatalist")})})()}})()});
jQuery.webshims.register("form-native-extend",function(b,c,l,m,t,i){l=l.Modernizr;t=l.inputtypes;if(l.formvalidation&&!c.bugs.bustedValidity){var n=c.inputTypes,j={};c.addInputType=function(a,b){n[a]=b};c.addValidityRule=function(a,b){j[a]=b};c.addValidityRule("typeMismatch",function(a,b,f,c){if(""===b)return!1;c=c.typeMismatch;if(!("type"in f))f.type=(a[0].getAttribute("type")||"").toLowerCase();n[f.type]&&n[f.type].mismatch&&(c=n[f.type].mismatch(b,a));return c});var p=i.overrideMessages,u=!t.number||
!t.time||!t.range||p,r="customError,typeMismatch,rangeUnderflow,rangeOverflow,stepMismatch,tooLong,patternMismatch,valueMissing,valid".split(","),i=p?["value","checked"]:["value"],k=[],q=function(a,f){if(a){var c=(a.getAttribute&&a.getAttribute("type")||a.type||"").toLowerCase();if(p||n[c])p&&!f&&"radio"==c&&a.name?b(m.getElementsByName(a.name)).each(function(){b.prop(this,"validity")}):b.prop(a,"validity")}},d={};["input","textarea","select"].forEach(function(a){var f=c.defineNodeNameProperty(a,
"setCustomValidity",{prop:{value:function(d){var d=d+"",g="input"==a?b(this).getNativeElement()[0]:this;f.prop._supvalue.call(g,d);c.bugs.validationMessage&&c.data(g,"customvalidationMessage",d);u&&(c.data(g,"hasCustomError",!!d),q(g))}}});d[a]=f.prop._supvalue});if(u||p)i.push("min"),i.push("max"),i.push("step"),k.push("input");p&&(i.push("required"),i.push("pattern"),k.push("select"),k.push("textarea"));if(u){var h;k.forEach(function(a){var f=c.defineNodeNameProperty(a,"validity",{prop:{get:function(){if(!h){var g=
"input"==a?b(this).getNativeElement()[0]:this,i=f.prop._supget.call(g);if(!i)return i;var s={};r.forEach(function(a){s[a]=i[a]});if(!b.prop(g,"willValidate"))return s;h=!0;var k=b(g),v={type:(g.getAttribute&&g.getAttribute("type")||"").toLowerCase(),nodeName:(g.nodeName||"").toLowerCase()},l=k.val(),x=!!c.data(g,"hasCustomError"),m;h=!1;s.customError=x;if(s.valid&&s.customError)s.valid=!1;else if(!s.valid){var q=!0;b.each(s,function(a,b){if(b)return q=!1});if(q)s.valid=!0}b.each(j,function(b,f){s[b]=
f(k,l,v,s);if(s[b]&&(s.valid||!m)&&(p||n[v.type]&&n[v.type].mismatch))d[a].call(g,c.createValidationMessage(g,b)),s.valid=!1,m=!0});s.valid?(d[a].call(g,""),c.data(g,"hasCustomError",!1)):p&&!m&&!x&&b.each(s,function(b,f){if("valid"!==b&&f)return d[a].call(g,c.createValidationMessage(g,b)),!1});return s}},writeable:!1}})});i.forEach(function(a){c.onNodeNamesPropertyModify(k,a,function(){q(this)})});if(m.addEventListener){var g,a=function(a){if("form"in a.target){var f=a.target.form;clearTimeout(g);
q(a.target);f&&p&&b("input",f).each(function(){"password"==this.type&&q(this)})}};m.addEventListener("change",a,!0);p&&(m.addEventListener("blur",a,!0),m.addEventListener("keydown",function(b){13==b.keyCode&&a(b)},!0));m.addEventListener("input",function(a){clearTimeout(g);g=setTimeout(function(){q(a.target)},290)},!0)}var f=k.join(",");c.addReady(function(a,c){b(f,a).add(c.filter(f)).each(function(){b.prop(this,"validity")})});p&&c.ready("DOM form-message",function(){c.activeLang({register:"form-core",
callback:function(){b("input, select, textarea").getNativeElement().each(function(){if(!c.data(this,"hasCustomError")){var a=this,f=b.prop(a,"validity")||{valid:!0},g;f.valid||(g=(a.nodeName||"").toLowerCase(),b.each(f,function(b,f){if("valid"!==b&&f)return d[g].call(a,c.createValidationMessage(a,b)),!1}))}})}})})}c.defineNodeNameProperty("input","type",{prop:{get:function(){var a=(this.getAttribute("type")||"").toLowerCase();return c.inputTypes[a]?a:this.type}}})}});
jQuery.webshims.register("form-number-date-api",function(b,c){var l,m,t,i;if(!c.getStep)c.getStep=function(a,f){var e=b.attr(a,"step");if("any"===e)return e;f=f||r(a);if(!j[f]||!j[f].step)return e;e=l.asNumber(e);return(!isNaN(e)&&0<e?e:j[f].step)*j[f].stepScaleFactor};if(!c.addMinMaxNumberToCache)c.addMinMaxNumberToCache=function(a,b,e){a+"AsNumber"in e||(e[a+"AsNumber"]=j[e.type].asNumber(b.attr(a)),isNaN(e[a+"AsNumber"])&&a+"Default"in j[e.type]&&(e[a+"AsNumber"]=j[e.type][a+"Default"]))};var n=
parseInt("NaN",10),j=c.inputTypes,p=function(a){return"number"==typeof a||a&&a==1*a},u=function(a){return b('<input type="'+a+'" />').prop("type")===a},r=function(a){return(a.getAttribute("type")||"").toLowerCase()},k=c.addMinMaxNumberToCache,q=function(a,b){for(var a=""+a,b=b-a.length,e=0;e<b;e++)a="0"+a;return a},d=c.bugs.bustedValidity;c.addValidityRule("stepMismatch",function(a,b,e,o){if(""===b)return!1;if(!("type"in e))e.type=r(a[0]);if("date"==e.type)return!1;o=(o||{}).stepMismatch;if(j[e.type]&&
j[e.type].step){if(!("step"in e))e.step=c.getStep(a[0],e.type);if("any"==e.step)return!1;if(!("valueAsNumber"in e))e.valueAsNumber=j[e.type].asNumber(b);if(isNaN(e.valueAsNumber))return!1;k("min",a,e);a=e.minAsNumber;isNaN(a)&&(a=j[e.type].stepBase||0);o=Math.abs((e.valueAsNumber-a)%e.step);o=!(1.0E-7>=o||1.0E-7>=Math.abs(o-e.step))}return o});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){c.addValidityRule(a.name,function(b,e,c,d){d=
(d||{})[a.name]||!1;if(""===e)return d;if(!("type"in c))c.type=r(b[0]);if(j[c.type]&&j[c.type].asNumber){if(!("valueAsNumber"in c))c.valueAsNumber=j[c.type].asNumber(e);if(isNaN(c.valueAsNumber))return!1;k(a.attr,b,c);if(isNaN(c[a.attr+"AsNumber"]))return d;d=c[a.attr+"AsNumber"]*a.factor<c.valueAsNumber*a.factor-1.0E-7}return d})});c.reflectProperties(["input"],["max","min","step"]);var h=c.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var a=r(this),a=j[a]&&j[a].asNumber?j[a].asNumber(b.prop(this,
"value")):h.prop._supget&&h.prop._supget.apply(this,arguments);null==a&&(a=n);return a},set:function(a){var f=r(this);j[f]&&j[f].numberToString?isNaN(a)?b.prop(this,"value",""):(f=j[f].numberToString(a),!1!==f?b.prop(this,"value",f):c.warn("INVALID_STATE_ERR: DOM Exception 11")):h.prop._supset&&h.prop._supset.apply(this,arguments)}}}),g=c.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var a=r(this);return j[a]&&j[a].asDate&&!j[a].noAsDate?j[a].asDate(b.prop(this,"value")):g.prop._supget&&
g.prop._supget.call(this)||null},set:function(a){var f=r(this);if(j[f]&&j[f].dateToString&&!j[f].noAsDate){if(null===a)return b.prop(this,"value",""),"";f=j[f].dateToString(a);if(!1!==f)return b.prop(this,"value",f),f;c.warn("INVALID_STATE_ERR: DOM Exception 11")}else return g.prop._supset&&g.prop._supset.apply(this,arguments)||null}}});l={mismatch:function(a){return!p(a)},step:1,stepScaleFactor:1,asNumber:function(a){return p(a)?1*a:n},numberToString:function(a){return p(a)?a:!1}};m={minDefault:0,
maxDefault:100};t={mismatch:function(a){if(!a||!a.split||!/\d$/.test(a))return!0;var f=a.split(/\u002D/);if(3!==f.length)return!0;var e=!1;b.each(f,function(a,b){if(!(p(b)||b&&b=="0"+1*b))return e=!0,!1});if(e)return e;if(4!==f[0].length||2!=f[1].length||12<f[1]||2!=f[2].length||33<f[2])e=!0;return a!==this.dateToString(this.asDate(a,!0))},step:1,stepScaleFactor:864E5,asDate:function(a,b){return!b&&this.mismatch(a)?null:new Date(this.asNumber(a,!0))},asNumber:function(a,b){var e=n;if(b||!this.mismatch(a))a=
a.split(/\u002D/),e=Date.UTC(a[0],a[1]-1,a[2]);return e},numberToString:function(a){return p(a)?this.dateToString(new Date(1*a)):!1},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+q(a.getUTCMonth()+1,2)+"-"+q(a.getUTCDate(),2):!1}};i={mismatch:function(a,f){if(!a||!a.split||!/\d$/.test(a))return!0;a=a.split(/\u003A/);if(2>a.length||3<a.length)return!0;var e=!1,c;a[2]&&(a[2]=a[2].split(/\u002E/),c=parseInt(a[2][1],10),a[2]=a[2][0]);b.each(a,function(a,b){if(!(p(b)||b&&b=="0"+
1*b)||2!==b.length)return e=!0,!1});if(e||23<a[0]||0>a[0]||59<a[1]||0>a[1]||a[2]&&(59<a[2]||0>a[2])||c&&isNaN(c))return!0;c&&(100>c?c*=100:10>c&&(c*=10));return!0===f?[a,c]:!1},step:60,stepBase:0,stepScaleFactor:1E3,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var b=n,a=this.mismatch(a,!0);!0!==a&&(b=Date.UTC("1970",0,1,a[0][0],a[0][1],a[0][2]||0),a[1]&&(b+=a[1]));return b},dateToString:function(a){if(a&&a.getUTCHours){var b=q(a.getUTCHours(),2)+":"+
q(a.getUTCMinutes(),2),c=a.getSeconds();"0"!=c&&(b+=":"+q(c,2));c=a.getUTCMilliseconds();"0"!=c&&(b+="."+q(c,3));return b}return!1}};if(d||!u("range")||!u("time"))m=b.extend({},l,m),i=b.extend({},t,i);(d||!u("number"))&&c.addInputType("number",l);(d||!u("range"))&&c.addInputType("range",m);(d||!u("date"))&&c.addInputType("date",t);(d||!u("time"))&&c.addInputType("time",i)});
jQuery.webshims.register("form-number-date-ui",function(b,c,l,m,t,i){var n=c.triggerInlineForm,l=Modernizr.inputtypes,j=function(){var a={"padding-box":"innerWidth","border-box":"outerWidth","content-box":"width"},f=Modernizr.prefixed&&Modernizr.prefixed("boxSizing");b.browser.msie&&8>c.browserVersion&&(f=!1);return function(b,c){var d,g,i;g="width";f&&(g=a[b.css(f)]||g);d=b[g]();g="width"==g;if(d){var h=parseInt(c.css("marginLeft"),10)||0,v=c.outerWidth();(i=parseInt(b.css("marginRight"),10)||0)&&
b.css("marginRight",0);h<=-1*v?(c.css("marginRight",Math.floor(Math.abs(v+h-0.1)+i)),b.css("paddingRight",(parseInt(b.css("paddingRight"),10)||0)+Math.abs(h)),g&&b.css("width",Math.floor(d+h))):(c.css("marginRight",i),b.css("width",Math.floor(d-h-v-0.2)))}}}(),p={},u=b([]),r,k=function(a,f){b("input",a).add(f.filter("input")).each(function(){var a=b.prop(this,"type");if(k[a]&&!c.data(this,"shadowData"))k[a](b(this))})},q=function(a,c){if(i.lazyDate){var e=b.data(a[0],"setDateLazyTimer");e&&clearTimeout(e);
b.data(a[0],"setDateLazyTimer",setTimeout(function(){a.datepicker("setDate",c);b.removeData(a[0],"setDateLazyTimer");a=null},0))}else a.datepicker("setDate",c)},d={tabindex:1,tabIndex:1,title:1,"aria-required":1,"aria-invalid":1};if(!i.copyAttrs)i.copyAttrs={};c.extendUNDEFProp(i.copyAttrs,d);var h=function(a){return i.calculateWidth?{css:{marginRight:a.css("marginRight"),marginLeft:a.css("marginLeft")},outerWidth:a.outerWidth()}:{}};k.common=function(a,f,e){if(Modernizr.formvalidation)a.on("firstinvalid",
function(b){if(c.fromSubmit||!r)a.off("invalid.replacedwidgetbubble").on("invalid.replacedwidgetbubble",function(f){!b.isInvalidUIPrevented()&&!f.isDefaultPrevented()&&(c.validityAlert.showFor(b.target),b.preventDefault(),f.preventDefault());a.off("invalid.replacedwidgetbubble")})});var g,h,j=b("input, span.ui-slider-handle",f),k=a[0].attributes;for(g in i.copyAttrs)if((h=k[g])&&h.specified)d[g]&&j[0]?j.attr(g,h.nodeValue):f[0].setAttribute(g,h.nodeValue);g=(g=a.attr("id"))?b('label[for="'+g+'"]',
a[0].form):u;f.addClass(a[0].className);c.addShadowDom(a,f,{data:e||{},shadowFocusElement:b("input.input-datetime-local-date, span.ui-slider-handle",f)[0],shadowChilds:j});a.after(f);if(a[0].form)b(a[0].form).on("reset",function(b){b.originalEvent&&!b.isDefaultPrevented()&&setTimeout(function(){a.prop("value",a.prop("value"))},0)});g[0]&&(f.getShadowFocusElement().attr("aria-labelledby",c.getID(g)),g.on("click",function(){a.getShadowFocusElement().focus();return!1}))};Modernizr.formvalidation&&["input",
"form"].forEach(function(a){var b=c.defineNodeNameProperty(a,"checkValidity",{prop:{value:function(){r=!0;var a=b.prop._supvalue.apply(this,arguments);r=!1;return a}}})});if(!l.date||i.replaceUI){var g=function(a,f,e,d){var g,h,j=function(){k.dpDiv.unbind("mousedown.webshimsmousedownhandler");h=g=!1},k=f.on({focusin:function(){j();k.dpDiv.unbind("mousedown.webshimsmousedownhandler").bind("mousedown.webshimsmousedownhandler",function(){g=!0})},"focusout blur":function(a){g&&(h=!0,a.stopImmediatePropagation())}}).datepicker(b.extend({onClose:function(){h&&
f.not(":focus")?(j(),f.trigger("focusout"),f.triggerHandler("blur")):j()}},p,i.datepicker,a.data("datepicker"))).on("change",e).data("datepicker");k.dpDiv.addClass("input-date-datepicker-control");d&&c.triggerDomUpdate(d[0]);"disabled,min,max,value,step,data-placeholder".split(",").forEach(function(b){var c=a.attr(b);c&&a.attr(b,c)});return k};k.date=function(a){if(b.fn.datepicker){var f=b('<input class="input-date" type="text" />'),e;this.common(a,f,k.date.attrs);e=g(a,f,function(c){k.date.blockAttr=
!0;var e;if(i.lazyDate){var d=b.data(f[0],"setDateLazyTimer");d&&(clearTimeout(d),b.removeData(f[0],"setDateLazyTimer"))}try{e=(e=b.datepicker.parseDate(f.datepicker("option","dateFormat"),f.prop("value")))?b.datepicker.formatDate("yy-mm-dd",e):f.prop("value")}catch(g){e=f.prop("value")}a.prop("value",e);k.date.blockAttr=!1;c.stopImmediatePropagation();n(a[0],"input");n(a[0],"change")});b(a).on("updateshadowdom",function(){if(e.trigger[0]&&(a.css({display:""}),a[0].offsetWidth||a[0].offsetHeight)){var b=
h(a);b.css&&(f.css(b.css),b.outerWidth&&f.outerWidth(b.outerWidth),j(f,e.trigger))}a.css({display:"none"})}).triggerHandler("updateshadowdom");e.trigger[0]&&setTimeout(function(){c.ready("WINDOWLOAD",function(){b(a).triggerHandler("updateshadowdom")})},9)}};k.date.attrs={disabled:function(a,c,e){b.prop(c,"disabled",!!e)},min:function(a,c,e){try{e=b.datepicker.parseDate("yy-mm-dd",e)}catch(d){e=!1}e&&b(c).datepicker("option","minDate",e)},max:function(a,c,e){try{e=b.datepicker.parseDate("yy-mm-dd",
e)}catch(d){e=!1}e&&b(c).datepicker("option","maxDate",e)},"data-placeholder":function(a,c,e){a=(e||"").split("-");3==a.length&&(e=b(c).datepicker("option","dateFormat").replace("yy",a[0]).replace("mm",a[1]).replace("dd",a[2]));b.prop(c,"placeholder",e)},value:function(a,c,e){if(!k.date.blockAttr){try{var d=b.datepicker.parseDate("yy-mm-dd",e)}catch(g){d=!1}d?q(b(c),d):b.prop(c,"value",e)}}}}if(!l.range||i.replaceUI)k.range=function(a){if(b.fn.slider){var c=b('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>');
this.common(a,c,k.range.attrs);a.on("updateshadowdom",function(){a.css({display:""});if(a[0].offsetWidth||a[0].offsetHeight){var b=h(a);b.css&&(c.css(b.css),b.outerWidth&&c.outerWidth(b.outerWidth))}a.css({display:"none"})}).triggerHandler("updateshadowdom");c.slider(b.extend(!0,{},i.slider,a.data("slider"))).on({slide:function(b,c){if(b.originalEvent)k.range.blockAttr=!0,a.prop("value",c.value),k.range.blockAttr=!1,n(a[0],"input")},slidechange:function(b){b.originalEvent&&n(a[0],"change")}});["disabled",
"min","max","step","value"].forEach(function(c){var f=a.prop(c),d;"value"==c&&!f&&(d=a.getShadowElement())&&(f=(b(d).slider("option","max")-b(d).slider("option","min"))/2);null!=f&&a.prop(c,f)})}},k.range.attrs={disabled:function(a,c,e){e=!!e;b(c).slider("option","disabled",e);b("span",c).attr({"aria-disabled":e+"",tabindex:e?"-1":"0"})},min:function(a,c,e){e=e?1*e||0:0;b(c).slider("option","min",e);b("span",c).attr({"aria-valuemin":e})},max:function(a,c,e){e=e||0===e?1*e||100:100;b(c).slider("option",
"max",e);b("span",c).attr({"aria-valuemax":e})},value:function(a,c,e){e=b(a).prop("valueAsNumber");isNaN(e)||(k.range.blockAttr||b(c).slider("option","value",e),b("span",c).attr({"aria-valuenow":e,"aria-valuetext":e}))},step:function(a,c,e){e=e&&b.trim(e)?1*e||1:1;b(c).slider("option","step",e)}};if(i.replaceUI||!Modernizr.inputtypes.date||!Modernizr.inputtypes.range)l=function(){c.data(this,"hasShadow")&&b.prop(this,"value",b.prop(this,"value"))},c.onNodeNamesPropertyModify("input","valueAsNumber",
l),c.onNodeNamesPropertyModify("input","valueAsDate",l);b.each("disabled,min,max,value,step,data-placeholder".split(","),function(a,b){c.onNodeNamesPropertyModify("input",b,function(a){var d=c.data(this,"shadowData");if(d&&d.data&&d.data[b]&&d.nativeElement===this)d.data[b](this,d.shadowElement,a)})});if(!i.availabeLangs)i.availabeLangs="af ar ar-DZ az bg bs ca cs da de el en-AU en-GB en-NZ eo es et eu fa fi fo fr fr-CH gl he hr hu hy id is it ja ko kz lt lv ml ms nl no pl pt-BR rm ro ru sk sl sq sr sr-SR sv ta th tr uk vi zh-CN zh-HK zh-TW".split(" ");
l=function(){b.datepicker&&(c.activeLang({langObj:b.datepicker.regional,module:"form-number-date-ui",callback:function(a){a=b.extend({},p,a,i.datepicker);a.dateFormat&&i.datepicker.dateFormat!=a.dateFormat&&b("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option","dateFormat",a.dateFormat).getNativeElement().filter("[data-placeholder]").attr("data-placeholder",function(a,b){return b});b.datepicker.setDefaults(a)}}),b(m).unbind("jquery-uiReady.langchange input-widgetsReady.langchange"))};
b(m).on("jquery-uiReady.langchange input-widgetsReady.langchange",l);l();(function(){var a=function(){var a={};return function(c){return c in a?a[c]:a[c]=b('<input type="'+c+'" />')[0].type===c}}();if(!a("number")||!a("time")){var f=c.cfg["forms-ext"],e=c.inputTypes,d={number:"0123456789.",time:"0123456789:."},g=function(a,f,d){d=d||{};if(!("type"in d))d.type=b.prop(a,"type");if(!("step"in d))d.step=c.getStep(a,d.type);if(!("valueAsNumber"in d))d.valueAsNumber=e[d.type].asNumber(b.prop(a,"value"));
var g="any"==d.step?e[d.type].step*e[d.type].stepScaleFactor:d.step;c.addMinMaxNumberToCache("min",b(a),d);c.addMinMaxNumberToCache("max",b(a),d);if(isNaN(d.valueAsNumber))d.valueAsNumber=e[d.type].stepBase||0;if("any"!==d.step&&(a=Math.round(1E7*((d.valueAsNumber-(d.minAsnumber||0))%d.step))/1E7)&&Math.abs(a)!=d.step)d.valueAsNumber-=a;a=d.valueAsNumber+g*f;return a=!isNaN(d.minAsNumber)&&a<d.minAsNumber?d.valueAsNumber*f<d.minAsNumber?d.minAsNumber:isNaN(d.maxAsNumber)?d.valueAsNumber:d.maxAsNumber:
!isNaN(d.maxAsNumber)&&a>d.maxAsNumber?d.valueAsNumber*f>d.maxAsNumber?d.maxAsNumber:isNaN(d.minAsNumber)?d.valueAsNumber:d.minAsNumber:Math.round(1E7*a)/1E7};c.modules["form-number-date-ui"].getNextStep=g;if(f.stepArrows){var h={set:function(){var a=c.data(this,"step-controls");if(a)a[this.disabled||this.readonly?"addClass":"removeClass"]("disabled-step-control")}};c.onNodeNamesPropertyModify("input","disabled",h);c.onNodeNamesPropertyModify("input","readonly",b.extend({},h))}var i={38:1,40:-1},
k=function(a,c){function d(){var c=b.prop(a,"value");c==h&&c!=i&&"string"==typeof c&&n(a,"change");i=c}var f=!1,h,i;(function(){i=b(a).on({"change.stepcontrol focus.stepcontrol":function(c){if(!f||"focus"!=c.type)i=b.prop(a,"value")},"blur.stepcontrol":function(){f||setTimeout(function(){!f&&!b(a).is(":focus")&&d();h=!1},9)}}).prop("value")})();return{triggerChange:d,step:function(d){!b.prop(a,"disabled")&&!a.readOnly&&d&&(h=e[c].numberToString(g(a,d,{type:c})),b.prop(a,"value",h),n(a,"input"))},
setFocus:function(){f=!0;setTimeout(function(){f=!1},18);setTimeout(function(){if(!b(a).is(":focus"))try{a.focus()}catch(c){}},1)}}};c.addReady(function(g,h){f.stepArrows&&b("input",g).add(h.filter("input")).each(function(){var g=b.prop(this,"type");if(e[g]&&e[g].asNumber&&f.stepArrows&&!(!0!==f.stepArrows&&!f.stepArrows[g]||a(g)||b(h).hasClass("has-step-controls"))){var h=this,l=k(h,g),m=b('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(h).on({"selectstart dragstart":function(){return!1},
"mousedown mousepress":function(a){b(a.target).hasClass("step-controls")||l.step(b(a.target).hasClass("step-up")?1:-1);l.setFocus();return!1},"mousepressstart mousepressend":function(a){"mousepressend"==a.type&&l.triggerChange();b(a.target)["mousepressstart"==a.type?"addClass":"removeClass"]("mousepress-ui")}}),p=function(a,b){if(b)return l.step(b),!1},n=b(h).addClass("has-step-controls").attr({readonly:h.readOnly,disabled:h.disabled,autocomplete:"off",role:"spinbutton"}).on("keyup",function(a){(a=
i[a.keyCode])&&l.triggerChange(a)}).on(b.browser.msie?"keydown":"keypress",function(a){if(a=i[a.keyCode])return l.step(a),!1});if(d[g])n.on("keypress",function(){var a=d[g];return function(b){var c=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode);return b.ctrlKey||b.metaKey||" ">c||-1<a.indexOf(c)}}());n.on({focus:function(){n.add(m).off(".mwhellwebshims").on("mousewheel.mwhellwebshims",p)},blur:function(){b(h).add(m).off(".mwhellwebshims")}});c.data(h,"step-controls",m);if(f.calculateWidth){var q;
n.on("updateshadowdom",function(){if(!q&&(h.offsetWidth||h.offsetHeight))q=!0,j(n,m),m.css("marginTop",(n.outerHeight()-m.outerHeight())/2)}).triggerHandler("updateshadowdom")}}})})}})();c.addReady(function(a,d){b(m).on("jquery-uiReady.initinputui input-widgetsReady.initinputui",function(){if(b.datepicker||b.fn.slider){if(b.datepicker&&!p.dateFormat)p.dateFormat=b.datepicker._defaults.dateFormat;k(a,d)}b.datepicker&&b.fn.slider?b(m).unbind(".initinputui"):c.modules["input-widgets"].src||c.warn('jQuery UI Widget factory is already included, but not datepicker or slider. configure src of $.webshims.modules["input-widgets"].src')})})});
