jQuery.webshims.register("form-datalist",function(a,b,n,j,s){b.propTypes.element=function(i){b.createPropDefault(i,"attr");if(!i.prop)i.prop={get:function(){var b=i.attr.get.call(this);b&&(b=j.getElementById(b))&&i.propNodeName&&!a.nodeName(b,i.propNodeName)&&(b=null);return b||null},writeable:!1}};(function(){var i=a.webshims.cfg.forms,h=Modernizr.input.list;if(!h||i.customDatalist){var t=0,p={submit:1,button:1,reset:1,hidden:1,range:1,date:1},o=a.browser.msie&&7>parseInt(a.browser.version,10),v=
{},q=function(a){if(!a)return[];if(v[a])return v[a];var b;try{b=JSON.parse(localStorage.getItem("storedDatalistOptions"+a))}catch(f){}v[a]=b||[];return b||[]},k={_create:function(e){if(!p[a.prop(e.input,"type")]){var b=e.datalist,f=a.data(e.input,"datalistWidget");if(b&&f&&f.datalist!==b)f.datalist=b,f.id=e.id,f.shadowList.prop("className","datalist-polyfill "+(f.datalist.className||"")+" "+f.datalist.id+"-shadowdom"),i.positionDatalist?f.shadowList.insertAfter(e.input):f.shadowList.appendTo("body"),
a(f.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",a.proxy(f,"_resetListCached")),f._resetListCached();else if(b){if(!(f&&f.datalist===b)){t++;var c=this;this.hideList=a.proxy(c,"hideList");this.timedHide=function(){clearTimeout(c.hideTimer);c.hideTimer=setTimeout(c.hideList,9)};this.datalist=b;this.id=e.id;this.hasViewableData=!0;this._autocomplete=a.attr(e.input,"autocomplete");a.data(e.input,"datalistWidget",this);this.shadowList=a('<div class="datalist-polyfill '+
(this.datalist.className||"")+" "+this.datalist.id+'-shadowdom" />');i.positionDatalist||a(e.input).hasClass("position-datalist")?this.shadowList.insertAfter(e.input):this.shadowList.appendTo("body");this.index=-1;this.input=e.input;this.arrayOptions=[];this.shadowList.delegate("li","mouseenter.datalistWidget mousedown.datalistWidget click.datalistWidget",function(d){var g=a("li:not(.hidden-item)",c.shadowList),f="mousedown"==d.type||"click"==d.type;c.markItem(g.index(d.currentTarget),f,g);"click"==
d.type&&(c.hideList(),i.customDatalist&&a(e.input).trigger("datalistselect"));return"mousedown"!=d.type}).bind("focusout",this.timedHide);e.input.setAttribute("autocomplete","off");a(e.input).attr({"aria-haspopup":"true"}).bind("input.datalistWidget",function(){if(!c.triggeredByDatalist)c.changedValue=!1,c.showHideOptions()}).bind("keydown.datalistWidget",function(d){var g=d.keyCode,f;if(40==g&&!c.showList())return c.markItem(c.index+1,!0),!1;if(c.isListVisible){if(38==g)return c.markItem(c.index-
1,!0),!1;if(!d.shiftKey&&(33==g||36==g))return c.markItem(0,!0),!1;if(!d.shiftKey&&(34==g||35==g))return d=a("li:not(.hidden-item)",c.shadowList),c.markItem(d.length-1,!0,d),!1;if(13==g||27==g)return 13==g&&(f=a("li.active-item:not(.hidden-item)",c.shadowList),c.changeValue(a("li.active-item:not(.hidden-item)",c.shadowList))),c.hideList(),i.customDatalist&&f&&f[0]&&a(e.input).trigger("datalistselect"),!1}}).bind("focus.datalistWidget",function(){a(this).hasClass("list-focus")&&c.showList()}).bind("mousedown.datalistWidget",
function(){a(this).is(":focus")&&c.showList()}).bind("blur.datalistWidget",this.timedHide);a(this.datalist).unbind("updateDatalist.datalistWidget").bind("updateDatalist.datalistWidget",a.proxy(this,"_resetListCached"));this._resetListCached();e.input.form&&(e.input.name||e.input.id)&&a(e.input.form).bind("submit.datalistWidget"+e.input.id,function(){if(!a(e.input).hasClass("no-datalist-cache")&&"off"!=c._autocomplete){var d=a.prop(e.input,"value"),g=(e.input.name||e.input.id)+a.prop(e.input,"type");
if(!c.storedOptions)c.storedOptions=q(g);if(d&&-1==c.storedOptions.indexOf(d)&&(c.storedOptions.push(d),d=c.storedOptions,g)){d=d||[];try{localStorage.setItem("storedDatalistOptions"+g,JSON.stringify(d))}catch(f){}}}});a(n).bind("unload.datalist"+this.id+" beforeunload.datalist"+this.id,function(){c.destroy()})}}else f&&f.destroy()}},destroy:function(){var e=a.attr(this.input,"autocomplete");a(this.input).unbind(".datalistWidget").removeData("datalistWidget");this.shadowList.remove();a(j).unbind(".datalist"+
this.id);a(n).unbind(".datalist"+this.id);this.input.form&&this.input.id&&a(this.input.form).unbind("submit.datalistWidget"+this.input.id);this.input.removeAttribute("aria-haspopup");e===s?this.input.removeAttribute("autocomplete"):a(this.input).attr("autocomplete",e)},_resetListCached:function(a){var l=this,f;this.needsUpdate=!0;this.lastUpdatedValue=!1;this.lastUnfoundValue="";this.updateTimer||(n.QUnit||(f=a&&j.activeElement==l.input)?l.updateListOptions(f):b.ready("WINDOWLOAD",function(){l.updateTimer=
setTimeout(function(){l.updateListOptions();l=null;t=1},200+100*t)}))},updateListOptions:function(e){this.needsUpdate=!1;clearTimeout(this.updateTimer);this.updateTimer=!1;this.shadowList.css({fontSize:a.css(this.input,"fontSize"),fontFamily:a.css(this.input,"fontFamily")});this.searchStart=i.customDatalist&&a(this.input).hasClass("search-start");var b=[],f=[],c=[],d,g,m,w;for(g=a.prop(this.datalist,"options"),m=0,w=g.length;m<w;m++){d=g[m];if(d.disabled)return;d={value:a(d).val()||"",text:a.trim(a.attr(d,
"label")||d.textContent||d.innerText||a.text([d])||""),className:d.className||"",style:a.attr(d,"style")||""};d.text?d.text!=d.value&&(d.className+=" different-label-value"):d.text=d.value;f[m]=d.value;c[m]=d}if(!this.storedOptions)this.storedOptions=a(this.input).hasClass("no-datalist-cache")||"off"==this._autocomplete?[]:q((this.input.name||this.input.id)+a.prop(this.input,"type"));this.storedOptions.forEach(function(a){-1==f.indexOf(a)&&c.push({value:a,text:a,className:"stored-suggest",style:""})});
for(m=0,w=c.length;m<w;m++)g=c[m],b[m]='<li class="'+g.className+'" style="'+g.style+'" tabindex="-1" role="listitem"><span class="option-label">'+g.text+'</span> <span class="option-value">'+g.value+"</span></li>";this.arrayOptions=c;this.shadowList.html('<div class="datalist-outer-box"><div class="datalist-box"><ul role="list">'+b.join("\n")+"</ul></div></div>");a.fn.bgIframe&&o&&this.shadowList.bgIframe();(e||this.isListVisible)&&this.showHideOptions()},showHideOptions:function(b){var l=a.prop(this.input,
"value").toLowerCase();if(!(l===this.lastUpdatedValue||this.lastUnfoundValue&&0===l.indexOf(this.lastUnfoundValue))){this.lastUpdatedValue=l;var f=!1,c=this.searchStart,d=a("li",this.shadowList);l?this.arrayOptions.forEach(function(g,m){var b;if(!("lowerText"in g))g.lowerText=g.text!=g.value?g.value.toLowerCase()+g.text.toLowerCase():g.text.toLowerCase();b=g.lowerText.indexOf(l);(b=c?!b:-1!==b)?(a(d[m]).removeClass("hidden-item"),f=!0):a(d[m]).addClass("hidden-item")}):d.length&&(d.removeClass("hidden-item"),
f=!0);this.hasViewableData=f;!b&&f&&this.showList();if(!f)this.lastUnfoundValue=l,this.hideList()}},setPos:function(){this.shadowList.css({marginTop:0,marginLeft:0,marginRight:0,marginBottom:0});var e=i.positionDatalist?a(this.input).position():b.getRelOffset(this.shadowList,this.input);e.top+=a(this.input).outerHeight();e.width=a(this.input).outerWidth()-(parseInt(this.shadowList.css("borderLeftWidth"),10)||0)-(parseInt(this.shadowList.css("borderRightWidth"),10)||0);this.shadowList.css({marginTop:"",
marginLeft:"",marginRight:"",marginBottom:""}).css(e);return e},showList:function(){if(this.isListVisible)return!1;this.needsUpdate&&this.updateListOptions();this.showHideOptions(!0);if(!this.hasViewableData)return!1;this.isListVisible=!0;var b=this,l;b.setPos();b.shadowList.addClass("datalist-visible").find("li.active-item").removeClass("active-item");a(j).unbind(".datalist"+b.id).bind("mousedown.datalist"+b.id+" focusin.datalist"+b.id,function(f){f.target===b.input||b.shadowList[0]===f.target||
a.contains(b.shadowList[0],f.target)?(clearTimeout(b.hideTimer),setTimeout(function(){clearTimeout(b.hideTimer)},9)):b.timedHide()});a(n).unbind(".datalist"+b.id).bind("resize.datalist"+b.id+" orientationchange.datalist "+b.id+" emchange.datalist"+b.id,function(){clearTimeout(l);l=setTimeout(function(){b.setPos()},9)});clearTimeout(l);return!0},hideList:function(){if(!this.isListVisible)return!1;var e=this,l=function(){e.changedValue&&a(e.input).trigger("change");e.changedValue=!1};e.shadowList.removeClass("datalist-visible list-item-active");
e.index=-1;e.isListVisible=!1;if(e.changedValue){e.triggeredByDatalist=!0;b.triggerInlineForm&&b.triggerInlineForm(e.input,"input");if(a(e.input).is(":focus"))a(e.input).one("blur",l);else l();e.triggeredByDatalist=!1}a(j).unbind(".datalist"+e.id);a(n).unbind(".datalist"+e.id).bind("resize.datalist"+e.id+" orientationchange.datalist "+e.id+" emchange.datalist"+e.id,function(){e.shadowList.css({top:0,left:0});a(n).unbind(".datalist"+e.id)});return!0},scrollIntoView:function(b){var l=a("ul",this.shadowList),
f=a("div.datalist-box",this.shadowList),c=b.position();c.top-=(parseInt(l.css("paddingTop"),10)||0)+(parseInt(l.css("marginTop"),10)||0)+(parseInt(l.css("borderTopWidth"),10)||0);0>c.top?f.scrollTop(f.scrollTop()+c.top-2):(c.top+=b.outerHeight(),b=f.height(),c.top>b&&f.scrollTop(f.scrollTop()+(c.top-b)+2))},changeValue:function(b){if(b[0]){var b=a("span.option-value",b).text(),l=a.prop(this.input,"value");if(b!=l)a(this.input).prop("value",b).triggerHandler("updateInput"),this.changedValue=!0}},markItem:function(b,
l,f){f=f||a("li:not(.hidden-item)",this.shadowList);if(f.length)0>b?b=f.length-1:b>=f.length&&(b=0),f.removeClass("active-item"),this.shadowList.addClass("list-item-active"),f=f.filter(":eq("+b+")").addClass("active-item"),l&&(this.changeValue(f),this.scrollIntoView(f)),this.index=b}};(function(){h||b.defineNodeNameProperty("datalist","options",{prop:{writeable:!1,get:function(){var e=a("select",this);e[0]?e=e[0].options:(e=a("option",this).get(),e.length&&b.warn("you should wrap your option-elements for a datalist in a select element to support IE and other old browsers."));
return e}}});var e={autocomplete:{attr:{get:function(){var b=a.data(this,"datalistWidget");return b?b._autocomplete:"autocomplete"in this?this.autocomplete:this.getAttribute("autocomplete")},set:function(b){var f=a.data(this,"datalistWidget");f?(f._autocomplete=b,"off"==b&&f.hideList()):"autocomplete"in this?this.autocomplete=b:this.setAttribute("autocomplete",b)}}}};h?((a("<datalist><select><option></option></select></datalist>").prop("options")||[]).length||b.defineNodeNameProperty("datalist","options",
{prop:{writeable:!1,get:function(){var b=this.options||[];if(!b.length){var f=a("select",this);if(f[0]&&f[0].options&&f[0].options.length)b=f[0].options}return b}}}),e.list={attr:{get:function(){var e=b.contentAttr(this,"list");null!=e?this.removeAttribute("list"):e=a.data(this,"datalistListAttr");return null==e?s:e},set:function(e){a.data(this,"datalistListAttr",e);b.objectCreate(k,s,{input:this,id:e,datalist:a.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"}):
e.list={attr:{get:function(){var a=b.contentAttr(this,"list");return null==a?s:a},set:function(e){b.contentAttr(this,"list",e);b.objectCreate(k,s,{input:this,id:e,datalist:a.prop(this,"list")})}},initAttr:!0,reflect:!0,propType:"element",propNodeName:"datalist"};b.defineNodeNameProperties("input",e);if(a.event.customEvent)a.event.customEvent.updateDatalist=!0,a.event.customEvent.updateInput=!0,a.event.customEvent.datalistselect=!0;b.addReady(function(a,f){f.filter("datalist > select, datalist, datalist > option, datalist > select > option").closest("datalist").triggerHandler("updateDatalist")})})()}})()});
jQuery.webshims.register("form-extend",function(a,b,n,j,s,i){n=n.Modernizr;s=n.inputtypes;if(n.formvalidation&&!b.bugs.bustedValidity){var h=b.inputTypes,t={};b.addInputType=function(a,d){h[a]=d};b.addValidityRule=function(a,d){t[a]=d};b.addValidityRule("typeMismatch",function(a,d,f,b){if(""===d)return!1;b=b.typeMismatch;if(!("type"in f))f.type=(a[0].getAttribute("type")||"").toLowerCase();h[f.type]&&h[f.type].mismatch&&(b=h[f.type].mismatch(d,a));return b});var p=i.overrideMessages,o=!s.number||
!s.time||!s.range||p,v="customError,typeMismatch,rangeUnderflow,rangeOverflow,stepMismatch,tooLong,patternMismatch,valueMissing,valid".split(","),i=p?["value","checked"]:["value"],q=[],k=function(d,f){if(d){var b=(d.getAttribute&&d.getAttribute("type")||d.type||"").toLowerCase();if(p||h[b])p&&!f&&"radio"==b&&d.name?a(j.getElementsByName(d.name)).each(function(){a.prop(this,"validity")}):a.prop(d,"validity")}},e={};["input","textarea","select"].forEach(function(d){var f=b.defineNodeNameProperty(d,
"setCustomValidity",{prop:{value:function(c){var c=c+"",e="input"==d?a(this).getNativeElement()[0]:this;f.prop._supvalue.call(e,c);b.bugs.validationMessage&&b.data(e,"customvalidationMessage",c);o&&(b.data(e,"hasCustomError",!!c),k(e))}}});e[d]=f.prop._supvalue});if(o||p)i.push("min"),i.push("max"),i.push("step"),q.push("input");p&&(i.push("required"),i.push("pattern"),q.push("select"),q.push("textarea"));if(o){var l;q.forEach(function(d){var f=b.defineNodeNameProperty(d,"validity",{prop:{get:function(){if(!l){var c=
"input"==d?a(this).getNativeElement()[0]:this,i=f.prop._supget.call(c);if(!i)return i;var r={};v.forEach(function(a){r[a]=i[a]});if(!a.prop(c,"willValidate"))return r;l=!0;var k=a(c),u={type:(c.getAttribute&&c.getAttribute("type")||"").toLowerCase(),nodeName:(c.nodeName||"").toLowerCase()},y=k.val(),x=!!b.data(c,"hasCustomError"),n;l=!1;r.customError=x;if(r.valid&&r.customError)r.valid=!1;else if(!r.valid){var j=!0;a.each(r,function(a,d){if(d)return j=!1});if(j)r.valid=!0}a.each(t,function(a,f){r[a]=
f(k,y,u,r);if(r[a]&&(r.valid||!n)&&(p||h[u.type]&&h[u.type].mismatch))e[d].call(c,b.createValidationMessage(c,a)),r.valid=!1,n=!0});r.valid?(e[d].call(c,""),b.data(c,"hasCustomError",!1)):p&&!n&&!x&&a.each(r,function(a,f){if("valid"!==a&&f)return e[d].call(c,b.createValidationMessage(c,a)),!1});return r}},writeable:!1}})});i.forEach(function(a){b.onNodeNamesPropertyModify(q,a,function(){k(this)})});if(j.addEventListener){var f,c=function(d){if("form"in d.target){var b=d.target.form;clearTimeout(f);
k(d.target);b&&p&&a("input",b).each(function(){"password"==this.type&&k(this)})}};j.addEventListener("change",c,!0);p&&(j.addEventListener("blur",c,!0),j.addEventListener("keydown",function(a){13==a.keyCode&&c(a)},!0));j.addEventListener("input",function(a){clearTimeout(f);f=setTimeout(function(){k(a.target)},290)},!0)}var d=q.join(",");b.addReady(function(f,b){a(d,f).add(b.filter(d)).each(function(){a.prop(this,"validity")})});p&&b.ready("DOM form-message",function(){b.activeLang({register:"form-core",
callback:function(){a("input, select, textarea").getNativeElement().each(function(){if(!b.data(this,"hasCustomError")){var d=this,f=a.prop(d,"validity")||{valid:!0},c;f.valid||(c=(d.nodeName||"").toLowerCase(),a.each(f,function(a,f){if("valid"!==a&&f)return e[c].call(d,b.createValidationMessage(d,a)),!1}))}})}})})}b.defineNodeNameProperty("input","type",{prop:{get:function(){var a=(this.getAttribute("type")||"").toLowerCase();return b.inputTypes[a]?a:this.type}}})}});
jQuery.webshims.register("form-number-date-api",function(a,b){var n,j,s;if(!b.getStep)b.getStep=function(f,b){var d=a.attr(f,"step");if("any"===d)return d;b=b||o(f);if(!h[b]||!h[b].step)return d;d=n.asNumber(d);return(!isNaN(d)&&0<d?d:h[b].step)*h[b].stepScaleFactor};if(!b.addMinMaxNumberToCache)b.addMinMaxNumberToCache=function(a,b,d){a+"AsNumber"in d||(d[a+"AsNumber"]=h[d.type].asNumber(b.attr(a)),isNaN(d[a+"AsNumber"])&&a+"Default"in h[d.type]&&(d[a+"AsNumber"]=h[d.type][a+"Default"]))};var i=
parseInt("NaN",10),h=b.inputTypes,t=function(a){return"number"==typeof a||a&&a==1*a},p=function(b){return a('<input type="'+b+'" />').prop("type")===b},o=function(a){return(a.getAttribute("type")||"").toLowerCase()},v=b.addMinMaxNumberToCache,q=function(a,b){for(var a=""+a,b=b-a.length,d=0;d<b;d++)a="0"+a;return a},k=b.bugs.valueAsNumberSet||b.bugs.bustedValidity;b.addValidityRule("stepMismatch",function(a,c,d,g){if(""===c)return!1;if(!("type"in d))d.type=o(a[0]);if("date"==d.type)return!1;g=(g||
{}).stepMismatch;if(h[d.type]&&h[d.type].step){if(!("step"in d))d.step=b.getStep(a[0],d.type);if("any"==d.step)return!1;if(!("valueAsNumber"in d))d.valueAsNumber=h[d.type].asNumber(c);if(isNaN(d.valueAsNumber))return!1;v("min",a,d);a=d.minAsNumber;isNaN(a)&&(a=h[d.type].stepBase||0);g=Math.abs((d.valueAsNumber-a)%d.step);g=!(1.0E-7>=g||1.0E-7>=Math.abs(g-d.step))}return g});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){b.addValidityRule(a.name,
function(b,d,g,m){m=(m||{})[a.name]||!1;if(""===d)return m;if(!("type"in g))g.type=o(b[0]);if(h[g.type]&&h[g.type].asNumber){if(!("valueAsNumber"in g))g.valueAsNumber=h[g.type].asNumber(d);if(isNaN(g.valueAsNumber))return!1;v(a.attr,b,g);if(isNaN(g[a.attr+"AsNumber"]))return m;m=g[a.attr+"AsNumber"]*a.factor<g.valueAsNumber*a.factor-1.0E-7}return m})});b.reflectProperties(["input"],["max","min","step"]);var e=b.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var b=o(this),b=h[b]&&
h[b].asNumber?h[b].asNumber(a.prop(this,"value")):e.prop._supget&&e.prop._supget.apply(this,arguments);null==b&&(b=i);return b},set:function(f){var c=o(this);h[c]&&h[c].numberToString?isNaN(f)?a.prop(this,"value",""):(c=h[c].numberToString(f),!1!==c?a.prop(this,"value",c):b.warn("INVALID_STATE_ERR: DOM Exception 11")):e.prop._supset&&e.prop._supset.apply(this,arguments)}}}),l=b.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var b=o(this);return h[b]&&h[b].asDate&&!h[b].noAsDate?
h[b].asDate(a.prop(this,"value")):l.prop._supget&&l.prop._supget.call(this)||null},set:function(f){var c=o(this);if(h[c]&&h[c].dateToString&&!h[c].noAsDate){if(null===f)return a.prop(this,"value",""),"";c=h[c].dateToString(f);if(!1!==c)return a.prop(this,"value",c),c;b.warn("INVALID_STATE_ERR: DOM Exception 11")}else return l.prop._supset&&l.prop._supset.apply(this,arguments)||null}}});n={mismatch:function(a){return!t(a)},step:1,stepScaleFactor:1,asNumber:function(a){return t(a)?1*a:i},numberToString:function(a){return t(a)?
a:!1}};j={minDefault:0,maxDefault:100};s={mismatch:function(b){if(!b||!b.split||!/\d$/.test(b))return!0;var c=b.split(/\u002D/);if(3!==c.length)return!0;var d=!1;a.each(c,function(a,b){if(!(t(b)||b&&b=="0"+1*b))return d=!0,!1});if(d)return d;if(4!==c[0].length||2!=c[1].length||12<c[1]||2!=c[2].length||33<c[2])d=!0;return b!==this.dateToString(this.asDate(b,!0))},step:1,stepScaleFactor:864E5,asDate:function(a,b){return!b&&this.mismatch(a)?null:new Date(this.asNumber(a,!0))},asNumber:function(a,b){var d=
i;if(b||!this.mismatch(a))a=a.split(/\u002D/),d=Date.UTC(a[0],a[1]-1,a[2]);return d},numberToString:function(a){return t(a)?this.dateToString(new Date(1*a)):!1},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+q(a.getUTCMonth()+1,2)+"-"+q(a.getUTCDate(),2):!1}};if(k||!p("range")||!p("time"))j=a.extend({},n,j);(k||!p("number"))&&b.addInputType("number",n);(k||!p("range"))&&b.addInputType("range",j);(k||!p("date"))&&b.addInputType("date",s)});
jQuery.webshims.register("form-number-date-ui",function(a,b,n,j,s,i){var h=b.triggerInlineForm,t=Modernizr.inputtypes,p=function(){var a={"padding-box":"innerWidth","border-box":"outerWidth","content-box":"width"},b=Modernizr.prefixed&&Modernizr.prefixed("boxSizing");return function(m,f){var c,e,i;e="width";b&&(e=a[m.css(b)]||e);c=m[e]();e="width"==e;if(c){var u=parseInt(f.css("marginLeft"),10)||0,h=f.outerWidth();(i=parseInt(m.css("marginRight"),10)||0)&&m.css("marginRight",0);u<=-1*h?(f.css("marginRight",
Math.floor(Math.abs(h+u)+i)),m.css("paddingRight",(parseInt(m.css("paddingRight"),10)||0)+Math.abs(u)),e&&m.css("width",Math.floor(c+u))):(f.css("marginRight",i),m.css("width",Math.floor(c-u-h)))}}}(),o={},v=a([]),q,k=function(d,g){a("input",d).add(g.filter("input")).each(function(){var d=a.prop(this,"type");if(k[d]&&!b.data(this,"shadowData"))k[d](a(this))})},e=function(b,g){if(i.lazyDate){var m=a.data(b[0],"setDateLazyTimer");m&&clearTimeout(m);a.data(b[0],"setDateLazyTimer",setTimeout(function(){b.datepicker("setDate",
g);a.removeData(b[0],"setDateLazyTimer");b=null},0))}else b.datepicker("setDate",g)};if(i.lazyDate===s)try{i.lazyDate=a.browser.msie&&9>b.browserVersion||500>a(n).width()&&500>a(n).height()}catch(l){}var f={tabindex:1,tabIndex:1,title:1,"aria-required":1,"aria-invalid":1};if(!i.copyAttrs)i.copyAttrs={};b.extendUNDEFProp(i.copyAttrs,f);k.common=function(d,g,m){Modernizr.formvalidation&&d.bind("firstinvalid",function(a){(b.fromSubmit||!q)&&d.unbind("invalid.replacedwidgetbubble").bind("invalid.replacedwidgetbubble",
function(g){!a.isInvalidUIPrevented()&&!g.isDefaultPrevented()&&(b.validityAlert.showFor(a.target),a.preventDefault(),g.preventDefault());d.unbind("invalid.replacedwidgetbubble")})});var c,e,h=a("input, span.ui-slider-handle",g),l=d[0].attributes;for(c in i.copyAttrs)if((e=l[c])&&e.specified)f[c]&&h[0]?h.attr(c,e.nodeValue):g[0].setAttribute(c,e.nodeValue);e=d.attr("id");c=i.calculateWidth?{css:{marginRight:d.css("marginRight"),marginLeft:d.css("marginLeft")},outerWidth:d.outerWidth()}:{};c.label=
e?a('label[for="'+e+'"]',d[0].form):v;e=b.getID(c.label);g.addClass(d[0].className);b.addShadowDom(d,g,{data:m||{},shadowFocusElement:a("input.input-datetime-local-date, span.ui-slider-handle",g)[0],shadowChilds:h});d.after(g).hide();d[0].form&&a(d[0].form).bind("reset",function(a){a.originalEvent&&!a.isDefaultPrevented()&&setTimeout(function(){d.prop("value",d.prop("value"))},0)});1==g.length&&!a("*",g)[0]&&(g.attr("aria-labelledby",e),c.label.bind("click",function(){g.focus();return!1}));return c};
Modernizr.formvalidation&&["input","form"].forEach(function(a){var g=b.defineNodeNameProperty(a,"checkValidity",{prop:{value:function(){q=!0;var a=g.prop._supvalue.apply(this,arguments);q=!1;return a}}})});if(!t.date||i.replaceUI){var c=function(d,g,c,e){var f,h,l=function(){u.dpDiv.unbind("mousedown.webshimsmousedownhandler");h=f=!1},u=g.bind("focusin",function(){l();u.dpDiv.unbind("mousedown.webshimsmousedownhandler").bind("mousedown.webshimsmousedownhandler",function(){f=!0})}).bind("focusout blur",
function(a){f&&(h=!0,a.stopImmediatePropagation())}).datepicker(a.extend({onClose:function(){h&&g.not(":focus")?(l(),g.trigger("focusout"),g.triggerHandler("blur")):l()}},o,i.datepicker,d.data("datepicker"))).bind("change",c).data("datepicker");u.dpDiv.addClass("input-date-datepicker-control");e&&b.triggerDomUpdate(e[0]);"disabled,min,max,value,step,placeholder".split(",").forEach(function(a){var b=d.prop(a);""!==b&&("disabled"!=a||!b)&&d.prop(a,b)});return u};k.date=function(b){if(a.fn.datepicker){var g=
a('<input class="input-date" type="text" />'),e=this.common(b,g,k.date.attrs),f=c(b,g,function(c){k.date.blockAttr=!0;var e;if(i.lazyDate){var f=a.data(g[0],"setDateLazyTimer");f&&(clearTimeout(f),a.removeData(g[0],"setDateLazyTimer"))}try{e=(e=a.datepicker.parseDate(g.datepicker("option","dateFormat"),g.prop("value")))?a.datepicker.formatDate("yy-mm-dd",e):g.prop("value")}catch(m){e=g.prop("value")}b.prop("value",e);k.date.blockAttr=!1;c.stopImmediatePropagation();h(b[0],"input");h(b[0],"change")});
e.css&&(g.css(e.css),e.outerWidth&&g.outerWidth(e.outerWidth),f.trigger[0]&&p(g,f.trigger))}};k.date.attrs={disabled:function(b,g,e){a.prop(g,"disabled",!!e)},min:function(b,g,e){try{e=a.datepicker.parseDate("yy-mm-dd",e)}catch(c){e=!1}e&&a(g).datepicker("option","minDate",e)},max:function(b,g,e){try{e=a.datepicker.parseDate("yy-mm-dd",e)}catch(c){e=!1}e&&a(g).datepicker("option","maxDate",e)},placeholder:function(b,e,c){b=(c||"").split("-");3==b.length&&(c=a(e).datepicker("option","dateFormat").replace("yy",
b[0]).replace("mm",b[1]).replace("dd",b[2]));a.prop(e,"placeholder",c)},value:function(b,g,c){if(!k.date.blockAttr){try{var f=a.datepicker.parseDate("yy-mm-dd",c)}catch(h){f=!1}f?e(a(g),f):a.prop(g,"value",c)}}}}if(!t.range||i.replaceUI)k.range=function(b){if(a.fn.slider){var e=a('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>'),c=this.common(b,e,k.range.attrs);a("span",e).attr("aria-labelledby",c.label.attr("id"));c.label.bind("click",function(){a("span",
e).focus();return!1});c.css&&(e.css(c.css),c.outerWidth&&e.outerWidth(c.outerWidth));e.slider(a.extend(!0,{},i.slider,b.data("slider"))).bind("slide",function(a,e){if(a.originalEvent)k.range.blockAttr=!0,b.prop("value",e.value),k.range.blockAttr=!1,h(b[0],"input"),h(b[0],"change")});["disabled","min","max","step","value"].forEach(function(e){var c=b.attr(e),g;"value"==e&&!c&&(g=b.getShadowElement())&&(c=(a(g).slider("option","max")-a(g).slider("option","min"))/2);null!=c&&b.attr(e,c)})}},k.range.attrs=
{disabled:function(b,e,c){c=!!c;a(e).slider("option","disabled",c);a("span",e).attr({"aria-disabled":c+"",tabindex:c?"-1":"0"})},min:function(b,e,c){c=c?1*c||0:0;a(e).slider("option","min",c);a("span",e).attr({"aria-valuemin":c})},max:function(b,e,c){c=c||0===c?1*c||100:100;a(e).slider("option","max",c);a("span",e).attr({"aria-valuemax":c})},value:function(b,e,c){c=a(b).prop("valueAsNumber");isNaN(c)||(k.range.blockAttr||a(e).slider("option","value",c),a("span",e).attr({"aria-valuenow":c,"aria-valuetext":c}))},
step:function(b,c,e){e=e&&a.trim(e)?1*e||1:1;a(c).slider("option","step",e)}};if(!b.bugs.valueAsNumberSet&&(i.replaceUI||!Modernizr.inputtypes.date||!Modernizr.inputtypes.range))n=function(){b.data(this,"hasShadow")&&a.prop(this,"value",a.prop(this,"value"))},b.onNodeNamesPropertyModify("input","valueAsNumber",n),b.onNodeNamesPropertyModify("input","valueAsDate",n);a.each("disabled,min,max,value,step,placeholder".split(","),function(a,e){b.onNodeNamesPropertyModify("input",e,function(a){var c=b.data(this,
"shadowData");if(c&&c.data&&c.data[e]&&c.nativeElement===this)c.data[e](this,c.shadowElement,a)})});if(!i.availabeLangs)i.availabeLangs="af ar ar-DZ az bg bs ca cs da de el en-AU en-GB en-NZ eo es et eu fa fi fo fr fr-CH gl he hr hu hy id is it ja ko kz lt lv ml ms nl no pl pt-BR rm ro ru sk sl sq sr sr-SR sv ta th tr uk vi zh-CN zh-HK zh-TW".split(" ");n=function(){a.datepicker&&(b.activeLang({langObj:a.datepicker.regional,module:"form-number-date-ui",callback:function(b){b=a.extend({},o,b,i.datepicker);
b.dateFormat&&i.datepicker.dateFormat!=b.dateFormat&&a("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option","dateFormat",b.dateFormat).getNativeElement().filter("[placeholder]").prop("placeholder",function(a,b){return b});a.datepicker.setDefaults(b)}}),a(j).unbind("jquery-uiReady.langchange input-widgetsReady.langchange"))};a(j).bind("jquery-uiReady.langchange input-widgetsReady.langchange",n);n();(function(){var e=function(){var b={};return function(c){return c in
b?b[c]:b[c]=a('<input type="'+c+'" />')[0].type===c}}();if(!e("number")){var c=b.cfg["forms-ext"],f=b.inputTypes,i=function(c,e,d){d=d||{};if(!("type"in d))d.type=a.prop(c,"type");if(!("step"in d))d.step=b.getStep(c,d.type);if(!("valueAsNumber"in d))d.valueAsNumber=f[d.type].asNumber(a.prop(c,"value"));var g="any"==d.step?f[d.type].step*f[d.type].stepScaleFactor:d.step;b.addMinMaxNumberToCache("min",a(c),d);b.addMinMaxNumberToCache("max",a(c),d);if(isNaN(d.valueAsNumber))d.valueAsNumber=f[d.type].stepBase||
0;if("any"!==d.step&&(c=Math.round(1E7*((d.valueAsNumber-(d.minAsnumber||0))%d.step))/1E7)&&Math.abs(c)!=d.step)d.valueAsNumber-=c;c=d.valueAsNumber+g*e;return c=!isNaN(d.minAsNumber)&&c<d.minAsNumber?d.valueAsNumber*e<d.minAsNumber?d.minAsNumber:isNaN(d.maxAsNumber)?d.valueAsNumber:d.maxAsNumber:!isNaN(d.maxAsNumber)&&c>d.maxAsNumber?d.valueAsNumber*e>d.maxAsNumber?d.maxAsNumber:isNaN(d.minAsNumber)?d.valueAsNumber:d.minAsNumber:Math.round(1E7*c)/1E7};b.modules["form-number-date-ui"].getNextStep=
i;var l=function(b,c,d){if(!b.disabled&&!b.readOnly&&!a(d).hasClass("step-controls")&&(a.prop(b,"value",f[c].numberToString(i(b,a(d).hasClass("step-up")?1:-1,{type:c}))),a(b).unbind("blur.stepeventshim"),h(b,"input"),j.activeElement)){if(j.activeElement!==b)try{b.focus()}catch(e){}setTimeout(function(){if(j.activeElement!==b)try{b.focus()}catch(c){}a(b).one("blur.stepeventshim",function(){h(b,"change")})},0)}};if(c.stepArrows){var k={set:function(){var a=b.data(this,"step-controls");if(a)a[this.disabled||
this.readonly?"addClass":"removeClass"]("disabled-step-control")}};b.onNodeNamesPropertyModify("input","disabled",k);b.onNodeNamesPropertyModify("input","readonly",a.extend({},k))}var n={38:1,40:-1};b.addReady(function(k,j){c.stepArrows&&a("input",k).add(j.filter("input")).each(function(){var k=a.prop(this,"type");if(f[k]&&f[k].asNumber&&c.stepArrows&&!(!0!==c.stepArrows&&!c.stepArrows[k]||e(k)||a(j).hasClass("has-step-controls"))){var j=this,o=a('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(j).bind("selectstart dragstart",
function(){return!1}).bind("mousedown mousepress",function(a){l(j,k,a.target);return!1}).bind("mousepressstart mousepressend",function(b){a(b.target)["mousepressstart"==b.type?"addClass":"removeClass"]("mousepress-ui")}),r=function(b,c){if(!j.disabled&&!j.readOnly)return a.prop(j,"value",f[k].numberToString(i(j,c,{type:k}))),h(j,"input"),!1},q=a(j).addClass("has-step-controls").attr({readonly:j.readOnly,disabled:j.disabled,autocomplete:"off",role:"spinbutton"}).bind(a.browser.msie?"keydown":"keypress",
function(b){if(!j.disabled&&!j.readOnly&&n[b.keyCode])return a.prop(j,"value",f[k].numberToString(i(j,n[b.keyCode],{type:k}))),h(j,"input"),!1});a.fn.mwheelIntent?q.add(o).bind("mwheelIntent",r):q.bind("focus",function(){q.add(o).unbind(".mwhellwebshims").bind("mousewheel.mwhellwebshims",r)}).bind("blur",function(){a(j).add(o).unbind(".mwhellwebshims")});b.data(j,"step-controls",o);c.calculateWidth&&(p(q,o),o.css("marginTop",(q.outerHeight()-o.outerHeight())/2))}})})}})();b.addReady(function(c,e){a(j).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",
function(){if(a.datepicker||a.fn.slider){if(a.datepicker&&!o.dateFormat)o.dateFormat=a.datepicker._defaults.dateFormat;k(c,e)}a.datepicker&&a.fn.slider?a(j).unbind(".initinputui"):b.modules["input-widgets"].src||b.warn('jQuery UI Widget factory is already included, but not datepicker or slider. configure src of $.webshims.modules["input-widgets"].src')})})});
