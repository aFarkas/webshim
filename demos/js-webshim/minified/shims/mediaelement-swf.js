jQuery.webshims.register("mediaelement-swf",function(d,e,m,s,t,j){var g=e.mediaelement,A=m.swfobject,w=Modernizr.audio&&Modernizr.video,B=A.hasFlashPlayerVersion("9.0.115"),u=0,m={paused:!0,ended:!1,currentSrc:"",duration:m.NaN,readyState:0,networkState:0,videoHeight:0,videoWidth:0,error:null,buffered:{start:function(a){if(a)e.error("buffered index size error");else return 0},end:function(a){if(a)e.error("buffered index size error");else return 0},length:0}},K=Object.keys(m),C={currentTime:0,volume:1,
muted:!1};Object.keys(C);var D=d.extend({isActive:"html5",activating:"html5",wasSwfReady:!1,_bufferedEnd:0,_bufferedStart:0,_metadata:!1,_durationCalcs:-1,_callMeta:!1,currentTime:0,_ppFlag:t},m,C),E=/^jwplayer-/,l=function(a){if(a=s.getElementById(a.replace(E,"")))return a=e.data(a,"mediaelement"),"flash"==a.isActive?a:null},n=function(a){return(a=e.data(a,"mediaelement"))&&"flash"==a.isActive?a:null},h=function(a,b){b=d.Event(b);b.preventDefault();d.event.trigger(b,t,a)},L=j.playerPath||e.cfg.basePath+
"jwplayer/"+(j.playerName||"player.swf"),F=j.pluginPath||e.cfg.basePath+"swf/jwwebshims.swf";e.extendUNDEFProp(j.jwParams,{allowscriptaccess:"always",allowfullscreen:"true",wmode:"transparent"});e.extendUNDEFProp(j.jwVars,{screencolor:"ffffffff"});e.extendUNDEFProp(j.jwAttrs,{bgcolor:"#000000"});var y=function(a,b){var c=a.duration;if(!(c&&0<a._durationCalcs)){try{if(a.duration=a.jwapi.getPlaylist()[0].duration,!a.duration||0>=a.duration||a.duration===a._lastDuration)a.duration=c}catch(f){}a.duration&&
a.duration!=a._lastDuration?(h(a._elem,"durationchange"),("audio"==a._elemNodeName||a._callMeta)&&g.jwEvents.Model.META(d.extend({duration:a.duration},b),a),a._durationCalcs--):a._durationCalcs++}},k=function(a,b){3>a&&clearTimeout(b._canplaythroughTimer);if(3<=a&&3>b.readyState)b.readyState=a,h(b._elem,"canplay"),clearTimeout(b._canplaythroughTimer),b._canplaythroughTimer=setTimeout(function(){k(4,b)},4E3);if(4<=a&&4>b.readyState)b.readyState=a,h(b._elem,"canplaythrough");b.readyState=a};g.jwEvents=
{View:{PLAY:function(a){var b=l(a.id);if(b&&!b.stopPlayPause&&(b._ppFlag=!0,b.paused==a.state)){b.paused=!a.state;if(b.ended)b.ended=!1;h(b._elem,a.state?"play":"pause")}}},Model:{BUFFER:function(a){var b=l(a.id);if(b&&"percentage"in a&&b._bufferedEnd!=a.percentage){b.networkState=100==a.percentage?1:2;(isNaN(b.duration)||5<a.percentage&&25>a.percentage||100===a.percentage)&&y(b,a);if(b.ended)b.ended=!1;if(b.duration){2<a.percentage&&20>a.percentage?k(3,b):20<a.percentage&&k(4,b);if(b._bufferedEnd&&
b._bufferedEnd>a.percentage)b._bufferedStart=b.currentTime||0;b._bufferedEnd=a.percentage;b.buffered.length=1;if(100==a.percentage)b.networkState=1,k(4,b);d.event.trigger("progress",t,b._elem,!0)}}},META:function(a,b){if(b=b&&b.networkState?b:l(a.id))if("duration"in a){if(!b._metadata||!((!a.height||b.videoHeight==a.height)&&a.duration===b.duration)){b._metadata=!0;var c=b.duration;if(a.duration)b.duration=a.duration;b._lastDuration=b.duration;if(a.height||a.width)b.videoHeight=a.height||0,b.videoWidth=
a.width||0;if(!b.networkState)b.networkState=2;1>b.readyState&&k(1,b);b.duration&&c!==b.duration&&h(b._elem,"durationchange");h(b._elem,"loadedmetadata")}}else b._callMeta=!0},TIME:function(a){var b=l(a.id);if(b&&b.currentTime!==a.position){b.currentTime=a.position;b.duration&&b.duration<b.currentTime&&y(b,a);2>b.readyState&&k(2,b);if(b.ended)b.ended=!1;h(b._elem,"timeupdate")}},STATE:function(a){var b=l(a.id);if(b)switch(a.newstate){case "BUFFERING":if(b.ended)b.ended=!1;k(1,b);h(b._elem,"waiting");
break;case "PLAYING":b.paused=!1;b._ppFlag=!0;b.duration||y(b,a);3>b.readyState&&k(3,b);if(b.ended)b.ended=!1;h(b._elem,"playing");break;case "PAUSED":if(!b.paused&&!b.stopPlayPause)b.paused=!0,b._ppFlag=!0,h(b._elem,"pause");break;case "COMPLETED":4>b.readyState&&k(4,b),b.ended=!0,h(b._elem,"ended")}}},Controller:{ERROR:function(a){var b=l(a.id);b&&g.setError(b._elem,a.message)},SEEK:function(a){var b=l(a.id);if(b){if(b.ended)b.ended=!1;if(b.paused)try{b.jwapi.sendEvent("play","false")}catch(c){}if(b.currentTime!=
a.position)b.currentTime=a.position,h(b._elem,"timeupdate")}},VOLUME:function(a){var b=l(a.id);if(b&&(a=a.percentage/100,b.volume!=a))b.volume=a,h(b._elem,"volumechange")},MUTE:function(a){if(!a.state){var b=l(a.id);if(b&&b.muted!=a.state)b.muted=a.state,h(b._elem,"volumechange")}}}};var M=function(a){d.each(g.jwEvents,function(b,c){d.each(c,function(c){a.jwapi["add"+b+"Listener"](c,"jQuery.webshims.mediaelement.jwEvents."+b+"."+c)})})},G=function(a){a&&(a._ppFlag===t&&d.prop(a._elem,"autoplay")||
!a.paused)&&setTimeout(function(){if("flash"==a.isActive&&(a._ppFlag===t||!a.paused))try{d(a._elem).play()}catch(b){}},1)},N=function(a){if(a&&"video"==a._elemNodeName){var b,c,f,e,o,i,h,j,g=function(p,q){if(q&&p&&!(1>q||1>p||"flash"!=a.isActive))if(b&&(b.remove(),b=!1),e=p,o=q,clearTimeout(h),c="auto"==a._elem.style.width,f="auto"==a._elem.style.height,c||f){i=i||d(a._elem).getShadowElement();var g;c&&!f?(g=i.height(),p*=g/q,q=g):!c&&f&&(g=i.width(),q*=g/p,p=g);j=!0;setTimeout(function(){j=!1},9);
i.css({width:p,height:q})}},l=function(){if(!("flash"!=a.isActive||d.prop(a._elem,"readyState")&&d.prop(this,"videoWidth"))){var i=d.prop(a._elem,"poster");if(i&&(c="auto"==a._elem.style.width,f="auto"==a._elem.style.height,c||f))b&&(b.remove(),b=!1),b=d('<img style="position: absolute; height: auto; width: auto; top: 0px; left: 0px; visibility: hidden;" />'),b.bind("load error alreadycomplete",function(){clearTimeout(h);var a=this,c=a.naturalWidth||a.width||a.offsetWidth,i=a.naturalHeight||a.height||
a.offsetHeight;i&&c?(g(c,i),a=null):setTimeout(function(){c=a.naturalWidth||a.width||a.offsetWidth;i=a.naturalHeight||a.height||a.offsetHeight;g(c,i);b&&(b.remove(),b=!1);a=null},9);d(this).unbind()}).prop("src",i).appendTo("body").each(function(){this.complete||this.error?d(this).triggerHandler("alreadycomplete"):(clearTimeout(h),h=setTimeout(function(){d(a._elem).triggerHandler("error")},9999))})}};d(a._elem).bind("loadedmetadata",function(){g(d.prop(this,"videoWidth"),d.prop(this,"videoHeight"))}).bind("emptied",
l).bind("swfstageresize",function(){j||g(e,o)}).bind("emptied",function(){e=void 0;o=void 0}).triggerHandler("swfstageresize");l();d.prop(a._elem,"readyState")&&g(d.prop(a._elem,"videoWidth"),d.prop(a._elem,"videoHeight"))}};g.playerResize=function(a){a&&(a=s.getElementById(a.replace(E,"")))&&d(a).triggerHandler("swfstageresize")};d(s).bind("emptied",function(a){a=n(a.target);G(a)});var x;g.jwPlayerReady=function(a){var b=l(a.id);if(b&&b.jwapi){clearTimeout(x);b.jwData=a;b.shadowElem.removeClass("flashblocker-assumed");
b.wasSwfReady?d(b._elem).mediaLoad():(a=parseFloat(a.version,10),(5.6>a||6<=a)&&e.warn("mediaelement-swf is only testet with jwplayer 5.6+"),d.prop(b._elem,"volume",b.volume),d.prop(b._elem,"muted",b.muted),M(b));b.wasSwfReady=!0;var a=b.actionQueue.length,c=0,f;if(a&&"flash"==b.isActive)for(;b.actionQueue.length&&a>c;)c++,f=b.actionQueue.shift(),b.jwapi[f.fn].apply(b.jwapi,f.args);if(b.actionQueue.length)b.actionQueue=[];G(b)}};var z=d.noop;if(w){var O={play:1,playing:1},H="play,pause,playing,canplay,progress,waiting,ended,loadedmetadata,durationchange,emptied".split(","),
I=H.map(function(a){return a+".webshimspolyfill"}).join(" "),P=function(a){var b=e.data(a.target,"mediaelement");b&&(a.originalEvent&&a.originalEvent.type===a.type)==("flash"==b.activating)&&(a.stopImmediatePropagation(),O[a.type]&&b.isActive!=b.activating&&d(a.target).pause())},z=function(a){d(a).unbind(I).bind(I,P);H.forEach(function(b){e.moveToFirstEvent(a,b)})};z(s)}g.setActive=function(a,b,c){c||(c=e.data(a,"mediaelement"));if(c&&c.isActive!=b){"html5"!=b&&"flash"!=b&&e.warn("wrong type for mediaelement activating: "+
b);var f=e.data(a,"shadowData");c.activating=b;d(a).pause();c.isActive=b;"flash"==b?(f.shadowElement=f.shadowFocusElement=c.shadowElem[0],d(a).hide().getShadowElement().show()):(d(a).show().getShadowElement().hide(),f.shadowElement=f.shadowFocusElement=!1)}};var Q=function(){var a="_bufferedEnd,_bufferedStart,_metadata,_ppFlag,currentSrc,currentTime,duration,ended,networkState,paused,videoHeight,videoWidth,_callMeta,_durationCalcs".split(","),b=a.length;return function(c){if(c){var d=b,e=c.networkState;
for(k(0,c);--d;)delete c[a[d]];c.actionQueue=[];c.buffered.length=0;e&&h(c._elem,"emptied")}}}(),J=function(a,b){var c=a._elem,f=a.shadowElem;d(c)[b?"addClass":"removeClass"]("webshims-controls");"audio"==a._elemNodeName&&!b?f.css({width:0,height:0}):f.css({width:c.style.width||d(c).width(),height:c.style.height||d(c).height()})};g.createSWF=function(a,b,c){if(B){1>u?u=1:u++;var f=d.extend({},j.jwVars,{image:d.prop(a,"poster")||"",file:b.srcProp}),h=d(a).data("jwvars")||{};if(c&&c.swfCreated)g.setActive(a,
"flash",c),Q(c),c.currentSrc=b.srcProp,d.extend(f,h),j.changeJW(f,a,b,c,"load"),r(a,"sendEvent",["LOAD",f]);else{var o=d.prop(a,"controls"),i="jwplayer-"+e.getID(a),l=d.extend({},j.jwParams,d(a).data("jwparams")),k=a.nodeName.toLowerCase(),n=d.extend({},j.jwAttrs,{name:i,id:i},d(a).data("jwattrs")),m=d('<div class="polyfill-'+k+' polyfill-mediaelement" id="wrapper-'+i+'"><div id="'+i+'"></div>').css({position:"relative",overflow:"hidden"}),c=e.data(a,"mediaelement",e.objectCreate(D,{actionQueue:{value:[]},
shadowElem:{value:m},_elemNodeName:{value:k},_elem:{value:a},currentSrc:{value:b.srcProp},swfCreated:{value:!0},buffered:{value:{start:function(a){if(a>=c.buffered.length)e.error("buffered index size error");else return 0},end:function(a){if(a>=c.buffered.length)e.error("buffered index size error");else return(c.duration-c._bufferedStart)*c._bufferedEnd/100+c._bufferedStart},length:0}}}));J(c,o);m.insertBefore(a);w&&d.extend(c,{volume:d.prop(a,"volume"),muted:d.prop(a,"muted")});d.extend(f,{id:i,
controlbar:o?j.jwVars.controlbar||("video"==k?"over":"bottom"):"video"==k?"none":"bottom",icons:""+(o&&"video"==k)},h,{playerready:"jQuery.webshims.mediaelement.jwPlayerReady"});f.plugins=f.plugins?f.plugins+(","+F):F;e.addShadowDom(a,m);z(a);g.setActive(a,"flash",c);j.changeJW(f,a,b,c,"embed");N(c);A.embedSWF(L,i,"100%","100%","9.0.0",!1,f,l,n,function(b){if(b.success)c.jwapi=b.ref,o||d(b.ref).attr("tabindex","-1").css("outline","none"),setTimeout(function(){if(!b.ref.parentNode&&m[0].parentNode||
"none"==b.ref.style.display)m.addClass("flashblocker-assumed"),d(a).trigger("flashblocker"),e.warn("flashblocker assumed");d(b.ref).css({minHeight:"2px",minWidth:"2px",display:"block"})},9),x||(clearTimeout(x),x=setTimeout(function(){var a=d(b.ref);1<a[0].offsetWidth&&1<a[0].offsetHeight&&0===location.protocol.indexOf("file:")?e.error("Add your local development-directory to the local-trusted security sandbox:  http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html"):
(2>a[0].offsetWidth||2>a[0].offsetHeight)&&e.info("JS-SWF connection can't be established on hidden or unconnected flash objects")},8E3))})}}else setTimeout(function(){d(a).mediaLoad()},1)};var r=function(a,b,c,d){return(d=d||n(a))?(d.jwapi&&d.jwapi[b]?d.jwapi[b].apply(d.jwapi,c||[]):(d.actionQueue.push({fn:b,args:c}),10<d.actionQueue.length&&setTimeout(function(){5<d.actionQueue.length&&d.actionQueue.shift()},99)),d):!1};["audio","video"].forEach(function(a){var b={},c,f=function(d){"audio"==a&&
("videoHeight"==d||"videoWidth"==d)||(b[d]={get:function(){var a=n(this);return a?a[d]:w&&c[d].prop._supget?c[d].prop._supget.apply(this):D[d]},writeable:!1})},g=function(a,c){f(a);delete b[a].writeable;b[a].set=c};g("volume",function(a){var b=n(this);if(b){if(a*=100,!isNaN(a)){var d=b.muted;(0>a||100<a)&&e.error("volume greater or less than allowed "+a/100);r(this,"sendEvent",["VOLUME",a],b);if(d)try{b.jwapi.sendEvent("mute","true")}catch(f){}a/=100;if(!(b.volume==a||"flash"!=b.isActive))b.volume=
a,h(b._elem,"volumechange")}}else if(c.volume.prop._supset)return c.volume.prop._supset.apply(this,arguments)});g("muted",function(a){var b=n(this);if(b){if(a=!!a,r(this,"sendEvent",["mute",""+a],b),!(b.muted==a||"flash"!=b.isActive))b.muted=a,h(b._elem,"volumechange")}else if(c.muted.prop._supset)return c.muted.prop._supset.apply(this,arguments)});g("currentTime",function(a){var b=n(this);if(b){if(a*=1,!isNaN(a)){if(b.paused)clearTimeout(b.stopPlayPause),b.stopPlayPause=setTimeout(function(){b.paused=
!0;b.stopPlayPause=!1},50);r(this,"sendEvent",["SEEK",""+a],b);if(b.paused){if(0<b.readyState)b.currentTime=a,h(b._elem,"timeupdate");try{b.jwapi.sendEvent("play","false")}catch(d){}}}}else if(c.currentTime.prop._supset)return c.currentTime.prop._supset.apply(this,arguments)});["play","pause"].forEach(function(a){b[a]={value:function(){var b=n(this);if(b)b.stopPlayPause&&clearTimeout(b.stopPlayPause),r(this,"sendEvent",["play","play"==a],b),setTimeout(function(){if("flash"==b.isActive&&(b._ppFlag=
!0,b.paused!=("play"!=a)))b.paused="play"!=a,h(b._elem,a)},1);else if(c[a].prop._supvalue)return c[a].prop._supvalue.apply(this,arguments)}}});K.forEach(f);e.onNodeNamesPropertyModify(a,"controls",function(b,c){var f=n(this);d(this)[c?"addClass":"removeClass"]("webshims-controls");if(f){try{r(this,c?"showControls":"hideControls",[a],f)}catch(g){e.warn("you need to generate a crossdomain.xml")}"audio"==a&&J(f,c);d(f.jwapi).attr("tabindex",c?"0":"-1")}});c=e.defineNodeNameProperties(a,b,"prop")});if(B){var R=
d.cleanData,S=d.browser.msie&&9>e.browserVersion,T={object:1,OBJECT:1};d.cleanData=function(a){var b,c,d;if(a&&(c=a.length)&&u)for(b=0;b<c;b++)if(T[a[b].nodeName]){if("sendEvent"in a[b]){u--;try{a[b].sendEvent("play",!1)}catch(e){}}if(S)try{for(d in a[b])"function"==typeof a[b][d]&&(a[b][d]=null)}catch(g){}}return R.apply(this,arguments)}}if(!w){var v=s.createElement("a");v.style.display="none";["poster","src"].forEach(function(a){e.defineNodeNamesProperty("src"==a?["audio","video","source"]:["video"],
a,{prop:{get:function(){var b=this.getAttribute(a),c;if(null==b)return"";v.setAttribute("href",b+"");if(!d.support.hrefNormalized)try{d(v).appendTo(this),c=v.getAttribute("href",4)}catch(e){}return c||v.href},set:function(b){d.attr(this,a,b)}}})});["autoplay","controls"].forEach(function(a){e.defineNodeNamesBooleanProperty(["audio","video"],a)});e.defineNodeNamesProperties(["audio","video"],{HAVE_CURRENT_DATA:{value:2},HAVE_ENOUGH_DATA:{value:4},HAVE_FUTURE_DATA:{value:3},HAVE_METADATA:{value:1},
HAVE_NOTHING:{value:0},NETWORK_EMPTY:{value:0},NETWORK_IDLE:{value:1},NETWORK_LOADING:{value:2},NETWORK_NO_SOURCE:{value:3}},"prop")}});
