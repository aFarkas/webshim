(function(e){var t=e.getElementsByTagName("script"),n=t[t.length-1],i=n.getAttribute("src").replace(/[^\/]+$/,"save.php");window.canvas2png=function(t){var n=t.tagName.toLowerCase();if("canvas"===n)if("undefined"!=typeof FlashCanvas)FlashCanvas.saveImage(t);else{var a=e.createElement("form"),o=e.createElement("input");a.setAttribute("action",i),a.setAttribute("method","post"),o.setAttribute("type","hidden"),o.setAttribute("name","dataurl"),o.setAttribute("value",t.toDataURL()),e.body.appendChild(a),a.appendChild(o),a.submit(),a.removeChild(o),e.body.removeChild(a)}}})(document);