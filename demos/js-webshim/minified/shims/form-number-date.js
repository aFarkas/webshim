jQuery.webshims.ready("form-extend",function(g,f,s){f.getStep=function(a,c){var b=g.attr(a,"step");if(b==="any")return b;c=c||j(a);if(!d[c]||!d[c].step)return b;b=h.number.asNumber(b);return(!isNaN(b)&&b>0?b:d[c].step)*d[c].stepScaleFactor};f.addMinMaxNumberToCache=function(a,c,b){if(!(a+"AsNumber"in b)){b[a+"AsNumber"]=d[b.type].asNumber(c.attr(a));if(isNaN(b[a+"AsNumber"])&&a+"Default"in d[b.type])b[a+"AsNumber"]=d[b.type][a+"Default"]}};var m=parseInt("NaN",10),d=f.inputTypes,k=function(a){return typeof a==
"number"||a&&a==a*1},n=function(a){return Modernizr.input.valueAsNumber&&g('<input type="'+a+'" />').attr("type")===a},j=function(a){return(a.getAttribute("type")||"").toLowerCase()},q=f.addMinMaxNumberToCache,l=function(a,c){a=""+a;c-=a.length;for(var b=0;b<c;b++)a="0"+a;return a};f.addValidityRule("stepMismatch",function(a,c,b){if(c==="")return false;if(!("type"in b))b.type=j(a[0]);if(b.type=="date")return false;var e=false;if(d[b.type]&&d[b.type].step){if(!("step"in b))b.step=f.getStep(a[0],b.type);
if(b.step=="any")return false;if(!("valueAsNumber"in b))b.valueAsNumber=d[b.type].asNumber(c);if(isNaN(b.valueAsNumber))return false;q("min",a,b);a=b.minAsNumber;if(isNaN(a))a=d[b.type].stepBase||0;e=Math.abs((b.valueAsNumber-a)%b.step);e=!(e<=1.0E-7||Math.abs(e-b.step)<=1.0E-7)}return e});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){f.addValidityRule(a.name,function(c,b,e){var i=false;if(b==="")return i;if(!("type"in e))e.type=j(c[0]);
if(d[e.type]&&d[e.type].asNumber){if(!("valueAsNumber"in e))e.valueAsNumber=d[e.type].asNumber(b);if(isNaN(e.valueAsNumber))return false;q(a.attr,c,e);if(isNaN(e[a.attr+"AsNumber"]))return i;i=e[a.attr+"AsNumber"]*a.factor<e.valueAsNumber*a.factor-1.0E-7}return i})});var r=f.defineNodeNameProperty("input","valueAsNumber",{get:function(){var a=j(this);return d[a]&&d[a].asNumber?d[a].asNumber(g.attr(this,"value")):m},set:function(a){var c=j(this);if(d[c]&&d[c].numberToString)if(isNaN(a))g.attr(this,
"value","");else{c=d[c].numberToString(a);if(c!==false)g.attr(this,"value",c);else throw"INVALID_STATE_ERR: DOM Exception 11";}else r._supset&&r._supset.call(this,arguments)}},true,"input-date-number","form-number-date"),p=f.defineNodeNameProperty("input","valueAsDate",{get:function(){var a=j(this);return d[a]&&d[a].asDate&&!d[a].noAsDate?d[a].asDate(g.attr(this,"value")):p._supget&&p._supget.call(this)},set:function(a){var c=j(this);if(d[c]&&d[c].dateToString){if(!s.noHTMLExtFixes)throw"there are some serious issues in opera's implementation. don't use!";
if(a===null){g.attr(this,"value","");return""}c=d[c].dateToString(a);if(c!==false){g.attr(this,"value",c);return c}else throw"INVALID_STATE_ERR: DOM Exception 11";}else return p._supset&&p._supset(this,arguments)||null}},true,"input-date-number","form-number-date"),h={number:{mismatch:function(a){return!k(a)},step:1,stepScaleFactor:1,asNumber:function(a){return k(a)?a*1:m},numberToString:function(a){return k(a)?a:false}},range:{minDefault:0,maxDefault:100},date:{mismatch:function(a){if(!a||!a.split||
!/\d$/.test(a))return true;var c=a.split(/\u002D/);if(c.length!==3)return true;var b=false;g.each(c,function(e,i){if(!(k(i)||i&&i=="0"+i*1)){b=true;return false}});if(b)return b;if(c[0].length!==4||c[1].length!=2||c[1]>12||c[2].length!=2||c[2]>33)b=true;return a!==this.dateToString(this.asDate(a,true))},step:1,stepScaleFactor:864E5,asDate:function(a,c){if(!c&&this.mismatch(a))return null;return new Date(this.asNumber(a,true))},asNumber:function(a,c){var b=m;if(c||!this.mismatch(a)){a=a.split(/\u002D/);
b=Date.UTC(a[0],a[1]-1,a[2])}return b},numberToString:function(a){return k(a)?this.dateToString(new Date(a*1)):false},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+l(a.getUTCMonth()+1,2)+"-"+l(a.getUTCDate(),2):false}},time:{mismatch:function(a,c){if(!a||!a.split||!/\d$/.test(a))return true;a=a.split(/\u003A/);if(a.length<2||a.length>3)return true;var b=false,e;if(a[2]){a[2]=a[2].split(/\u002E/);e=parseInt(a[2][1],10);a[2]=a[2][0]}g.each(a,function(i,o){if(!(k(o)||o&&o==
"0"+o*1)||o.length!==2){b=true;return false}});if(b)return true;if(a[0]>23||a[0]<0||a[1]>59||a[1]<0)return true;if(a[2]&&(a[2]>59||a[2]<0))return true;if(e&&isNaN(e))return true;if(e)if(e<100)e*=100;else if(e<10)e*=10;return c===true?[a,e]:false},step:60,stepBase:0,stepScaleFactor:1E3,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var c=m;a=this.mismatch(a,true);if(a!==true){c=Date.UTC("1970",0,1,a[0][0],a[0][1],a[0][2]||0);if(a[1])c+=a[1]}return c},dateToString:function(a){if(a&&
a.getUTCHours){var c=l(a.getUTCHours(),2)+":"+l(a.getUTCMinutes(),2),b=a.getSeconds();if(b!="0")c+=":"+l(b,2);b=a.getUTCMilliseconds();if(b!="0")c+="."+l(b,3);return c}else return false}},"datetime-local":{mismatch:function(a,c){if(!a||!a.split||(a+"special").split(/\u0054/).length!==2)return true;a=a.split(/\u0054/);return d.date.mismatch(a[0])||d.time.mismatch(a[1],c)},noAsDate:true,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var c=m,b=this.mismatch(a,
true);if(b!==true){a=a.split(/\u0054/)[0].split(/\u002D/);c=Date.UTC(a[0],a[1]-1,a[2],b[0][0],b[0][1],b[0][2]||0);if(b[1])c+=b[1]}return c},dateToString:function(a,c){return d.date.dateToString(a)+"T"+d.time.dateToString(a,c)}}};n("number")||f.addInputType("number",h.number);n("range")||f.addInputType("range",g.extend({},h.number,h.range));n("date")||f.addInputType("date",h.date);n("time")||f.addInputType("time",g.extend({},h.date,h.time));n("datetime-local")||f.addInputType("datetime-local",g.extend({},
h.date,h.time,h["datetime-local"]));f.defineNodeNameProperty("input","type",{get:function(){var a=j(this);return f.inputTypes[a]?a:this.type||this.getAttribute("type")},set:g.noop});f.isReady("form-number-date",true)});
