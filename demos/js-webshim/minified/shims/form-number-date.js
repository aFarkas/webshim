jQuery.webshims.register("forms-ext",function(d,l){if(!(Modernizr.input.valueAsNumberSet&&Modernizr.input.valueAsDate&&Modernizr.inputtypes.date&&Modernizr.inputtypes.number&&Modernizr.inputtypes.time&&Modernizr.inputtypes.range)){l.getStep=function(a,h){var f=d.attr(a,"step");if(f==="any")return f;h=h||o(a);if(!k[h]||!k[h].step)return f;f=m.number.asNumber(f);return(!isNaN(f)&&f>0?f:k[h].step)*k[h].stepScaleFactor};l.addMinMaxNumberToCache=function(a,h,f){if(!(a+"AsNumber"in f)){f[a+"AsNumber"]=
k[f.type].asNumber(h.attr(a));if(isNaN(f[a+"AsNumber"])&&a+"Default"in k[f.type])f[a+"AsNumber"]=k[f.type][a+"Default"]}};var s=parseInt("NaN",10),k=l.inputTypes,q=function(a){return typeof a=="number"||a&&a==a*1},u=function(a){return Modernizr.input.valueAsNumber&&d('<input type="'+a+'" />').attr("type")===a},o=function(a){return(a.getAttribute("type")||"").toLowerCase()},y=l.addMinMaxNumberToCache,v=function(a,h){a=""+a;h-=a.length;for(var f=0;f<h;f++)a="0"+a;return a};l.addValidityRule("stepMismatch",
function(a,h,f,e){if(h==="")return false;if(!("type"in f))f.type=o(a[0]);if(f.type=="date")return false;e=(e||{}).stepMismatch||false;if(k[f.type]&&k[f.type].step){if(!("step"in f))f.step=l.getStep(a[0],f.type);if(f.step=="any")return false;if(!("valueAsNumber"in f))f.valueAsNumber=k[f.type].asNumber(h);if(isNaN(f.valueAsNumber))return false;y("min",a,f);a=f.minAsNumber;if(isNaN(a))a=k[f.type].stepBase||0;e=Math.abs((f.valueAsNumber-a)%f.step);e=!(e<=1.0E-7||Math.abs(e-f.step)<=1.0E-7)}return e});
[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(a){l.addValidityRule(a.name,function(h,f,e,c){c=(c||{})[a.name]||false;if(f==="")return c;if(!("type"in e))e.type=o(h[0]);if(k[e.type]&&k[e.type].asNumber){if(!("valueAsNumber"in e))e.valueAsNumber=k[e.type].asNumber(f);if(isNaN(e.valueAsNumber))return false;y(a.attr,h,e);if(isNaN(e[a.attr+"AsNumber"]))return c;c=e[a.attr+"AsNumber"]*a.factor<e.valueAsNumber*a.factor-1.0E-7}return c})});l.defineNodeNameProperty("input",
"type",{get:function(){var a=o(this);return l.inputTypes[a]?a:this.type||this.getAttribute("type")}});var z=l.defineNodeNameProperty("input","valueAsNumber",{get:function(){var a=o(this);a=k[a]&&k[a].asNumber?k[a].asNumber(d.attr(this,"value")):z._supget&&z._supget.call(this);if(a===undefined)a=s;return a},set:function(a){var h=o(this);if(k[h]&&k[h].numberToString)if(isNaN(a))d.attr(this,"value","");else{h=k[h].numberToString(a);h!==false?d.attr(this,"value",h):l.warn("INVALID_STATE_ERR: DOM Exception 11")}else z._supset&&
z._supset.apply(this,arguments)}}),w=l.defineNodeNameProperty("input","valueAsDate",{get:function(){var a=o(this);return k[a]&&k[a].asDate&&!k[a].noAsDate?k[a].asDate(d.attr(this,"value")):w._supget&&w._supget.call(this)||null},set:function(a){var h=o(this);if(k[h]&&k[h].dateToString&&!k[h].noAsDate){if(a===null){d.attr(this,"value","");return""}h=k[h].dateToString(a);if(h!==false){d.attr(this,"value",h);return h}else l.warn("INVALID_STATE_ERR: DOM Exception 11")}else return w._supset&&w._supset.apply(this,
arguments)||null}}),m={number:{mismatch:function(a){return!q(a)},step:1,stepScaleFactor:1,asNumber:function(a){return q(a)?a*1:s},numberToString:function(a){return q(a)?a:false}},range:{minDefault:0,maxDefault:100},date:{mismatch:function(a){if(!a||!a.split||!/\d$/.test(a))return true;var h=a.split(/\u002D/);if(h.length!==3)return true;var f=false;d.each(h,function(e,c){if(!(q(c)||c&&c=="0"+c*1)){f=true;return false}});if(f)return f;if(h[0].length!==4||h[1].length!=2||h[1]>12||h[2].length!=2||h[2]>
33)f=true;return a!==this.dateToString(this.asDate(a,true))},step:1,stepScaleFactor:864E5,asDate:function(a,h){if(!h&&this.mismatch(a))return null;return new Date(this.asNumber(a,true))},asNumber:function(a,h){var f=s;if(h||!this.mismatch(a)){a=a.split(/\u002D/);f=Date.UTC(a[0],a[1]-1,a[2])}return f},numberToString:function(a){return q(a)?this.dateToString(new Date(a*1)):false},dateToString:function(a){return a&&a.getFullYear?a.getUTCFullYear()+"-"+v(a.getUTCMonth()+1,2)+"-"+v(a.getUTCDate(),2):false}},
time:{mismatch:function(a,h){if(!a||!a.split||!/\d$/.test(a))return true;a=a.split(/\u003A/);if(a.length<2||a.length>3)return true;var f=false,e;if(a[2]){a[2]=a[2].split(/\u002E/);e=parseInt(a[2][1],10);a[2]=a[2][0]}d.each(a,function(c,b){if(!(q(b)||b&&b=="0"+b*1)||b.length!==2){f=true;return false}});if(f)return true;if(a[0]>23||a[0]<0||a[1]>59||a[1]<0)return true;if(a[2]&&(a[2]>59||a[2]<0))return true;if(e&&isNaN(e))return true;if(e)if(e<100)e*=100;else if(e<10)e*=10;return h===true?[a,e]:false},
step:60,stepBase:0,stepScaleFactor:1E3,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var h=s;a=this.mismatch(a,true);if(a!==true){h=Date.UTC("1970",0,1,a[0][0],a[0][1],a[0][2]||0);if(a[1])h+=a[1]}return h},dateToString:function(a){if(a&&a.getUTCHours){var h=v(a.getUTCHours(),2)+":"+v(a.getUTCMinutes(),2),f=a.getSeconds();if(f!="0")h+=":"+v(f,2);f=a.getUTCMilliseconds();if(f!="0")h+="."+v(f,3);return h}else return false}},"datetime-local":{mismatch:function(a,
h){if(!a||!a.split||(a+"special").split(/\u0054/).length!==2)return true;a=a.split(/\u0054/);return k.date.mismatch(a[0])||k.time.mismatch(a[1],h)},noAsDate:true,asDate:function(a){a=new Date(this.asNumber(a));return isNaN(a)?null:a},asNumber:function(a){var h=s,f=this.mismatch(a,true);if(f!==true){a=a.split(/\u0054/)[0].split(/\u002D/);h=Date.UTC(a[0],a[1]-1,a[2],f[0][0],f[0][1],f[0][2]||0);if(f[1])h+=f[1]}return h},dateToString:function(a,h){return k.date.dateToString(a)+"T"+k.time.dateToString(a,
h)}}};if(!Modernizr.input.valueAsNumberSet||!u("number"))l.addInputType("number",m.number);if(!Modernizr.input.valueAsNumberSet||!u("range"))l.addInputType("range",d.extend({},m.number,m.range));if(!Modernizr.input.valueAsNumberSet||!u("date"))l.addInputType("date",m.date);if(!Modernizr.input.valueAsNumberSet||!u("time"))l.addInputType("time",d.extend({},m.date,m.time));if(!Modernizr.input.valueAsNumberSet||!u("datetime-local"))l.addInputType("datetime-local",d.extend({},m.date,m.time,m["datetime-local"]))}});
jQuery.webshims.ready("forms-ext dom-support",function(d,l,s,k){var q=l.triggerInlineForm;s=Modernizr.inputtypes;var u=function(e,c){var b={w:e.width()};if(b.w){var i={mL:parseInt(c.css("marginLeft"),10)||0,w:c.outerWidth()};b.mR=parseInt(e.css("marginRight"),10)||0;b.mR&&e.css("marginRight",0);if(i.mL<=i.w*-1){c.css("marginRight",Math.floor(Math.abs(i.w+i.mL)+b.mR));e.css("paddingRight",(parseInt(e.css("paddingRight"),10)||0)+Math.abs(i.mL));e.css("width",Math.floor(b.w+i.mL))}else{c.css("marginRight",
b.mR);e.css("width",Math.floor(b.w-i.mL-i.w))}}},o=d.webshims.cfg["forms-ext"],y={dateFormat:"yy-mm-dd"},v,z=d([]),w,m=function(e,c){d("input",e).add(c.filter("input")).each(function(){var b=d.attr(this,"type");m[b]&&!d.data(this,"inputUIReplace")&&m[b](d(this))})},a=function(e,c){if(o.lazyDate){var b=d.data(e[0],"setDateLazyTimer");b&&clearTimeout(b);d.data(e[0],"setDateLazyTimer",setTimeout(function(){e.datepicker("setDate",c);d.removeData(e[0],"setDateLazyTimer");e=null},0))}else e.datepicker("setDate",
c)};m.common=function(e,c,b){Modernizr.formvalidation&&e.bind("firstinvalid",function(p){clearTimeout(v);w||(v=setTimeout(function(){!w&&!p.isInvalidUIPrevented()&&l.validityAlert.showFor(p.target)},20))});var i=e.attr("id");i={css:{marginRight:e.css("marginRight"),marginLeft:e.css("marginLeft")},outerWidth:e.outerWidth(),label:i?d('label[for="'+i+'"]',e[0].form):z};var r=l.getID(i.label);c.addClass(e[0].className).data("html5element",e);e.after(c).data("inputUIReplace",{visual:c,methods:b}).hide();
if(c.length==1&&!d("*",c)[0]){c.attr("aria-labeledby",r);i.label.bind("click",function(){c.focus();return false})}return i};Modernizr.formvalidation&&["input","form"].forEach(function(e){var c=l.defineNodeNameProperty(e,"checkValidity",{value:function(){w=true;var b=c._supvalue.apply(this,arguments);w=false;return b}})});if(!s["datetime-local"]||o.replaceUI){var h={trigger:[0.595,0.395],normal:[0.565,0.425]},f=!d.browser.msie||parseInt(d.browser.version,10)>6?0:0.45;m["datetime-local"]=function(e){if(d.fn.datepicker){var c=
d('<span role="group" class="input-datetime-local"><input type="text" class="input-datetime-local-date" /><input type="time" class="input-datetime-local-time" /></span>'),b=this.common(e,c,m["datetime-local"].attrs),i=d("input.input-datetime-local-date",c),r=i.datepicker(d.extend(y,o.datepicker,e.data("datepicker"))).bind("change",function(j){var n=i.attr("value")||"",g="";if(o.lazyDate){var t=d.data(i[0],"setDateLazyTimer");if(t){clearTimeout(t);d.removeData(i[0],"setDateLazyTimer")}}if(n){g=d("input.input-datetime-local-time",
c).attr("value")||"00:00";try{n=(n=d.datepicker.parseDate(i.datepicker("option","dateFormat"),n))?d.datepicker.formatDate("yy-mm-dd",n):i.attr("value")}catch(A){n=i.attr("value")}}n=!n&&!g?"":n+"T"+g;m["datetime-local"].blockAttr=true;e.attr("value",n);m["datetime-local"].blockAttr=false;j.stopImmediatePropagation();q(e[0],"input");q(e[0],"change")}).data("datepicker");r.dpDiv.addClass("input-date-datepicker-control").css({fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily")});d("input.input-datetime-local-time",
c).bind("change",function(j){var n=d.attr(this,"value"),g=["",""];if(n){g=e.attr("value").split("T");if(g.length<2||!g[0])g[0]=d.datepicker.formatDate("yy-mm-dd",new Date);if(g[1]=n)try{i.attr("value",d.datepicker.formatDate(i.datepicker("option","dateFormat"),d.datepicker.parseDate("yy-mm-dd",g[0])))}catch(t){}}g=!g[0]&&!g[1]?"":g.join("T");m["datetime-local"].blockAttr=true;e.attr("value",g);m["datetime-local"].blockAttr=false;j.stopImmediatePropagation();q(e[0],"input");q(e[0],"change")});d("input",
c).data("html5element",d.data(c[0],"html5element"));c.attr("aria-labeledby",b.label.attr("id"));b.label.bind("click",function(){i.focus();return false});if(b.css){c.css(b.css);if(b.outerWidth){c.outerWidth(b.outerWidth);b=c.width();var p=r.trigger[0]?h.trigger:h.normal;i.outerWidth(Math.floor(b*p[0]-f),true);d("input.input-datetime-local-time",c).outerWidth(Math.floor(b*p[1]-f),true);r.trigger[0]&&u(i,r.trigger)}}l.triggerDomUpdate(c[0]);d.each(["disabled","min","max","value","step"],function(j,n){e.attr(n,
function(g,t){return t||""})})}};m["datetime-local"].attrs={disabled:function(e,c,b){d("input.input-datetime-local-date",c).attr("disabled",!!b);d("input.input-datetime-local-time",c).attr("disabled",!!b)},step:function(e,c,b){d("input.input-datetime-local-time",c).attr("step",b)},min:function(e,c,b){b=b.split?b.split("T"):[];try{b=d.datepicker.parseDate("yy-mm-dd",b[0])}catch(i){b=false}b&&d("input.input-datetime-local-date",c).datepicker("option","minDate",b)},max:function(e,c,b){b=b.split?b.split("T"):
[];try{b=d.datepicker.parseDate("yy-mm-dd",b[0])}catch(i){b=false}b&&d("input.input-datetime-local-date",c).datepicker("option","maxDate",b)},value:function(e,c,b){var i;b=b.split?b.split("T"):[];try{i=d.datepicker.parseDate("yy-mm-dd",b[0])}catch(r){i=false}if(i){m["datetime-local"].blockAttr||a(d("input.input-datetime-local-date",c),i);d("input.input-datetime-local-time",c).attr("value",b[1]||"00:00")}else{d("input.input-datetime-local-date",c).attr("value",b[0]||"");d("input.input-datetime-local-time",
c).attr("value",b[1]||"")}}};m.date=function(e){if(d.fn.datepicker){var c=d('<input type="text" class="input-date" />'),b=this.common(e,c,m.date.attrs),i=c.datepicker(d.extend(y,o.datepicker,e.data("datepicker"))).bind("change",function(r){m.date.blockAttr=true;var p;if(o.lazyDate){var j=d.data(c[0],"setDateLazyTimer");if(j){clearTimeout(j);d.removeData(c[0],"setDateLazyTimer")}}try{p=(p=d.datepicker.parseDate(c.datepicker("option","dateFormat"),c.attr("value")))?d.datepicker.formatDate("yy-mm-dd",
p):c.attr("value")}catch(n){p=c.attr("value")}e.attr("value",p);m.date.blockAttr=false;r.stopImmediatePropagation();q(e[0],"input");q(e[0],"change")}).data("datepicker");i.dpDiv.addClass("input-date-datepicker-control").css({fontSize:c.css("fontSize"),fontFamily:c.css("fontFamily")});if(b.css){c.css(b.css);b.outerWidth&&c.outerWidth(b.outerWidth);i.trigger[0]&&u(c,i.trigger)}d.each(["disabled","min","max","value"],function(r,p){e.attr(p,function(j,n){return n||""})})}};m.date.attrs={disabled:function(e,
c,b){c.attr("disabled",!!b)},min:function(e,c,b){try{b=d.datepicker.parseDate("yy-mm-dd",b)}catch(i){b=false}b&&c.datepicker("option","minDate",b)},max:function(e,c,b){try{b=d.datepicker.parseDate("yy-mm-dd",b)}catch(i){b=false}b&&c.datepicker("option","maxDate",b)},value:function(e,c,b){if(!m.date.blockAttr){try{var i=d.datepicker.parseDate("yy-mm-dd",b)}catch(r){i=false}i?a(c,i):c.attr("value",b)}}}}if(!s.range||o.replaceUI){m.range=function(e){if(d.fn.slider){var c=d('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>'),
b=this.common(e,c,m.range.attrs),i=function(r,p){if(r.originalEvent){m.range.blockAttr=true;e.attr("value",p.value);m.range.blockAttr=false;r.type=="slidechange"?q(e[0],"change"):q(e[0],"input")}};d("span",c).attr("aria-labeledby",b.label.attr("id"));b.label.bind("click",function(){d("span",c).focus();return false});if(b.css){c.css(b.css);b.outerWidth&&c.outerWidth(b.outerWidth)}c.slider(d.extend({},o.slider,e.data("slider"),{change:i,slide:i}));d.each(["disabled","min","max","value","step"],function(r,
p){e.attr(p,function(j,n){return n||""})})}};m.range.attrs={disabled:function(e,c,b){b=!!b;c.slider("option","disabled",b);d("span",c).attr({"aria-disabled":b+"",tabindex:b?"-1":"0"})},min:function(e,c,b){b=b?b*1||0:0;c.slider("option","min",b);d("span",c).attr({"aria-valuemin":b})},max:function(e,c,b){b=b||b===0?b*1||100:100;c.slider("option","max",b);d("span",c).attr({"aria-valuemax":b})},value:function(e,c,b){b=d(e).attr("valueAsNumber");if(isNaN(b)){b=(c.slider("option","max")-c.slider("option",
"min"))/2;e.value=b}m.range.blockAttr||c.slider("option","value",b);d("span",c).attr({"aria-valuenow":b,"aria-valuetext":b})},step:function(e,c,b){b=b&&d.trim(b)?b*1||1:1;c.slider("option","step",b)}}}if(Modernizr.input.valueAsNumberSet&&Modernizr.input.valueAsDate&&(o.replaceUI||!Modernizr.inputtypes["datetime-local"]||!Modernizr.inputtypes.range)){s=function(){d.data(this,"inputUIReplace")&&d.attr(this,"value",d.attr(this,"value"))};l.onNodeNamesPropertyModify("input","valueAsNumber",s);l.onNodeNamesPropertyModify("input",
"valueAsDate",s)}d.each(["disabled","min","max","value","step"],function(e,c){l.onNodeNamesPropertyModify("input",c,{set:function(b){var i=d.data(this,"inputUIReplace");i&&i.methods[c]&&i.methods[c](this,i.visual,b)}})});if(!o.availabeLangs)o.availabeLangs="af ar ar-DZ az bg bs ca cs da de el en-AU en-GB en-NZ eo es et eu fa fi fo fr fr-CH gl he hr hu hy id is it ja ko kz lt lv ml ms nl no pl pt-BR rm ro ru sk sl sq sr sr-SR sv ta th tr uk vi zh-CN zh-HK zh-TW".split(" ");s=function(){if(d.datepicker){l.activeLang({langObj:d.datepicker.regional,
module:"forms-ext",callback:function(e){d("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option",d.extend(y,e,o.datepicker))}});d(k).unbind("jquery-uiReady.langchange input-widgetsReady.langchange")}};d(k).bind("jquery-uiReady.langchange input-widgetsReady.langchange",s);s();(function(){if(!Modernizr.input.valueAsNumber){var e=l.modules["forms-ext"].options,c=l.inputTypes,b=function(j,n,g){g=g||{};if(!("type"in g))g.type=d.attr(j,"type");if(!("step"in g))g.step=
l.getStep(j,g.type);if(!("valueAsNumber"in g))g.valueAsNumber=c[g.type].asNumber(d.attr(j,"value"));var t=g.step=="any"?c[g.type].step*c[g.type].stepScaleFactor:g.step;l.addMinMaxNumberToCache("min",d(j),g);l.addMinMaxNumberToCache("max",d(j),g);if(isNaN(g.valueAsNumber))g.valueAsNumber=c[g.type].stepBase||0;if(g.step!=="any")if((j=Math.round((g.valueAsNumber-(g.minAsnumber||0))%g.step*1E7)/1E7)&&Math.abs(j)!=g.step)g.valueAsNumber-=j;j=g.valueAsNumber+t*n;if(!isNaN(g.minAsNumber)&&j<g.minAsNumber)j=
g.valueAsNumber*n<g.minAsNumber?g.minAsNumber:isNaN(g.maxAsNumber)?Number.MAX_VALUE:g.maxAsNumber;else if(!isNaN(g.maxAsNumber)&&j>g.maxAsNumber)j=g.valueAsNumber*n>g.maxAsNumber?g.maxAsNumber:isNaN(g.minAsNumber)?Number.MIN_VALUE:g.minAsNumber;return Math.round(j*1E7)/1E7};l.modules["forms-ext"].getNextStep=b;var i=function(j,n,g){if(!(j.disabled||j.readOnly||d(g).hasClass("step-controls"))){d.attr(j,"value",c[n].numberToString(b(j,d(g).hasClass("step-up")?1:-1,{type:n})));d(j).unbind("blur.stepeventshim");
q(j,"input");if(k.activeElement){if(k.activeElement!==j)try{j.focus()}catch(t){}setTimeout(function(){if(k.activeElement!==j)try{j.focus()}catch(A){}d(j).one("blur.stepeventshim",function(){q(j,"change")})},0)}}};if(e.stepArrows){var r={set:function(){var j=d.data(this,"step-controls");if(j)j[this.disabled||this.readonly?"addClass":"removeClass"]("disabled-step-control")}};l.onNodeNamesPropertyModify("input","disabled",r);l.onNodeNamesPropertyModify("input","readonly",d.extend({},r))}var p={38:1,
40:-1};l.addReady(function(j,n){e.stepArrows&&d("input",j).add(n.filter("input")).each(function(){var g=d.attr(this,"type");if(!(!c[g]||!c[g].asNumber||!e.stepArrows||e.stepArrows!==true&&!e.stepArrows[g]||d(this).hasClass("has-step-controls"))){var t=this,A=d('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(this).bind("selectstart dragstart",function(){return false}).bind("mousedown mousepress",function(x){i(t,g,x.target);return false}).bind("mousepressstart mousepressend",
function(x){d(x.target)[x.type=="mousepressstart"?"addClass":"removeClass"]("mousepress-ui")}),B=d(this).addClass("has-step-controls").data("step-controls",A).attr({readonly:this.readOnly,disabled:this.disabled,autocomplete:"off",role:"spinbutton"}).bind(d.browser.msie?"keydown":"keypress",function(x){if(!(this.disabled||this.readOnly||!p[x.keyCode])){d.attr(this,"value",c[g].numberToString(b(this,p[x.keyCode],{type:g})));q(this,"input");return false}});if(e.calculateWidth){u(B,A);A.css("marginTop",
(B.outerHeight()-A.outerHeight())/2)}}})})}})();l.addReady(function(e,c){d(k).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",function(){if(d.datepicker||d.fn.slider)m(e,c);d.datepicker&&d.fn.slider&&d(k).unbind(".initinputui")})})});
