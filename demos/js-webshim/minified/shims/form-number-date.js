jQuery.webshims.register("forms-ext",function(e,j,v){if(!(Modernizr.input.valueAsNumber&&Modernizr.input.valueAsDate)){j.getStep=function(b,d){var a=e.attr(b,"step");if(a==="any")return a;d=d||r(b);if(!i[d]||!i[d].step)return a;a=p.number.asNumber(a);return(!isNaN(a)&&a>0?a:i[d].step)*i[d].stepScaleFactor};j.addMinMaxNumberToCache=function(b,d,a){if(!(b+"AsNumber"in a)){a[b+"AsNumber"]=i[a.type].asNumber(d.attr(b));if(isNaN(a[b+"AsNumber"])&&b+"Default"in i[a.type])a[b+"AsNumber"]=i[a.type][b+"Default"]}};
var o=parseInt("NaN",10),i=j.inputTypes,t=function(b){return typeof b=="number"||b&&b==b*1},q=function(b){return Modernizr.input.valueAsNumber&&e('<input type="'+b+'" />').attr("type")===b},r=function(b){return(b.getAttribute("type")||"").toLowerCase()},x=j.addMinMaxNumberToCache,s=function(b,d){b=""+b;d-=b.length;for(var a=0;a<d;a++)b="0"+b;return b};j.addValidityRule("stepMismatch",function(b,d,a){if(d==="")return false;if(!("type"in a))a.type=r(b[0]);if(a.type=="date")return false;var c=false;
if(i[a.type]&&i[a.type].step){if(!("step"in a))a.step=j.getStep(b[0],a.type);if(a.step=="any")return false;if(!("valueAsNumber"in a))a.valueAsNumber=i[a.type].asNumber(d);if(isNaN(a.valueAsNumber))return false;x("min",b,a);b=a.minAsNumber;if(isNaN(b))b=i[a.type].stepBase||0;c=Math.abs((a.valueAsNumber-b)%a.step);c=!(c<=1.0E-7||Math.abs(c-a.step)<=1.0E-7)}return c});[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(b){j.addValidityRule(b.name,
function(d,a,c){var g=false;if(a==="")return g;if(!("type"in c))c.type=r(d[0]);if(i[c.type]&&i[c.type].asNumber){if(!("valueAsNumber"in c))c.valueAsNumber=i[c.type].asNumber(a);if(isNaN(c.valueAsNumber))return false;x(b.attr,d,c);if(isNaN(c[b.attr+"AsNumber"]))return g;g=c[b.attr+"AsNumber"]*b.factor<c.valueAsNumber*b.factor-1.0E-7}return g})});var k=j.defineNodeNameProperty("input","valueAsNumber",{get:function(){var b=r(this);return i[b]&&i[b].asNumber?i[b].asNumber(e.attr(this,"value")):o},set:function(b){var d=
r(this);if(i[d]&&i[d].numberToString)if(isNaN(b))e.attr(this,"value","");else{d=i[d].numberToString(b);if(d!==false)e.attr(this,"value",d);else throw"INVALID_STATE_ERR: DOM Exception 11";}else k._supset&&k._supset.call(this,arguments)}}),w=j.defineNodeNameProperty("input","valueAsDate",{get:function(){var b=r(this);return i[b]&&i[b].asDate&&!i[b].noAsDate?i[b].asDate(e.attr(this,"value")):w._supget&&w._supget.call(this)},set:function(b){var d=r(this);if(i[d]&&i[d].dateToString){if(!v.noHTMLExtFixes)throw"there are some serious issues in opera's implementation. don't use!";
if(b===null){e.attr(this,"value","");return""}d=i[d].dateToString(b);if(d!==false){e.attr(this,"value",d);return d}else throw"INVALID_STATE_ERR: DOM Exception 11";}else return w._supset&&w._supset(this,arguments)||null}}),p={number:{mismatch:function(b){return!t(b)},step:1,stepScaleFactor:1,asNumber:function(b){return t(b)?b*1:o},numberToString:function(b){return t(b)?b:false}},range:{minDefault:0,maxDefault:100},date:{mismatch:function(b){if(!b||!b.split||!/\d$/.test(b))return true;var d=b.split(/\u002D/);
if(d.length!==3)return true;var a=false;e.each(d,function(c,g){if(!(t(g)||g&&g=="0"+g*1)){a=true;return false}});if(a)return a;if(d[0].length!==4||d[1].length!=2||d[1]>12||d[2].length!=2||d[2]>33)a=true;return b!==this.dateToString(this.asDate(b,true))},step:1,stepScaleFactor:864E5,asDate:function(b,d){if(!d&&this.mismatch(b))return null;return new Date(this.asNumber(b,true))},asNumber:function(b,d){var a=o;if(d||!this.mismatch(b)){b=b.split(/\u002D/);a=Date.UTC(b[0],b[1]-1,b[2])}return a},numberToString:function(b){return t(b)?
this.dateToString(new Date(b*1)):false},dateToString:function(b){return b&&b.getFullYear?b.getUTCFullYear()+"-"+s(b.getUTCMonth()+1,2)+"-"+s(b.getUTCDate(),2):false}},time:{mismatch:function(b,d){if(!b||!b.split||!/\d$/.test(b))return true;b=b.split(/\u003A/);if(b.length<2||b.length>3)return true;var a=false,c;if(b[2]){b[2]=b[2].split(/\u002E/);c=parseInt(b[2][1],10);b[2]=b[2][0]}e.each(b,function(g,l){if(!(t(l)||l&&l=="0"+l*1)||l.length!==2){a=true;return false}});if(a)return true;if(b[0]>23||b[0]<
0||b[1]>59||b[1]<0)return true;if(b[2]&&(b[2]>59||b[2]<0))return true;if(c&&isNaN(c))return true;if(c)if(c<100)c*=100;else if(c<10)c*=10;return d===true?[b,c]:false},step:60,stepBase:0,stepScaleFactor:1E3,asDate:function(b){b=new Date(this.asNumber(b));return isNaN(b)?null:b},asNumber:function(b){var d=o;b=this.mismatch(b,true);if(b!==true){d=Date.UTC("1970",0,1,b[0][0],b[0][1],b[0][2]||0);if(b[1])d+=b[1]}return d},dateToString:function(b){if(b&&b.getUTCHours){var d=s(b.getUTCHours(),2)+":"+s(b.getUTCMinutes(),
2),a=b.getSeconds();if(a!="0")d+=":"+s(a,2);a=b.getUTCMilliseconds();if(a!="0")d+="."+s(a,3);return d}else return false}},"datetime-local":{mismatch:function(b,d){if(!b||!b.split||(b+"special").split(/\u0054/).length!==2)return true;b=b.split(/\u0054/);return i.date.mismatch(b[0])||i.time.mismatch(b[1],d)},noAsDate:true,asDate:function(b){b=new Date(this.asNumber(b));return isNaN(b)?null:b},asNumber:function(b){var d=o,a=this.mismatch(b,true);if(a!==true){b=b.split(/\u0054/)[0].split(/\u002D/);d=
Date.UTC(b[0],b[1]-1,b[2],a[0][0],a[0][1],a[0][2]||0);if(a[1])d+=a[1]}return d},dateToString:function(b,d){return i.date.dateToString(b)+"T"+i.time.dateToString(b,d)}}};q("number")||j.addInputType("number",p.number);q("range")||j.addInputType("range",e.extend({},p.number,p.range));q("date")||j.addInputType("date",p.date);q("time")||j.addInputType("time",e.extend({},p.date,p.time));q("datetime-local")||j.addInputType("datetime-local",e.extend({},p.date,p.time,p["datetime-local"]));j.defineNodeNameProperty("input",
"type",{get:function(){var b=r(this);return j.inputTypes[b]?b:this.type||this.getAttribute("type")}})}});
jQuery.webshims.ready("form-core form-extend",function(e,j,v,o){var i=j.triggerInlineForm;v=Modernizr.inputtypes;var t=function(d,a){var c={w:d.width()};if(c.w){var g={mL:parseInt(a.css("marginLeft"),10)||0,w:a.outerWidth()};c.mR=parseInt(d.css("marginRight"),10)||0;c.mR&&d.css("marginRight",0);if(g.mL<=g.w*-1){a.css("marginRight",Math.floor(Math.abs(g.w+g.mL)+c.mR));d.css("paddingRight",(parseInt(d.css("paddingRight"),10)||0)+Math.abs(g.mL));d.css("width",Math.floor(c.w+g.mL))}else{a.css("marginRight",
c.mR);d.css("width",Math.floor(c.w-g.mL-g.w))}}},q=e.webshims.cfg["forms-ext"],r,x=e([]),s,k=function(d,a){e("input",d).add(a.filter("input")).each(function(){var c=e.attr(this,"type");k[c]&&!e.data(this,"inputUIReplace")&&k[c](e(this))})};k.common=function(d,a,c){Modernizr.formvalidation&&d.bind("firstinvalid",function(h){clearTimeout(r);s||(r=setTimeout(function(){!s&&!h.isInvalidUIPrevented()&&j.validityAlert.showFor(h.target)},20))});var g=d.attr("id");g={css:{marginRight:d.css("marginRight"),
marginLeft:d.css("marginLeft")},outerWidth:d.outerWidth(),label:g?e('label[for="'+g+'"]',d[0].form):x};var l=j.getID(g.label);a.addClass(d[0].className).data("html5element",d);d.after(a).data("inputUIReplace",{visual:a,methods:c}).hide();if(a.length==1&&!e("*",a)[0]){a.attr("aria-labeledby",l);g.label.bind("click",function(){a.focus();return false})}return g};Modernizr.formvalidation&&["input","form"].forEach(function(d){var a=j.defineNodeNameProperty(d,"checkValidity",{value:function(){s=true;var c=
a._supvalue.apply(this,arguments);s=false;return c}})});if(!v.datetime||q.replaceUI){var w={trigger:[0.65,0.35],normal:[0.57,0.43]},p=!e.browser.msie||parseInt(e.browser.version,10)>6?0:0.45;k["datetime-local"]=function(d){if(e.fn.datepicker){var a=e('<span role="group" class="input-datetime-local"><input type="text" class="input-datetime-local-date" /><input type="time" class="input-datetime-local-time" /></span>'),c=this.common(d,a,k["datetime-local"].attrs),g=e("input.input-datetime-local-date",
a),l=g.datepicker(e.extend({},q.datepicker,d.data("datepicker"))).bind("change",function(m){var f=g.attr("value")||"",n="";if(f){n=e("input.input-datetime-local-time",a).attr("value")||"00:00";try{f=(f=e.datepicker.parseDate(g.datepicker("option","dateFormat"),f))?e.datepicker.formatDate("yy-mm-dd",f):g.attr("value")}catch(u){f=g.attr("value")}}f=!f&&!n?"":f+"T"+n;k["datetime-local"].blockAttr=true;d.attr("value",f);k["datetime-local"].blockAttr=false;m.stopImmediatePropagation();i(d[0],"input");
i(d[0],"change")}).data("datepicker");l.dpDiv.addClass("input-date-datepicker-control").css({fontSize:g.css("fontSize"),fontFamily:g.css("fontFamily")});e("input.input-datetime-local-time",a).bind("change",function(m){var f=e.attr(this,"value"),n=["",""];if(f){n=d.attr("value").split("T");if(n.length<2||!n[0])n[0]=e.datepicker.formatDate("yy-mm-dd",new Date);if(n[1]=f)try{g.attr("value",e.datepicker.formatDate(g.datepicker("option","dateFormat"),e.datepicker.parseDate("yy-mm-dd",n[0])))}catch(u){}}n=
!n[0]&&!n[1]?"":n.join("T");k["datetime-local"].blockAttr=true;d.attr("value",n);k["datetime-local"].blockAttr=false;m.stopImmediatePropagation();i(d[0],"input");i(d[0],"change")});e("input",a).data("html5element",e.data(a[0],"html5element"));a.attr("aria-labeledby",c.label.attr("id"));c.label.bind("click",function(){g.focus();return false});if(c.css){a.css(c.css);if(c.outerWidth){a.outerWidth(c.outerWidth);c=a.width();var h=l.trigger[0]?w.trigger:w.normal;g.outerWidth(Math.floor(c*h[0]-p),true);
e("input.input-datetime-local-time",a).outerWidth(Math.floor(c*h[1]-p),true);l.trigger[0]&&t(g,l.trigger)}}j.triggerDomUpdate(a[0]);e.each(["disabled","min","max","value","step"],function(m,f){d.attr(f,function(n,u){return u||""})})}};k["datetime-local"].attrs={disabled:function(d,a,c){e("input.input-datetime-local-date",a).datepicker("option","disabled",!!c);e("input.input-datetime-local-time",a).attr("disabled",!!c)},step:function(d,a,c){e("input.input-datetime-local-time",a).attr("step",c)},min:function(d,
a,c){c=c.split?c.split("T"):[];try{c=e.datepicker.parseDate("yy-mm-dd",c[0])}catch(g){c=false}c&&e("input.input-datetime-local-date",a).datepicker("option","minDate",c)},max:function(d,a,c){c=c.split?c.split("T"):[];try{c=e.datepicker.parseDate("yy-mm-dd",c[0])}catch(g){c=false}c&&e("input.input-datetime-local-date",a).datepicker("option","maxDate",c)},value:function(d,a,c){var g;c=c.split?c.split("T"):[];try{g=e.datepicker.parseDate("yy-mm-dd",c[0])}catch(l){g=false}if(g){k["datetime-local"].blockAttr||
e("input.input-datetime-local-date",a).datepicker("setDate",g);e("input.input-datetime-local-time",a).attr("value",c[1]||"00:00")}else{e("input.input-datetime-local-date",a).attr("value",c[0]||"");e("input.input-datetime-local-time",a).attr("value",c[1]||"")}}};k.date=function(d){if(e.fn.datepicker){var a=e('<input type="text" class="input-date" />'),c=this.common(d,a,k.date.attrs),g=a.datepicker(e.extend({},q.datepicker,d.data("datepicker"))).bind("change",function(l){k.date.blockAttr=true;var h;
try{h=(h=e.datepicker.parseDate(a.datepicker("option","dateFormat"),a.attr("value")))?e.datepicker.formatDate("yy-mm-dd",h):a.attr("value")}catch(m){h=a.attr("value")}d.attr("value",h);k.date.blockAttr=false;l.stopImmediatePropagation();i(d[0],"input");i(d[0],"change")}).data("datepicker");g.dpDiv.addClass("input-date-datepicker-control").css({fontSize:a.css("fontSize"),fontFamily:a.css("fontFamily")});if(c.css){a.css(c.css);c.outerWidth&&a.outerWidth(c.outerWidth);g.trigger[0]&&t(a,g.trigger)}e.each(["disabled",
"min","max","value"],function(l,h){d.attr(h,function(m,f){return f||""})})}};k.date.attrs={disabled:function(d,a,c){a.datepicker("option","disabled",!!c)},min:function(d,a,c){try{c=e.datepicker.parseDate("yy-mm-dd",c)}catch(g){c=false}c&&a.datepicker("option","minDate",c)},max:function(d,a,c){try{c=e.datepicker.parseDate("yy-mm-dd",c)}catch(g){c=false}c&&a.datepicker("option","maxDate",c)},value:function(d,a,c){if(!k.date.blockAttr){try{var g=e.datepicker.parseDate("yy-mm-dd",c)}catch(l){g=false}g?
a.datepicker("setDate",g):a.attr("value",c)}}}}if(!v.range||q.replaceUI){k.range=function(d){if(e.fn.slider){var a=e('<span class="input-range"><span class="ui-slider-handle" role="slider" tabindex="0" /></span>'),c=this.common(d,a,k.range.attrs),g=function(l,h){if(l.originalEvent){k.range.blockAttr=true;d.attr("value",h.value);k.range.blockAttr=false;l.type=="slidechange"?i(d[0],"change"):i(d[0],"input")}};e("span",a).attr("aria-labeledby",c.label.attr("id"));c.label.bind("click",function(){e("span",
a).focus();return false});if(c.css){a.css(c.css);c.outerWidth&&a.outerWidth(c.outerWidth)}a.slider(e.extend({},q.slider,d.data("slider"),{change:g,slide:g}));e.each(["disabled","min","max","value","step"],function(l,h){d.attr(h,function(m,f){return f||""})})}};k.range.attrs={disabled:function(d,a,c){c=!!c;a.slider("option","disabled",c);e("span",a).attr({"aria-disabled":c+"",tabindex:c?"-1":"0"})},min:function(d,a,c){c=c?c*1||0:0;a.slider("option","min",c);e("span",a).attr({"aria-valuemin":c})},max:function(d,
a,c){c=c||c===0?c*1||100:100;a.slider("option","max",c);e("span",a).attr({"aria-valuemax":c})},value:function(d,a,c){c=e(d).attr("valueAsNumber");if(isNaN(c)){c=(a.slider("option","max")-a.slider("option","min"))/2;d.value=c}k.range.blockAttr||a.slider("option","value",c);e("span",a).attr({"aria-valuenow":c,"aria-valuetext":c})},step:function(d,a,c){c=c&&e.trim(c)?c*1||1:1;a.slider("option","step",c)}}}e.each(["disabled","min","max","value","step"],function(d,a){j.onNodeNamesPropertyModify("input",
a,{set:function(c){var g=e.data(this,"inputUIReplace");g&&g.methods[a]&&g.methods[a](this,g.visual,c)}})});var b=function(d){if(d){d=e.extend({},d,q.datepicker);e("input.hasDatepicker").filter(".input-date, .input-datetime-local-date").datepicker("option",d).each(function(){var a=e.data(this,"html5element");a&&e.each(["disabled","min","max","value"],function(c,g){a.attr(g,function(l,h){return h||""})})});e.datepicker.setDefaults(d)}};v=function(){if(e.datepicker){j.ready("webshimLocalization",function(){j.activeLang(e.datepicker.regional,
"forms-ext",b)});e(o).unbind("jquery-uiReady.langchange input-widgetsReady.langchange")}};e(o).bind("jquery-uiReady.langchange input-widgetsReady.langchange",v);v();(function(){if(!Modernizr.input.valueAsNumber){var d=j.modules["forms-ext"].options,a=j.inputTypes,c=function(h,m,f){f=f||{};if(!("type"in f))f.type=e.attr(h,"type");if(!("step"in f))f.step=j.getStep(h,f.type);if(!("valueAsNumber"in f))f.valueAsNumber=a[f.type].asNumber(e.attr(h,"value"));var n=f.step=="any"?a[f.type].step*a[f.type].stepScaleFactor:
f.step;j.addMinMaxNumberToCache("min",e(h),f);j.addMinMaxNumberToCache("max",e(h),f);if(isNaN(f.valueAsNumber))f.valueAsNumber=a[f.type].stepBase||0;if(f.step!=="any")if((h=Math.round((f.valueAsNumber-(f.minAsnumber||0))%f.step*1E7)/1E7)&&Math.abs(h)!=f.step)f.valueAsNumber-=h;h=f.valueAsNumber+n*m;if(!isNaN(f.minAsNumber)&&h<f.minAsNumber)h=f.valueAsNumber*m<f.minAsNumber?f.minAsNumber:isNaN(f.maxAsNumber)?Number.MAX_VALUE:f.maxAsNumber;else if(!isNaN(f.maxAsNumber)&&h>f.maxAsNumber)h=f.valueAsNumber*
m>f.maxAsNumber?f.maxAsNumber:isNaN(f.minAsNumber)?Number.MIN_VALUE:f.minAsNumber;return Math.round(h*1E7)/1E7};j.modules["forms-ext"].getNextStep=c;var g=function(h,m,f){if(!(h.disabled||h.readOnly||e(f).hasClass("step-controls"))){e.attr(h,"value",a[m].numberToString(c(h,e(f).hasClass("step-up")?1:-1,{type:m})));e(h).unbind("blur.stepeventshim");i(h,"input");if(o.activeElement){if(o.activeElement!==h)try{h.focus()}catch(n){}setTimeout(function(){if(o.activeElement!==h)try{h.focus()}catch(u){}e(h).one("blur.stepeventshim",
function(){i(h,"change")})},0)}}};if(d.stepArrows){j.onNodeNamesPropertyModify("input","disabled",{set:function(h){var m=e.data(h,"step-controls");if(m)m[h.disabled||h.readonly?"addClass":"removeClass"]("disabled-step-control")}});j.onNodeNamesPropertyModify("input","readonly",{set:function(h){var m=e.data(h,"step-controls");if(m)m[h.disabled||h.readonly?"addClass":"removeClass"]("disabled-step-control")}})}var l={38:1,40:-1};j.addReady(function(h,m){d.stepArrows&&e("input",h).add(m.filter("input")).each(function(){var f=
e.attr(this,"type");if(!(!a[f]||!a[f].asNumber||!d.stepArrows||d.stepArrows!==true&&!d.stepArrows[f]||e(this).hasClass("has-step-controls"))){var n=this,u=e('<span class="step-controls" unselectable="on"><span class="step-up" /><span class="step-down" /></span>').insertAfter(this).bind("selectstart dragstart",function(){return false}).bind("mousedown mousepress",function(y){g(n,f,y.target);return false}),z=e(this).addClass("has-step-controls").data("step-controls",u).attr({readonly:this.readOnly,
disabled:this.disabled,autocomplete:"off",role:"spinbutton"}).bind(e.browser.msie?"keydown":"keypress",function(y){if(!(this.disabled||this.readOnly||!l[y.keyCode])){e.attr(this,"value",a[f].numberToString(c(this,l[y.keyCode],{type:f})));i(this,"input");return false}});if(d.calculateWidth){t(z,u);u.css("marginTop",(z.outerHeight()-u.outerHeight())/2)}}})})}})();j.cfg.waitReady&&e.readyWait++;j.addReady(function(d,a){e(o).bind("jquery-uiReady.initinputui input-widgetsReady.initinputui",function(){if(e.datepicker||
e.fn.slider)k(d,a);e.datepicker&&e.fn.slider&&e(o).unbind(".initinputui");j.cfg.waitReady&&d===o&&e.ready(true)})})});
