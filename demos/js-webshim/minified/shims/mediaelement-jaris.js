jQuery.webshims.register("mediaelement-jaris",function(d,f,l,D,p,j){var m=f.mediaelement,x=l.swfobject,r=Modernizr.audio&&Modernizr.video,y=x.hasFlashPlayerVersion("9.0.115"),q=0,l={paused:!0,ended:!1,currentSrc:"",duration:l.NaN,readyState:0,networkState:0,videoHeight:0,videoWidth:0,error:null,buffered:{start:function(b){if(b)f.error("buffered index size error");else return 0},end:function(b){if(b)f.error("buffered index size error");else return 0},length:0}},E=Object.keys(l),z={currentTime:0,volume:1,
muted:!1};Object.keys(z);var A=d.extend({isActive:"html5",activating:"html5",wasSwfReady:!1,_bufferedEnd:0,_bufferedStart:0,currentTime:0,_ppFlag:p},l,z),i=function(b){return(b=f.data(b,"mediaelement"))&&"third"==b.isActive?b:null},g=function(b,a){a=d.Event(a);a.preventDefault();d.event.trigger(a,p,b)},F=j.playerPath||f.cfg.basePath+"swf/"+(j.playerName||"JarisFLVPlayer.swf");f.extendUNDEFProp(j.params,{allowscriptaccess:"always",allowfullscreen:"true",wmode:"transparent",allowNetworking:"all"});
f.extendUNDEFProp(j.vars,{controltype:"1",jsapi:"1"});f.extendUNDEFProp(j.attrs,{bgcolor:"#000000"});var h=function(b,a){3>b&&clearTimeout(a._canplaythroughTimer);if(3<=b&&3>a.readyState)a.readyState=b,g(a._elem,"canplay"),a.paused||g(a._elem,"playing"),clearTimeout(a._canplaythroughTimer),a._canplaythroughTimer=setTimeout(function(){h(4,a)},4E3);if(4<=b&&4>a.readyState)a.readyState=b,g(a._elem,"canplaythrough");a.readyState=b};d.extend(d.event.customEvent,{updatemediaelementdimensions:!0,flashblocker:!0,
swfstageresize:!0,mediaelementapichange:!0});m.jarisEvent={};var s,n={onPlayPause:function(b,a,c){var e;if(null==c)try{e=a.api.api_get("isPlaying")}catch(d){}else e=c;if(e==a.paused)a.paused=!e,b=a.paused?"pause":"play",a._ppFlag=!0,g(a._elem,b),3>a.readyState&&h(3,a),a.paused||g(a._elem,"playing")},onNotBuffering:function(b,a){h(3,a)},onDataInitialized:function(b,a){var c=a.duration;a.duration=b.duration;if(c!==a.duration){a.videoHeight=b.height;a.videoWidth=b.width;if(!a.networkState)a.networkState=
2;1>a.readyState&&h(1,a);a.duration&&g(a._elem,"durationchange");g(a._elem,"loadedmetadata")}},onBuffering:function(b,a){if(a.ended)a.ended=!1;h(1,a);g(a._elem,"waiting")},onTimeUpdate:function(b,a){if(a.ended)a.ended=!1;3>a.readyState&&(h(3,a),g(a._elem,"playing"));g(a._elem,"timeupdate")},onProgress:function(b,a){if(a.ended)a.ended=!1;if(a.duration&&!isNaN(a.duration)){var c=b.loaded/b.total;if(0.02<c&&0.2>c)h(3,a);else if(0.2<c){if(0.99<c)a.networkState=1;h(4,a)}if(a._bufferedEnd&&a._bufferedEnd>
c)a._bufferedStart=a.currentTime||0;a._bufferedEnd=c;a.buffered.length=1;d.event.trigger("progress",p,a._elem,!0)}},onPlaybackFinished:function(b,a){4>a.readyState&&h(4,a);a.ended=!0;g(a._elem,"ended")},onVolumeChange:function(b,a){if(a.volume!=b.volume||a.muted!=b.mute)a.volume=b.volume,a.muted=b.mute,g(a._elem,"volumechange")},ready:function(){var b=function(a){var b=!0;try{a.api.api_get("volume")}catch(e){b=!1}return b};return function(a,c){var e=0,g=function(){9<e?c.tryedReframeing=0:(e++,c.tryedReframeing++,
b(c)?(c.wasSwfReady=!0,c.tryedReframeing=0,G(c),H(c)):6>c.tryedReframeing?3>c.tryedReframeing?(c.reframeTimer=setTimeout(g,9),c.shadowElem.css({overflow:"visible"}),setTimeout(function(){c.shadowElem.css({overflow:"hidden"})},1)):(c.shadowElem.css({overflow:"hidden"}),d(c._elem).mediaLoad()):(clearTimeout(c.reframeTimer),f.error("reframing error")))};if(c&&c.api){if(!c.tryedReframeing)c.tryedReframeing=0;clearTimeout(s);clearTimeout(c.reframeTimer);c.shadowElem.removeClass("flashblocker-assumed");
e?c.reframeTimer=setTimeout(g,9):g()}}}()};n.onMute=n.onVolumeChange;var G=function(b){var a=b.actionQueue.length,c=0,e;if(a&&"third"==b.isActive)for(;b.actionQueue.length&&a>c;){c++;e=b.actionQueue.shift();try{b.api[e.fn].apply(b.api,e.args)}catch(d){f.warn(d)}}if(b.actionQueue.length)b.actionQueue=[]},H=function(b){b&&(b._ppFlag===p&&d.prop(b._elem,"autoplay")||!b.paused)&&setTimeout(function(){if("third"==b.isActive&&(b._ppFlag===p||!b.paused))try{d(b._elem).play(),b._ppFlag=!0}catch(a){}},1)},
u=d.noop;if(r){var I={play:1,playing:1},B="play,pause,playing,canplay,progress,waiting,ended,loadedmetadata,durationchange,emptied".split(","),C=B.map(function(b){return b+".webshimspolyfill"}).join(" "),J=function(b){var a=f.data(b.target,"mediaelement");a&&(b.originalEvent&&b.originalEvent.type===b.type)==("third"==a.activating)&&(b.stopImmediatePropagation(),I[b.type]&&a.isActive!=a.activating&&d(b.target).pause())},u=function(b){d(b).off(C).on(C,J);B.forEach(function(a){f.moveToFirstEvent(b,a)})};
u(D)}m.setActive=function(b,a,c){c||(c=f.data(b,"mediaelement"));if(c&&c.isActive!=a){"html5"!=a&&"third"!=a&&f.warn("wrong type for mediaelement activating: "+a);var e=f.data(b,"shadowData");c.activating=a;d(b).pause();c.isActive=a;"third"==a?(e.shadowElement=e.shadowFocusElement=c.shadowElem[0],d(b).addClass("swf-api-active nonnative-api-active").hide().getShadowElement().show()):(d(b).removeClass("swf-api-active nonnative-api-active").show().getShadowElement().hide(),e.shadowElement=e.shadowFocusElement=
!1);d(b).trigger("mediaelementapichange")}};var K=function(){var b="_bufferedEnd,_bufferedStart,_ppFlag,currentSrc,currentTime,duration,ended,networkState,paused,videoHeight,videoWidth".split(","),a=b.length;return function(c){if(c){var e=a,d=c.networkState;for(h(0,c);--e;)delete c[b[e]];c.actionQueue=[];c.buffered.length=0;d&&g(c._elem,"emptied")}}}(),v=function(b,a){var c=b._elem,e=b.shadowElem;d(c)[a?"addClass":"removeClass"]("webshims-controls");"audio"==b._elemNodeName&&!a?e.css({width:0,height:0}):
e.css({width:c.style.width||d(c).width(),height:c.style.height||d(c).height()})};m.createSWF=function(b,a,c){if(y){1>q?q=1:q++;var e=d.extend({},j.vars,{poster:d.prop(b,"poster")||"",source:a.srcProp}),g=d(b).data("vars")||{};c||(c=f.data(b,"mediaelement"));var w=d.prop(b,"controls"),k="jarisplayer-"+f.getID(b),h=d.extend({},j.params,d(b).data("params")),i=b.nodeName.toLowerCase(),l=d.extend({},j.attrs,{name:k,id:k},d(b).data("attrs")),o;c&&c.swfCreated?(clearInterval(c.readyInterval),m.setActive(b,
"third",c),c.currentSrc=a.srcProp,c.shadowElem.html('<div id="'+k+'">'),c.api=!1,c.actionQueue=[],o=c.shadowElem,K(c)):(o=d('<div class="polyfill-'+i+' polyfill-mediaelement" id="wrapper-'+k+'"><div id="'+k+'"></div>').css({position:"relative",overflow:"hidden"}),c=f.data(b,"mediaelement",f.objectCreate(A,{actionQueue:{value:[]},shadowElem:{value:o},_elemNodeName:{value:i},_elem:{value:b},currentSrc:{value:a.srcProp},swfCreated:{value:!0},id:{value:k.replace(/-/g,"")},buffered:{value:{start:function(a){if(a>=
c.buffered.length)f.error("buffered index size error");else return 0},end:function(a){if(a>=c.buffered.length)f.error("buffered index size error");else return(c.duration-c._bufferedStart)*c._bufferedEnd+c._bufferedStart},length:0}}})),v(c,w),o.insertBefore(b),r&&d.extend(c,{volume:d.prop(b,"volume"),muted:d.prop(b,"muted")}),f.addShadowDom(b,o),u(b),m.setActive(b,"third",c),d(b).on("updatemediaelementdimensions updateshadowdom",function(){v(c,d.prop(b,"controls"))}));m.jarisEvent[c.id]||(m.jarisEvent[c.id]=
function(a){if("ready"==a.type)n[a.type](a,c);else{c.currentTime=a.position;if(a.duration&&c.duration!=a.duration&&isNaN(c.duration))n.onDataInitialized(a,c);if(!c._ppFlag&&"onPlayPause"!=a.type)n.onPlayPause(a,c);if(n[a.type])n[a.type](a,c)}});d(function(){clearInterval(c.readyInterval);clearInterval(c.flashBlock);c.readyInterval=setTimeout(function(){d.extend(e,{id:k,evtId:c.id,controls:""+w,autostart:"false"},g);if("audio/mpeg"==a.type||"audio/mp3"==a.type)e.type="audio",e.streamtype="file";else if("video/youtube"==
a.type)e.streamtype="youtube";j.changeSWF(e,b,a,c,"embed");x.embedSWF(F,k,"100%","100%","9.0.0",!1,e,h,l,function(a){if(a.success)c.api=a.ref,w||d(a.ref).attr("tabindex","-1").css("outline","none"),c.flashBlock=setTimeout(function(){if(!a.ref.parentNode&&o[0].parentNode||"none"==a.ref.style.display)o.addClass("flashblocker-assumed"),d(b).trigger("flashblocker"),f.warn("flashblocker assumed");d(a.ref).css({minHeight:"2px",minWidth:"2px",display:"block"})},9),s||(clearTimeout(s),s=setTimeout(function(){var b=
d(a.ref);1<b[0].offsetWidth&&1<b[0].offsetHeight&&0===location.protocol.indexOf("file:")?f.error("Add your local development-directory to the local-trusted security sandbox:  http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html"):(2>b[0].offsetWidth||2>b[0].offsetHeight)&&f.warn("JS-SWF connection can't be established on hidden or unconnected flash objects")},8E3))})},9)})}else setTimeout(function(){d(b).mediaLoad()},1)};var t=function(b,a,c,d){return(d=d||i(b))?
(d.api&&d.api[a]?d.api[a].apply(d.api,c||[]):(d.actionQueue.push({fn:a,args:c}),10<d.actionQueue.length&&setTimeout(function(){5<d.actionQueue.length&&d.actionQueue.shift()},99)),d):!1};["audio","video"].forEach(function(b){var a={},c,e=function(d){"audio"==b&&("videoHeight"==d||"videoWidth"==d)||(a[d]={get:function(){var a=i(this);return a?a[d]:r&&c[d].prop._supget?c[d].prop._supget.apply(this):A[d]},writeable:!1})},h=function(b,c){e(b);delete a[b].writeable;a[b].set=c};h("volume",function(a){var b=
i(this);if(b){if(a*=1,!isNaN(a)&&((0>a||1<a)&&f.error("volume greater or less than allowed "+a/100),t(this,"api_volume",[a],b),b.volume!=a))b.volume=a,g(b._elem,"volumechange")}else if(c.volume.prop._supset)return c.volume.prop._supset.apply(this,arguments)});h("muted",function(a){var b=i(this);if(b){if(a=!!a,t(this,"api_volume",[a?0:b.volume||1],b),b.muted!=a)b.muted=a,g(b._elem,"volumechange")}else if(c.muted.prop._supset)return c.muted.prop._supset.apply(this,arguments)});h("currentTime",function(a){var b=
i(this);if(b)a*=1,isNaN(a)||t(this,"api_seek",[a],b);else if(c.currentTime.prop._supset)return c.currentTime.prop._supset.apply(this,arguments)});["play","pause"].forEach(function(b){a[b]={value:function(){var a=i(this);if(a){if(a.stopPlayPause&&clearTimeout(a.stopPlayPause),t(this,"play"==b?"api_play":"api_pause",[],a),a._ppFlag=!0,a.paused!=("play"!=b))a.paused="play"!=b,g(a._elem,b)}else if(c[b].prop._supvalue)return c[b].prop._supvalue.apply(this,arguments)}}});E.forEach(e);f.onNodeNamesPropertyModify(b,
"controls",function(a,c){var e=i(this);d(this)[c?"addClass":"removeClass"]("webshims-controls");e&&(f.warn("changing controls currently not fully supported with jaris player"),"audio"==b&&v(e,c),e.api&&d(this).mediaLoad())});c=f.defineNodeNameProperties(b,a,"prop")});if(y){var L=d.cleanData,M=d.browser.msie&&9>f.browserVersion,N={object:1,OBJECT:1};d.cleanData=function(b){var a,c,d;if(b&&(c=b.length)&&q)for(a=0;a<c;a++)if(N[b[a].nodeName]){if("api_pause"in b[a]){q--;try{b[a].api_pause()}catch(f){}}if(M)try{for(d in b[a])"function"==
typeof b[a][d]&&(b[a][d]=null)}catch(g){}}return L.apply(this,arguments)}}r||(["poster","src"].forEach(function(b){f.defineNodeNamesProperty("src"==b?["audio","video","source"]:["video"],b,{reflect:!0,propType:"src"})}),["autoplay","controls"].forEach(function(b){f.defineNodeNamesBooleanProperty(["audio","video"],b)}),f.defineNodeNamesProperties(["audio","video"],{HAVE_CURRENT_DATA:{value:2},HAVE_ENOUGH_DATA:{value:4},HAVE_FUTURE_DATA:{value:3},HAVE_METADATA:{value:1},HAVE_NOTHING:{value:0},NETWORK_EMPTY:{value:0},
NETWORK_IDLE:{value:1},NETWORK_LOADING:{value:2},NETWORK_NO_SOURCE:{value:3}},"prop"))});
