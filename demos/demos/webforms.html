<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta charset="utf-8"/>
	<link href="../css/styles.css" rel="stylesheet" />
	
	<style>
		
		fieldset div {
			overflow: hidden;
			zoom: 1;
			padding: 5px;
			border: 1px solid #000;
			margin: 5px 0;
		}
		input.form-ui-invalid,
		select.form-ui-invalid,
		textarea.form-ui-invalid {
			border-color: #800;
		}
		input.form-ui-valid,
		select.form-ui-valid,
		textarea.form-ui-valid {
			border-color: #080;
		}
		span.input-datetime-local.form-ui-invalid {
			-moz-box-shadow: 1px 1px 1px #800;
			box-shadow: 1px 1px 1px #800;
		}
		span.input-datetime-local.form-ui-valid {
			-moz-box-shadow: 1px 1px 1px #080;
			box-shadow: 1px 1px 1px #080;
		}
		
	</style>
	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
	<script src="../js-webshim/minified/extras/modernizr-1.7.min.js"></script>
	<script src="../js-webshim/minified/extras/mousepress.js"></script>
	
	<script src="../js-webshim/minified/polyfiller.js"></script>
	
	<!--
		<script src="../../src/polyfiller.js"></script> 
		<script>
			$.webshims.debug = true;
		</script>
	-->
    <script class="example">
    	
    	$.webshims.setOptions('forms', { customMessages: true}); 
		//load all defined
		//or load only a specific feature with $.webshims.polyfill('feature-name');
		$.webshims.polyfill();
		
		
        $(function(){
			var showHideFormsExt = function(){
				$('span.forms-ext-feature')[this.checked ? 'show' : 'hide']();
			};
			$('#show-forms-ext')
				.each(showHideFormsExt)
				.click(showHideFormsExt)
			;
		});
    </script>
	<script src="../demo-js/demo.js"></script>
	<title>HTML5 forms/Web Forms 2.0 widgets and constraint validation API : webshims lib - the polyfilling capability based loading JS libary</title>
	    
</head>

<body>
		<header>
			<hgroup>
				<h1>Webshims Lib</h1>
				<h2>Polyfill only the incapable browsers</h2>
			</hgroup>
			<nav>
				<ul>
					<li><a href="../index.html">home</a></li>
				</ul>
			</nav>
		</header>
		<div class="main">
		<nav>
			<ul>
				<li><a href="shiv.html">HTML5 shiv and innerShiv</a></li>
				<li><a href="es5.html">ES5/JavaScript 1.8.5</a></li>
				<li><strong>constraint validation and input widgets</strong></li>
				<li><a href="canvas.html">canvas</a></li>
				<li><a href="json-storage.html">storage and JSON</a></li>
				<li><a href="geolocation.html">geolocation API</a></li>
				<li><a href="details.html">details &amp; summary</a></li>
			</ul>
		</nav>
		<div class="main-box">
		<section>
			<hgroup>
				<h2>HTML5 forms</h2>
				<h3>Demo/About/Documentation of HTML5 constraint validation API</h3>
			</hgroup>
			<p>The <code>forms</code> (constraint validation without number, date etc.) and <code>forms-ext</code> (number, date, range etc.) features of the webshim lib are implementing support for the <a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html#the-constraint-validation-api">constraint validation API</a>, some input widgets and the placeholder-attribut.</p>
			<section>
				<h3>Implemented/fixed elements, attributes, properties, methods, events</h3>
				<p><label><input type="checkbox" id="show-forms-ext" checked="checked" /> show/hide <code>forms-ext</code> features</label></p>
				<ul>
					<li><strong>elements:</strong> <a href="http://www.w3.org/TR/html5/the-button-element.html#the-output-element">output</a>, <a href="http://www.w3.org/TR/html5/the-button-element.html#the-datalist-element">datalist</a> (currently not for date, number, datetime-local and range type)</li>
					<li><strong>types</strong>: <a href="http://www.w3.org/TR/html5/states-of-the-type-attribute.html#e-mail-state">email</a>, <a href="http://www.w3.org/TR/html5/states-of-the-type-attribute.html#url-state">url</a><span class="forms-ext-feature">, <a href="http://www.w3.org/TR/html5/states-of-the-type-attribute.html#local-date-and-time-state">datetime-local</a>, <a href="http://www.w3.org/TR/html5/states-of-the-type-attribute.html#date-state">date</a>, <a href="http://www.w3.org/TR/html5/states-of-the-type-attribute.html#time-state">time</a>, <a href="http://www.w3.org/TR/html5/number-state.html#number-state">number</a>, <a href="http://www.w3.org/TR/html5/number-state.html#range-state">range</a></span></li>
					<li><strong>attributes (and IDL, if existing)</strong>: <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-placeholder">placeholder</a>, <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-list">list</a>, <a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html#attr-fe-autofocus">autofocus</a>, <a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html#attr-fs-novalidate">novalidate</a>, <a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html#attr-fs-formnovalidate">formnovalidate</a> (currently only save on input[type=submit|button], not on button), <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-required">required</a>, <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-pattern">pattern</a>, <a href="http://www.w3.org/TR/html5/the-button-element.html#attr-textarea-maxlength">maxlength</a><span class="forms-ext-feature">, <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-step">step</a>, <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-max">max</a>, <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#attr-input-min">min</a></span></li>
					<li><strong>properties/IDLs</strong>: <a href="http://www.w3.org/TR/html5/the-button-element.html#dom-datalist-options">options</a>, 
<!--
<a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#dom-input-selectedoption">selectedOption</a>,
--> 
						<a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html#dom-cva-willvalidate">willValidate</a>, <a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html#dom-cva-validity">validity</a>, <a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html#dom-cva-validationmessage">validationMessage</a><span class="forms-ext-feature">, <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#dom-input-valueasnumber">valueAsNumber</a>, <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#dom-input-valueasdate">valueAsDate</a></span></li>
					<li><strong>methods</strong>: <a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html#dom-cva-setcustomvalidity">setCustomValidity</a>, <a href="http://www.w3.org/TR/html5/forms.html#dom-form-checkvalidity">checkValidity</a></li>
					<li><strong>events</strong>: <a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html#constraint-validation">invalid</a>, <a href="http://www.w3.org/TR/html5/common-input-element-attributes.html#event-input-input">input</a></li>
					<li><strong>Selectors</strong>: <span class="forms-ext-feature"><a href="http://www.w3.org/TR/css3-ui/#pseudo-in-range">:in-range</a>, <a href="http://www.w3.org/TR/css3-ui/#pseudo-out-of-range">:out-of-range</a></span> (Not for CSS, only for JS, for other selectors like ":required", ":invalid" please look into the abstractions section)</li>
				</ul>
				
				
				<h3>Options for the <code>forms</code> feature</h3>
				<ul>
					<li><strong>customMessages</strong> (boolean): <code>false</code> (default) || <code>true</code>. If <code>customMessages</code> is set to true. Webshims Lib will implement a DOM-Property called customValidationMessage, which can be changed through the $.webshims.validityMessages-Array.</li>
					<li><strong>overrideMessages</strong> (boolean): <code>false</code> (default) || <code>true</code>. Overrides the native messages with the customMessages - using the <code>setCustomValidity</code>-method. This is usefull, if you want to use customMessages with native validation UI. If you want to use custom messages with custom styleable UI. Use the <code>customMessages</code>-option instead.</li>
					<li><strong>replaceValidationUI</strong> (boolean): <code>false</code> (default) || <code>true</code>. Replaces the browser validation UI with a custom styleable UI.</li>
					<li><strong>placeholderType</strong> (string): <code>"value"</code> (default) || <code>"over"</code>. If placeholderType is set to "over", the polyfill uses the overLabel technique to create a placeholder and doesn't "polute" the value property.</li>
					
				</ul>
				
				<h3>Options for the <code>forms-ext</code> feature</h3>
				<ul>
					<li><strong>replaceUI</strong> (boolean): <code>false</code> (default) || <code>true</code>. If replaceUI is set to true the date, datetime and slider Widgets are replaced in all browsers (also in browser, which have implemented these types). This is usefull, if you want to style the UI in all browsers.</li>
					<li><strong>slider</strong> (options): <a href="http://jqueryui.com/demos/slider/">jQuery UI Slider-Options</a></li>
					<li><strong>datepicker</strong> (options): <a href="http://jqueryui.com/demos/datepicker/">jQuery UI Datepicker-Options</a></li>
				</ul>
				
				<h3>Extensions/Abstractions to the standard</h3>
				<ul>
					<li><strong>event: firstinvalid</strong>: <code>firstinvalid</code> is a simple, bubbling event, which is triggered on the first invalid form element. Preventing the default of firstinvalid will automatically prevent the default behavior of all current invalid elements.</li>
					<li><strong>event: lastinvalid</strong>: <code>lastinvalid</code> is an extended, bubbling, (but) uncancelable event, which is triggered on the last invalid form element. The property <code>invalidlist</code> is a jQuery-collection of all current invalid elements.</li>
					<li><strong>selectors for CSS/JS: .form-ui-valid/.form-ui-invalid</strong>: which work similiar to <a href="https://developer.mozilla.org/en/CSS/%3A-moz-ui-valid">-moz-ui-valid</a>/<a href="https://developer.mozilla.org/en/CSS/%3A-moz-ui-invalid">-moz-ui-invalid</a></li>
					<li><strong>selectors for JS</strong>: <a href="http://www.w3.org/TR/css3-ui/#pseudo-invalid">:invalid-element</a>, <a href="http://www.w3.org/TR/css3-ui/#pseudo-valid">:valid-element</a>, <a href="http://www.w3.org/TR/css3-ui/#pseudo-required">:required-element</a>, <a href="http://www.w3.org/TR/css3-ui/#pseudo-optional">:optional-element</a></li>
					<li><strong>property: customValidationMessage</strong>: very similiar to the standard validationMessage, but always uses built-in custom validation messages, which can be better controlled. <strong>Note: You have to either set <code>customMessages</code> to true or <code>overrideMessages</code> to true, before calling the <code>polyfill</code> method, to get this new property.</strong></li>
					<li><strong>helper: $.webshims.validityAlert.showFor</strong>: takes a DOM-Object/Selector/jQuery-Object and shows the invalid message for this element. (simply look into the prototype i.e. <code>console.log($.webshims.validityAlert)</code> to make changes)</li>
				</ul>
								
			</section>
			<section>
				<h3>Simple Demo</h3>
				<form action="#" method="post">
	               
	                <p class="required"><span>*</span> Required fields</p>
	                <fieldset>
	                    
	                    <div class="form-element">
	                        <label for="email">
	                            E-Mail + datalist: <dfn title="required">*</dfn>
							</label>
	                       	<input list="datalist" name="email" required="required" type="email" id="email" />
							<datalist id="datalist">
								<select>
									<option value="yourmail@gmail.com"></option>
									<option value="yourmail@yahoo.com"></option>
									<option value="mail@some-example-domain.com"></option>
									<option value="foo@bar.baz"></option>
								</select>
							</datalist>
	                    </div>
						<div class="form-element">
	                        <label for="number">
	                            number: <dfn title="required">*</dfn>
							</label>
	                       	<input name="number" required="required" type="number" id="number" />
	                    </div>
						
						<div class="form-element">
	                        <label for="range">
	                            range:
							</label>
	                       	<input name="range" type="range" id="range" />
	                    </div>
						
						
						
						<div class="form-element">
	                        <label for="time">
	                            time: 
							</label>
	                       	<input name="time" type="time" id="time" />
	                    </div>
	                    						
						<div class="form-element">
	                        <label for="datetime-local">
	                            datetime-local: 
							</label>
	                       	<input value="2010-12-31T23:59" name="datetime-local" type="datetime-local" id="datetime-local" />
	                    </div>
						
						<div class="form-element">
	                        <label for="password">
	                            password: 
							</label>
	                       	<input placeholder="password" name="password" type="password" id="password" />
	                    </div>
						
						<div class="form-element">
			                <label for="textarea">
			                    textarea: *
							</label>
			               	<textarea placeholder="hello this is a textbox" required="required" name="textarea" id="textarea"></textarea>
			            </div>
						
						<div class="form-element">
			                <label for="select">
			                    select: *
							</label>
			               	<select required="required" name="select" id="select">
			               		<option value="">Please choose</option>
								<option>Option 1</option>
								<option>Option 2</option>
								<option>Option 3</option>
			               	</select>
			            </div>
						
						<div class="form-element">
	                        <label for="number2">
	                            number + number = output:
							</label>
	                       	<input oninput="$(output2).attr( 'value', ($(this).attr('valueAsNumber') || 0) + ($(number3).attr('valueAsNumber') || 0) )" step="0.5" value="0" name="number2" type="number" id="number2" />
							<input oninput="$(output2).attr( 'value', ($(this).attr('valueAsNumber') || 0) + ($(number2).attr('valueAsNumber') || 0) )" name="number3" value="0" type="number" />
							<output id="output2"></output>
	                    </div>
						
						<div class="form-element">
							<fieldset>
								<legend> date +oninput+ range</legend>
		                       	<input type="date" id="dateControlledByRange" value="2011-01-01" min="2011-01-01" max="2011-12-31" oninput="$.attr( rangeControlledByDate, 'valueAsNumber', $.attr(this, 'valueAsNumber') )" />
								<input type="range" id="rangeControlledByDate" value="1293840000000" min="1293840000000" max="1325289600000" step="86400000" oninput="$.attr( dateControlledByRange, 'valueAsNumber', $.attr(this, 'valueAsNumber') )" style="margin-left: 5px; width: 400px;" />
							</fieldset>
	                    </div>
						
						<div class="form-item">
	                       	<input type="checkbox" required id="checkbox" name="checkbox" />
							<label for="checkbox">
	                            required checkbox*
							</label>
	                    </div>
						
						
	                    <div>
	                    	<h4>Radio-Group Headline Short Labels  <dfn title="required">*</dfn></h4>
	                    	<fieldset class="mod">
	                    		<legend>Legend Short Labels  <dfn title="required">*</dfn></legend>
	                            <div class="form-item">
	                                <input type="radio" id="field6-1" name="radio-grp1-1" required />
									<label for="field6-1">
	                                    Radiooption 2
	                                </label>
								</div>
								<div class="form-item">
	                                <input type="radio" id="field7-1" name="radio-grp1-1" />
	                               	<label for="field7-1"> 
										Radiooption 2
	                            	</label>
								</div>
								<div class="form-item">
	                                <input type="radio" id="field8-1" name="radio-grp1-1" />
									<label for="field8-1">
	                                	Radiooption 3
	                            	</label>
								</div>
	                        </fieldset>
	                    </div>
	                    
	                    <div class="button-wrapper">
	                    	<input type="submit" value="Send" />
	                    </div>
	                </fieldset>
	            </form>
			</section>
			
			<aside>
				<hgroup>
					<h2>How to...</h2>
					<h3>Customized Demos / Code Snippets / Tutorials</h3>
				</hgroup>
				<div class="accordion">
					<h3 id="custom-error" class="button">... create custom stylable error messages</h3>
					<div class="panel">
						<p>Creating custom stylable error messages is simple (You won't see a difference in polyfilled browsers):</p>
						
<code class="block run-once">
//bind to the first invalid element in a form
$('form').bind('firstinvalid.example1', function(e){ 
	//show the invalid alert for first invalid element
	$.webshims.validityAlert.showFor( e.target ); 
	//prevent browser from showing native validation message 
	return false; 
});

//unbind event binding from second/next example:
$('form').unbind('firstinvalid.example2');
</code>
						
						<p>Using custom messages instead of native browser messages is also easy. Simply implement the customValidationMessage attribute and use it.</p>

<code class="block run-once">
//configure webshims to implement new customValidationMessage attribute
//$.webshims.setOptions('forms', {
//	customMessages: true
//});

//load all polyfill features
//$.webshims.polyfill();

//wait for DOM-Ready
$(function(){
	//bind to the first invalid element in a form
	$('form').bind('firstinvalid.example2', function(e){ 
		//show the invalid alert for first invalid element and pass the custom validation message 
		$.webshims.validityAlert.showFor( e.target, $(e.target).attr('customValidationMessage') ); 
		//prevent browser from showing native validation message 
		return false; 
	});
});


//unbind event binding from first example:
$('form').unbind('firstinvalid.example1');
</code>
						<p>or use the content attribute API</p>
<code class="block">
&lt;label for="name"&gt;Name:&lt;/label&gt;
&lt;input id="name" required data-errormessage="Please tell us your Name" /&gt;
&lt;!-- or --&gt;
&lt;label for="name"&gt;Name:&lt;/label&gt;
&lt;input id="name" required -x-moz-errormessage="Please tell us your Name" /&gt;
</code>
						<p>More information about <a href="webforms/1-webforms-lang-custom-bubble.html">custom error messages/custom error bubbles</a> (also explains how to change the built-in text).</p>
					</div>
					<h3 id="custom-widget" class="button">... create/configure custom stylable slider/date widgets in all browser</h3>
					<div class="panel">
						<p>Simply change some configuration and you are ready.</p>
<code class="block">
configure webshims to use JS-Widgets instead of native widgets
$.webshims.setOptions('forms-ext', {
	replaceUI: true
});
</code>
						<p>More information about <a href="webforms/3-webforms-widgets.html">custom styleable input widgets</a>.</p>
					</div>
					<h3 id="custom-widget" class="button">... create custom validation rules</h3>
					<div class="panel">
						<p>There are several solution. You can try to use the <code>pattern attribute...</code></p>
<code class="block">
&lt;input pattern="[0-9][A-Z]{3}" title="A part number is a digit followed by three uppercase letters." /&gt;
</code>
						<p>... and for more complex constraint simply use the <code>setCustomValidity</code>-method:</p>
<code class="block">
	var testValidity = function(){
		if( hasError ) {
			$(this).setCustomValidity('This field has an error');
		} else {
			$(this).setCustomValidity('');
		}
	};
</code>
						<p>More information about <a href="webforms/4-webforms-custom-validity.html">custom validation constraints</a>.</p>
					</div>
				</div>
			</aside>
			<aside>
				<h3>Known Issues/Constraints (most <code>forms-ext</code> only)</h3>
				<ul>
					<li>placeholder polyfill is only active in browsers, which do not support constraint validation. This means, that older versions of Opera are not polyfilled.</li>
					<li>Spinbuttons for type=time and type=number don't show up in Safari 5 on Windows <a href="https://bugs.webkit.org/show_bug.cgi?id=38381">webkit bug</a>, <a href="https://github.com/aFarkas/webshim/issues#issue/23">webshims bug</a></li>
					<li>Spinbuttons for type=number on Safari 5 Mac has some issue: They have bad usability, if the input starts with an empty value or if you are using step=any.</li>
					<li>Webshims lib considers a polyfill only as "extreme stable/futureproof", if at least three different browser engines do support the polyfilled features, while this is true for the <code>forms</code>-feature, it isn't for the <code>forms-ext</code>-feature.</li>
				</ul>
			</aside>	
			<aside>
				<h3>Links about Webforms</h3>
				<ul>
					<li><a href="https://developer.mozilla.org/en/HTML/HTML5/Forms_in_HTML5">Forms in HTML5 (by MDC)</a></li>
					<li><a href="http://diveintohtml5.org/forms.html">A Form of Madness (Dive Into HTML5)</a></li>
					<li><a href="http://hacks.mozilla.org/2010/11/firefox-4-html5-forms/">Firefox 4: HTML5 Forms (Mozilla Hacks)</a></li>
					<li><a href="http://dev.opera.com/articles/view/improve-your-forms-using-html5/">Improve your forms using HTML5! by Anne van Kesteren</a></li>
					<li><a href="http://www.alistapart.com/articles/forward-thinking-form-validation/">Forward Thinking Form Validation by Ryan Seddon</a></li>
				</ul>
			</aside>		
	</section>
	</div>
	</div>
	<footer>		
		<small>
			Note: every shim is a hack! working with native cutting edge technology is also a hack!
		</small>
	</footer>
<!--[if lte IE 7]>
	<div class="browser-support"> 			
		<div class="browser-support-box"> 				
			Webshims Lib really cares about cross browser support and supports all A-Graded Browsers including IE6 and newest Opera. But I don't care about Styling/Layout issues in IE7- on this demo page.
		</div> 		
	</div>
<![endif]-->
</body>
</html>   
