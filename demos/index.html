<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta charset="utf-8"/>
	<link href="css/styles.css" rel="stylesheet" />
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
	<script src="js-webshim/minified/polyfiller.js"></script>
    <script class="example">
    	
		//path is path of polyfiller.js + shims/
    	$.webshims.loader.basePath += 'shims/';
		//load all defined modules (look into features.js)
		//or load only a specific feature with $.webshims.polyfill('feature-name');
		
		$.webshims.polyfill();
		
    </script>
	
	<title>webshims lib - the polyfilling, capability based loading JS libary</title>
	    
</head>

<body class="home">
	<section id="wrapper"> 
		<header>
			<hgroup>
				<h1>Webshims Lib</h1>
				<h2>Polyfill only the uncapable browsers</h2>
			</hgroup>
		</header>
		<section>
			<div class="home-box about-box">
				<h2>About</h2>
				<p>Webshims Lib enables / polyfills some of the latest Browserfeatures also known as "HTML5-Features" in non capable Browsers. It is build on Top of jQuery.</p>
			</div>
			<div class="home-box download-box">
				<h3>Download</h3>
				<p><a href="http://github.com/aFarkas/webshim/downloads">Webshims polyfilling Libary version 1.0.0</a></p>
			</div>
			<div class="home-box">
			<h3>Main concepts</h3>
				<ul>
					<li><strong>Capability based loading</strong>: lightweight for good browsers / heavyweight for really bad browsers (I really like this)</li>
					<li><strong>almost pure native and accurate APIs | no/less abstractions</strong>: Helps you to learn HTML5 (Markup-/DOM/JS-APIs) and to build usefull abstractions and extensions on top of the standard. Documentation is the specification (i.e.: <a href="http://dev.w3.org/html5/html-author/">HTML5 W3C Specification</a>)</li>
					<li><strong>futureproof Feature-Detection</strong>: We try to feature detect everything instead of browsersniffing to be more futureproof</li>
				</ul>
			</div>
			<div class="feature-example home-box">
				<h3>What makes webshims lib differnt?</h3>
				<p>Did you ever tried to dynamically add/change the placeholder attribute with one of the other placeholder shims?</p>
				<form action="#">
					<input id="placeholder" placeholder="change me" />
				</form>
				
				<code>$("#placeholder").attr("placeholder", "</code><input id="placeholder-text" /><code>");</code> <button>run code</button>
				<div class="hidden-explanation">
					<p>Being able to add/change the placeholder of an input element dynamically, isn't that important. It only shows how webshims lib works. With some little constraints you won't be able to recognize a difference between the shim and the native implementation. In some cases the shim will be more compilant, than the current browser implementations.</p>
				</div>
			</div>
			<div class="home-box">
				<h3>Supported Browsers</h3>
				<p>Webshims lib is testet in the following browsers (Webshims lib may support more than these):</p>
				<ul>
					<li>IE6+</li>
					<li>Firefox 3.0+</li>
					<li>Safari 5.0+</li>
					<li>Chrome 5.0+</li>
					<li>Opera 10.5+</li>
				</ul>
				
			</div>
			<aside class="home-box">
				<h4>Similiar projects &amp; used third party scripts by webshims lib</h4>
				<ul>
					<li><a href="http://code.google.com/p/base2/">base2</a> by the grandmaster of webshims <a href="http://dean.edwards.name/">dean edwards</a></li>
					<li><a href="http://code.google.com/p/html5shim/">html5shim</a> by remy sharp</li>
					<li><a href="http://jdbartlett.github.com/innershiv/">innerShiv</a> by joe bartlett</li>
					<li><a href="http://code.google.com/p/explorercanvas/">excanvas</a> by google erik arvidsson</li>
					<li><a href="http://gist.github.com/350433">storage polyfill</a> by remy sharp</li>
					<li><a href="http://github.com/kriskowal/es5-shim/">ES5 shim</a></li>
					<li><a href="http://github.com/SlexAxton/yepnope.js">Yepnope JS - Regressive Enhancement With Style (capability based loading on top of LABjs)</a></li>
					<li><a href="http://www.useragentman.com/blog/2010/07/27/cross-browser-html5-forms-using-modernizr-webforms2-and-html5widgets/">webforms2 and html5widgets</a> by weston ruter and zoltan hawryluk</li>
					<li><a href="http://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills">List of shims by modernizr</a></li>
				</ul>
			</aside>
		</section>
		<section>
			<h2>Simple and ugly Demos: You are the developer. Improve HTML/CSS/JS etc.</h2>
			<div class="article-wrapper">
				<article>
					<h3>Semantic Structure: Shiv solution</h3>
					<p>Implements parsing/styling of HTML5 elements like section, article, footer, nav in IE8-. <a href="demos/shiv.html">more Information on shiv solution</a></p>
				</article>
				
				<article>
					<h3>ES5/JavaScript 1.8.5</h3>
					<p>Array (some, forEach etc.), Object (keys, create etc.), Function (bind), Date (toJSON, now etc.). <a href="demos/es5.html">more Information on ES5/JavaScript 1.8.5 shim implementation</a></p>
				</article>
				
				
				<article>
					<h3>JSON.parse/JSON.stringify &amp; localStorage/sessionStorage</h3>
					<p>Implements JSON and the Webstorage API. <a href="demos/json-storage.html">more Information on geolocation shim implementation</a></p>
				</article>
				<article>
					<h3>Geolocation</h3>
					<div class="te-geolcation teaser-example">
						<div id="geolocation"></div>
						<button class="geolocation">Where am I?</button>
					</div>
					<p>Implements the geolocation API. <a href="demos/geolocation.html">more Information on geolocation shim implementation</a></p>
				</article>
				
				
				<article>
					<h3>Canvas</h3>
					<div  class="te-canvas teaser-example">
						<canvas class="peter" width="200" height="200"></canvas>
					</div>
					<p>Implements canvas. <a href="demos/canvas.html">more Information on canvas shim implementation</a></p>
				</article>
				
				<article>
					<h3>HTML5 constraint validation + input type widgets</h3>
					<div class="te-webforms teaser-example">
						<form action="#">
							<div class="form-element">
				                <label for="name">
				                    Name *:
								</label>
				               	<input name="name" required="required" type="text" id="name" placeholder="your name" />
				            </div>
							<div class="form-element">
				                <label for="email">
				                    E-Mail:
								</label>
				               	<input name="email" required="required" type="email" id="email" placeholder="yourmail@host.de" />
				            </div>
							<div class="form-element">
				                <label for="range">
				                    range:
								</label>
				               	<input name="range" type="range" id="range" />
				            </div>
							<div>
								<input type="submit" />
							</div>
						</form>
					</div>
					<p>Implements some HTML5 form features (aka Web forms 2.0) like constraint validation and some input[type] widgets. <a href="demos/webforms.html">more Information on HTML5 form soultion</a></p>
					
				</article>
				
			</div>
		</section>
		<section>
			<h2>How to</h2>
			<h3>Embedding and configuring the script</h3>
			
			<ul>
				<li>Take the 'js-webshim' folder and add it to your project (You will find a minified and a dev-folder there)</li>
				<li>Embed the polyfiller.js into your HTML-Page (you can concat/rename these files with your other js, at least the html-ext.js has to be included into the head)</li>
				<li>Configure the webshims folder (<code>$.webshims.loader.basePath</code>) and load your features (<code>$.webshims.polyfill();</code>).</li>
			</ul>
			
<code class="block">
&lt;script src="js-webshim/minified/polyfiller.js"&gt;&lt;/script&gt;

&lt;script&gt;
	//path is path of polyfiller.js-code + shims/
	$.webshims.loader.basePath += 'shims/';
	//load and implement all unsupported features
	$.webshims.polyfill();
&lt;/script&gt;	
</code>

			<p>The polyfill-method can also take a keyword called <code>lightweight</code>, wich will load a filesize-/feature balanced profile. The lightweight-profile currently loads all features, except of the <code>forms-ext</code> feature (numerical and date related web form features). The normal HTML5 <code>forms</code> feature including constraint validation (required, pattern, [type=email]) is loaded in this profile.</p>
<code class="block">
&lt;script src="js-webshim/minified/polyfiller.js"&gt;&lt;/script&gt;

&lt;script&gt;
	//path is path of polyfiller.js-code + shims/
	$.webshims.loader.basePath += 'shims/';
	//load and implement all unsupported features
	$.webshims.polyfill('lightweight');
&lt;/script&gt;	
</code>			
			<h3>When is a feature ready to use?</h3>
			<p>Not every feature is ready immediately in all browsers. To get started, if a feature is ready, simply name the features you want to use and pass a callback-function to <code>$.webshims.ready</code></p>
<code class="block">
&lt;script&gt;
	$.webshims.ready('geolocation', function(){
		//work with geolocation
	});
&lt;/script&gt;	
</code>		
			<p>If you want to use multiple features in your callback-function pass the feature list seperated by a whitespace:</p>
<code class="block">
&lt;script&gt;
	$.webshims.ready('geolocation json-storage', function(){
		//work with geolocation, JSON and localStorage
	});
&lt;/script&gt;	
</code>	
			<p>Note that this callback function may be called before DOM-Ready. If you want to use a feature after DOM-Ready, simply pass the string ready:</p>
<code class="block">
&lt;script&gt;
	$.webshims.ready('ready canvas', function(){
		//work with the canvas in the document
	});
	
	//this is equal to
	
	//$(function(){
	//	$.webshims.ready('canvas', function(){
	//		//work with the canvas in the document
	//	});
	//});
&lt;/script&gt;	
</code>	
			
			
			<h3>minor Abstractions to DOM-Attributes, DOM-Methods and DOM-Events</h3>
			<p>Due to the fact, that we can not extend the prototype of elements in all browsers, we always use jQuery as an extension-wrapper.</p>
			<ul>
				<li>
					<p>Accessing DOM-Properties/Attribut IDLs: if the feature allows accessing a specific property, always use jQuery's built in <code>$.attr</code>-method:</p>
<code class="block">
//instead of accessing a property directly (i.e.: this.validity) 
//use $.fn.attr 
$(this).attr('validity');
//or $.attr
//$.attr(this, 'validity');
</code>
				</li>
				<li>
					<p>calling a DOM-Method: If the standard defines a DOM-Method, webshims lib has generated a jQuery-Method, wich wraps this feature for you:</p>
<code class="block">
//instead of calling a DOM-method directly (i.e.: this.checkValidity() ) 
//use the jQuery-Plugin method 
$(this).checkValidity();
</code>
					<p>If you pass a list of nodes and the method doesn't return anything, the method will be called on each element in this list, otherwise it will be called on the first element.</p>
				</li>
				<li>
					<p>Most events in the HTML5 specification are so called simple events. Simple events do not bubble. Due to the fact that developers really like event delegation and jQuery can not really distinguish between the event phases (capturing/propagation), we use almost event capturing in the native implementation and $.fn.trigger in the shim.</p>
					<p>This means, that the HTML5 events go down the DOM-tree in capable browsers and go up the tree in polyfilled browsers. This can create differences, if you are calling <code>event.stopPropagation();</code> or <code>return false;</code> in your event handler. If you only want to prevent the default don't use <code>return false;</code> and use <code>event.preventDefault();</code> instead.</p>
				</li>
			</ul>
			<h3>How to build an abstraction/extension, that works with and without webshims lib?</h3>
			<p>Please read the developer guide for <a href="demos/z-advanced-developer.html#create-extensions">building extensions</a>.</p>
			<h3>How to write a new feature implementation?</h3>
			<p>Please read the developer guide for <a href="demos/z-advanced-developer.html#implement-features">implementing new features</a>.</p>
		</section>
		
			
		<section>
			<h3>Further Development</h3>
			<p>Feel free to fork, collaborate, test develope extensions :-).</p>
			<h4>Development for stable 1.0 release</h4>
			<ul>
				<li>improve current implementations</li>
				<li>find and fix bugs in current implementations</li>
				<li>improve documentation</li>
			</ul>
			<h4>Further Development for next major releases</h4>
			<ul>
				<li><a href="http://www.w3.org/TR/html5/video.html">audio/video</a> implementation</li>
				<li>history (pushState etc.)/hashchange (maybe <a href="http://benalman.com/projects/jquery-hashchange-plugin/">hashchange</a> / <a href="http://github.com/fortes/history.js/">history</a>)</li>
				<li><a href="http://www.w3.org/TR/html5/the-button-element.html#the-datalist-element">datalist-element</a></li>
				<li><a href="http://www.w3.org/TR/html5/interactive-elements.html">interactive elements</a> (we should wait here, till a native implementation exists)</li>
			</ul>
		</section>
		
		<small>
			Note: every shim is a hack! working with native cutting edge technology is also a hack!
		</small>
    </section> 
	
	<script>
		$.webshims.ready('ready geolocation', function(){
			$('button.geolocation').click(function(){
				var elem = $(this).attr('disabled', true).addClass('loader');
				$('#geolocation').html('please wait calculating position');
				navigator.geolocation.getCurrentPosition(function(pos){
					elem.removeClass('loader');
					var loc = "I think you are ";
					if(pos.address && pos.address.city){
						loc += "in "+ pos.address.city +" ";
					}
					loc += "@ latitude: "+ pos.coords.latitude +"/longitude: " + pos.coords.longitude;
					$('#geolocation').html(loc);
				}, function(){
					elem.removeClass('loader');
					$('#geolocation').html('Oops, something went wrong');
				});
			});
		});
		
		//canvas feature
        $.webshims.ready('ready canvas', function(){
			//example from http://www.peterkroener.de/eine-kleine-canvas-einfuehrung/
			$('canvas.peter').each(function(){
				var animate = function(ax, ay, adx, ady, bx, by, bdx, bdy){
					setTimeout(function(){
						//Bewegen und Abprallen für Quadrat A
						if(ax == 150){
							adx = -1;
						}
						else{
							if(ax == 0){
								adx = 1;
							}
						}
						if(ay == 150){
							ady = -1;
						}
						else{
							if(ay == 0){
								ady = 1;
							}
						}
						ax = ax+adx;
						ay = ay+ady;
						//Bewegen und Abprallen für Quadrat B
						if(bx == 150){
							bdx = -1;
						}
						else{
							if(bx == 0){
								bdx = 1;
							}
						}
						if(by == 150){
							bdy = -1;
						}
						else{
							if(by == 0){
								bdy = 1;
							}
						}
						bx = bx+bdx;
						by = by+bdy;
						// Alles neu zeichnen
						context.clearRect(0, 0, 200, 200);
						context.fillStyle = "rgba(0, 0, 255, 0.5)";
						context.fillRect(ax, ay, 50, 50);
						context.fillStyle = "rgba(0, 255, 0, 0.5)";
						context.fillRect(bx, by, 50, 50);
						animate(ax, ay, adx, ady, bx, by, bdx, bdy);
					}, 30);
				};
				var context = $(this).getContext('2d');
				animate(31, 69, 1, -1, 8, 25, 1, 1);
			});
        });
    </script>
	<script src="demo-js/demo.js"></script>
</body>
</html>   